(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();function ff(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fu={exports:{}},yi={},Pu={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xr=Symbol.for("react.element"),pf=Symbol.for("react.portal"),mf=Symbol.for("react.fragment"),hf=Symbol.for("react.strict_mode"),gf=Symbol.for("react.profiler"),vf=Symbol.for("react.provider"),yf=Symbol.for("react.context"),xf=Symbol.for("react.forward_ref"),wf=Symbol.for("react.suspense"),Sf=Symbol.for("react.memo"),kf=Symbol.for("react.lazy"),po=Symbol.iterator;function Rf(e){return e===null||typeof e!="object"?null:(e=po&&e[po]||e["@@iterator"],typeof e=="function"?e:null)}var Du={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$u=Object.assign,Iu={};function nr(e,t,n){this.props=e,this.context=t,this.refs=Iu,this.updater=n||Du}nr.prototype.isReactComponent={};nr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};nr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _u(){}_u.prototype=nr.prototype;function ps(e,t,n){this.props=e,this.context=t,this.refs=Iu,this.updater=n||Du}var ms=ps.prototype=new _u;ms.constructor=ps;$u(ms,nr.prototype);ms.isPureReactComponent=!0;var mo=Array.isArray,Ou=Object.prototype.hasOwnProperty,hs={current:null},Au={key:!0,ref:!0,__self:!0,__source:!0};function zu(e,t,n){var r,l={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)Ou.call(t,r)&&!Au.hasOwnProperty(r)&&(l[r]=t[r]);var s=arguments.length-2;if(s===1)l.children=n;else if(1<s){for(var o=Array(s),c=0;c<s;c++)o[c]=arguments[c+2];l.children=o}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)l[r]===void 0&&(l[r]=s[r]);return{$$typeof:Xr,type:e,key:i,ref:a,props:l,_owner:hs.current}}function Mf(e,t){return{$$typeof:Xr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function gs(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xr}function Cf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ho=/\/+/g;function Oi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Cf(""+e.key):t.toString(36)}function Cl(e,t,n,r,l){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Xr:case pf:a=!0}}if(a)return a=e,l=l(a),e=r===""?"."+Oi(a,0):r,mo(l)?(n="",e!=null&&(n=e.replace(ho,"$&/")+"/"),Cl(l,t,n,"",function(c){return c})):l!=null&&(gs(l)&&(l=Mf(l,n+(!l.key||a&&a.key===l.key?"":(""+l.key).replace(ho,"$&/")+"/")+e)),t.push(l)),1;if(a=0,r=r===""?".":r+":",mo(e))for(var s=0;s<e.length;s++){i=e[s];var o=r+Oi(i,s);a+=Cl(i,t,n,o,l)}else if(o=Rf(e),typeof o=="function")for(e=o.call(e),s=0;!(i=e.next()).done;)i=i.value,o=r+Oi(i,s++),a+=Cl(i,t,n,o,l);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function nl(e,t,n){if(e==null)return e;var r=[],l=0;return Cl(e,r,"","",function(i){return t.call(n,i,l++)}),r}function Nf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _e={current:null},Nl={transition:null},jf={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:Nl,ReactCurrentOwner:hs};function Bu(){throw Error("act(...) is not supported in production builds of React.")}W.Children={map:nl,forEach:function(e,t,n){nl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return nl(e,function(){t++}),t},toArray:function(e){return nl(e,function(t){return t})||[]},only:function(e){if(!gs(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};W.Component=nr;W.Fragment=mf;W.Profiler=gf;W.PureComponent=ps;W.StrictMode=hf;W.Suspense=wf;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jf;W.act=Bu;W.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=$u({},e.props),l=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=hs.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(o in t)Ou.call(t,o)&&!Au.hasOwnProperty(o)&&(r[o]=t[o]===void 0&&s!==void 0?s[o]:t[o])}var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){s=Array(o);for(var c=0;c<o;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:Xr,type:e.type,key:l,ref:i,props:r,_owner:a}};W.createContext=function(e){return e={$$typeof:yf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vf,_context:e},e.Consumer=e};W.createElement=zu;W.createFactory=function(e){var t=zu.bind(null,e);return t.type=e,t};W.createRef=function(){return{current:null}};W.forwardRef=function(e){return{$$typeof:xf,render:e}};W.isValidElement=gs;W.lazy=function(e){return{$$typeof:kf,_payload:{_status:-1,_result:e},_init:Nf}};W.memo=function(e,t){return{$$typeof:Sf,type:e,compare:t===void 0?null:t}};W.startTransition=function(e){var t=Nl.transition;Nl.transition={};try{e()}finally{Nl.transition=t}};W.unstable_act=Bu;W.useCallback=function(e,t){return _e.current.useCallback(e,t)};W.useContext=function(e){return _e.current.useContext(e)};W.useDebugValue=function(){};W.useDeferredValue=function(e){return _e.current.useDeferredValue(e)};W.useEffect=function(e,t){return _e.current.useEffect(e,t)};W.useId=function(){return _e.current.useId()};W.useImperativeHandle=function(e,t,n){return _e.current.useImperativeHandle(e,t,n)};W.useInsertionEffect=function(e,t){return _e.current.useInsertionEffect(e,t)};W.useLayoutEffect=function(e,t){return _e.current.useLayoutEffect(e,t)};W.useMemo=function(e,t){return _e.current.useMemo(e,t)};W.useReducer=function(e,t,n){return _e.current.useReducer(e,t,n)};W.useRef=function(e){return _e.current.useRef(e)};W.useState=function(e){return _e.current.useState(e)};W.useSyncExternalStore=function(e,t,n){return _e.current.useSyncExternalStore(e,t,n)};W.useTransition=function(){return _e.current.useTransition()};W.version="18.3.1";Pu.exports=W;var $=Pu.exports;const bf=ff($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ef=$,Tf=Symbol.for("react.element"),Lf=Symbol.for("react.fragment"),Ff=Object.prototype.hasOwnProperty,Pf=Ef.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Df={key:!0,ref:!0,__self:!0,__source:!0};function Wu(e,t,n){var r,l={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Ff.call(t,r)&&!Df.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:Tf,type:e,key:i,ref:a,props:l,_owner:Pf.current}}yi.Fragment=Lf;yi.jsx=Wu;yi.jsxs=Wu;Fu.exports=yi;var u=Fu.exports,ga={},Uu={exports:{}},Ye={},Hu={exports:{}},Gu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,P){var _=M.length;M.push(P);e:for(;0<_;){var z=_-1>>>1,Y=M[z];if(0<l(Y,P))M[z]=P,M[_]=Y,_=z;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var P=M[0],_=M.pop();if(_!==P){M[0]=_;e:for(var z=0,Y=M.length,ve=Y>>>1;z<ve;){var J=2*(z+1)-1,re=M[J],le=J+1,kt=M[le];if(0>l(re,_))le<Y&&0>l(kt,re)?(M[z]=kt,M[le]=_,z=le):(M[z]=re,M[J]=_,z=J);else if(le<Y&&0>l(kt,_))M[z]=kt,M[le]=_,z=le;else break e}}return P}function l(M,P){var _=M.sortIndex-P.sortIndex;return _!==0?_:M.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var o=[],c=[],f=1,p=null,d=3,g=!1,x=!1,y=!1,R=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(M){for(var P=n(c);P!==null;){if(P.callback===null)r(c);else if(P.startTime<=M)r(c),P.sortIndex=P.expirationTime,t(o,P);else break;P=n(c)}}function S(M){if(y=!1,h(M),!x)if(n(o)!==null)x=!0,Te(N);else{var P=n(c);P!==null&&mt(S,P.startTime-M)}}function N(M,P){x=!1,y&&(y=!1,v(w),w=-1),g=!0;var _=d;try{for(h(P),p=n(o);p!==null&&(!(p.expirationTime>P)||M&&!I());){var z=p.callback;if(typeof z=="function"){p.callback=null,d=p.priorityLevel;var Y=z(p.expirationTime<=P);P=e.unstable_now(),typeof Y=="function"?p.callback=Y:p===n(o)&&r(o),h(P)}else r(o);p=n(o)}if(p!==null)var ve=!0;else{var J=n(c);J!==null&&mt(S,J.startTime-P),ve=!1}return ve}finally{p=null,d=_,g=!1}}var k=!1,C=null,w=-1,L=5,T=-1;function I(){return!(e.unstable_now()-T<L)}function q(){if(C!==null){var M=e.unstable_now();T=M;var P=!0;try{P=C(!0,M)}finally{P?K():(k=!1,C=null)}}else k=!1}var K;if(typeof m=="function")K=function(){m(q)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,fe=Q.port2;Q.port1.onmessage=q,K=function(){fe.postMessage(null)}}else K=function(){R(q,0)};function Te(M){C=M,k||(k=!0,K())}function mt(M,P){w=R(function(){M(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){x||g||(x=!0,Te(N))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(o)},e.unstable_next=function(M){switch(d){case 1:case 2:case 3:var P=3;break;default:P=d}var _=d;d=P;try{return M()}finally{d=_}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,P){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var _=d;d=M;try{return P()}finally{d=_}},e.unstable_scheduleCallback=function(M,P,_){var z=e.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?z+_:z):_=z,M){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=_+Y,M={id:f++,callback:P,priorityLevel:M,startTime:_,expirationTime:Y,sortIndex:-1},_>z?(M.sortIndex=_,t(c,M),n(o)===null&&M===n(c)&&(y?(v(w),w=-1):y=!0,mt(S,_-z))):(M.sortIndex=Y,t(o,M),x||g||(x=!0,Te(N))),M},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(M){var P=d;return function(){var _=d;d=P;try{return M.apply(this,arguments)}finally{d=_}}}})(Gu);Hu.exports=Gu;var $f=Hu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var If=$,Qe=$f;function b(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vu=new Set,Lr={};function Sn(e,t){Qn(e,t),Qn(e+"Capture",t)}function Qn(e,t){for(Lr[e]=t,e=0;e<t.length;e++)Vu.add(t[e])}var Lt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),va=Object.prototype.hasOwnProperty,_f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,go={},vo={};function Of(e){return va.call(vo,e)?!0:va.call(go,e)?!1:_f.test(e)?vo[e]=!0:(go[e]=!0,!1)}function Af(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function zf(e,t,n,r){if(t===null||typeof t>"u"||Af(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Oe(e,t,n,r,l,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Me[e]=new Oe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Me[t]=new Oe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Me[e]=new Oe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Me[e]=new Oe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Me[e]=new Oe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Me[e]=new Oe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Me[e]=new Oe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Me[e]=new Oe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Me[e]=new Oe(e,5,!1,e.toLowerCase(),null,!1,!1)});var vs=/[\-:]([a-z])/g;function ys(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vs,ys);Me[t]=new Oe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vs,ys);Me[t]=new Oe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vs,ys);Me[t]=new Oe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Me[e]=new Oe(e,1,!1,e.toLowerCase(),null,!1,!1)});Me.xlinkHref=new Oe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Me[e]=new Oe(e,1,!1,e.toLowerCase(),null,!0,!0)});function xs(e,t,n,r){var l=Me.hasOwnProperty(t)?Me[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(zf(t,n,l,r)&&(n=null),r||l===null?Of(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var $t=If.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rl=Symbol.for("react.element"),bn=Symbol.for("react.portal"),En=Symbol.for("react.fragment"),ws=Symbol.for("react.strict_mode"),ya=Symbol.for("react.profiler"),qu=Symbol.for("react.provider"),Qu=Symbol.for("react.context"),Ss=Symbol.for("react.forward_ref"),xa=Symbol.for("react.suspense"),wa=Symbol.for("react.suspense_list"),ks=Symbol.for("react.memo"),zt=Symbol.for("react.lazy"),Yu=Symbol.for("react.offscreen"),yo=Symbol.iterator;function ir(e){return e===null||typeof e!="object"?null:(e=yo&&e[yo]||e["@@iterator"],typeof e=="function"?e:null)}var ue=Object.assign,Ai;function vr(e){if(Ai===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ai=t&&t[1]||""}return`
`+Ai+e}var zi=!1;function Bi(e,t){if(!e||zi)return"";zi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var l=c.stack.split(`
`),i=r.stack.split(`
`),a=l.length-1,s=i.length-1;1<=a&&0<=s&&l[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(l[a]!==i[s]){if(a!==1||s!==1)do if(a--,s--,0>s||l[a]!==i[s]){var o=`
`+l[a].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=a&&0<=s);break}}}finally{zi=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?vr(e):""}function Bf(e){switch(e.tag){case 5:return vr(e.type);case 16:return vr("Lazy");case 13:return vr("Suspense");case 19:return vr("SuspenseList");case 0:case 2:case 15:return e=Bi(e.type,!1),e;case 11:return e=Bi(e.type.render,!1),e;case 1:return e=Bi(e.type,!0),e;default:return""}}function Sa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case En:return"Fragment";case bn:return"Portal";case ya:return"Profiler";case ws:return"StrictMode";case xa:return"Suspense";case wa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Qu:return(e.displayName||"Context")+".Consumer";case qu:return(e._context.displayName||"Context")+".Provider";case Ss:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ks:return t=e.displayName||null,t!==null?t:Sa(e.type)||"Memo";case zt:t=e._payload,e=e._init;try{return Sa(e(t))}catch{}}return null}function Wf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sa(t);case 8:return t===ws?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function tn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ku(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Uf(e){var t=Ku(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ll(e){e._valueTracker||(e._valueTracker=Uf(e))}function Xu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ku(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function zl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ka(e,t){var n=t.checked;return ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function xo(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=tn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zu(e,t){t=t.checked,t!=null&&xs(e,"checked",t,!1)}function Ra(e,t){Zu(e,t);var n=tn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ma(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ma(e,t.type,tn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function wo(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ma(e,t,n){(t!=="number"||zl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var yr=Array.isArray;function Bn(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+tn(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Ca(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(b(91));return ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function So(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(b(92));if(yr(n)){if(1<n.length)throw Error(b(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:tn(n)}}function Ju(e,t){var n=tn(t.value),r=tn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ko(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ec(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Na(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ec(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var il,tc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(il=il||document.createElement("div"),il.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=il.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Sr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hf=["Webkit","ms","Moz","O"];Object.keys(Sr).forEach(function(e){Hf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sr[t]=Sr[e]})});function nc(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Sr.hasOwnProperty(e)&&Sr[e]?(""+t).trim():t+"px"}function rc(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=nc(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var Gf=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ja(e,t){if(t){if(Gf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(b(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(b(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(b(61))}if(t.style!=null&&typeof t.style!="object")throw Error(b(62))}}function ba(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ea=null;function Rs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ta=null,Wn=null,Un=null;function Ro(e){if(e=el(e)){if(typeof Ta!="function")throw Error(b(280));var t=e.stateNode;t&&(t=Ri(t),Ta(e.stateNode,e.type,t))}}function lc(e){Wn?Un?Un.push(e):Un=[e]:Wn=e}function ic(){if(Wn){var e=Wn,t=Un;if(Un=Wn=null,Ro(e),t)for(e=0;e<t.length;e++)Ro(t[e])}}function ac(e,t){return e(t)}function sc(){}var Wi=!1;function oc(e,t,n){if(Wi)return e(t,n);Wi=!0;try{return ac(e,t,n)}finally{Wi=!1,(Wn!==null||Un!==null)&&(sc(),ic())}}function Pr(e,t){var n=e.stateNode;if(n===null)return null;var r=Ri(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(b(231,t,typeof n));return n}var La=!1;if(Lt)try{var ar={};Object.defineProperty(ar,"passive",{get:function(){La=!0}}),window.addEventListener("test",ar,ar),window.removeEventListener("test",ar,ar)}catch{La=!1}function Vf(e,t,n,r,l,i,a,s,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var kr=!1,Bl=null,Wl=!1,Fa=null,qf={onError:function(e){kr=!0,Bl=e}};function Qf(e,t,n,r,l,i,a,s,o){kr=!1,Bl=null,Vf.apply(qf,arguments)}function Yf(e,t,n,r,l,i,a,s,o){if(Qf.apply(this,arguments),kr){if(kr){var c=Bl;kr=!1,Bl=null}else throw Error(b(198));Wl||(Wl=!0,Fa=c)}}function kn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function uc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Mo(e){if(kn(e)!==e)throw Error(b(188))}function Kf(e){var t=e.alternate;if(!t){if(t=kn(e),t===null)throw Error(b(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var i=l.alternate;if(i===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===n)return Mo(l),e;if(i===r)return Mo(l),t;i=i.sibling}throw Error(b(188))}if(n.return!==r.return)n=l,r=i;else{for(var a=!1,s=l.child;s;){if(s===n){a=!0,n=l,r=i;break}if(s===r){a=!0,r=l,n=i;break}s=s.sibling}if(!a){for(s=i.child;s;){if(s===n){a=!0,n=i,r=l;break}if(s===r){a=!0,r=i,n=l;break}s=s.sibling}if(!a)throw Error(b(189))}}if(n.alternate!==r)throw Error(b(190))}if(n.tag!==3)throw Error(b(188));return n.stateNode.current===n?e:t}function cc(e){return e=Kf(e),e!==null?dc(e):null}function dc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=dc(e);if(t!==null)return t;e=e.sibling}return null}var fc=Qe.unstable_scheduleCallback,Co=Qe.unstable_cancelCallback,Xf=Qe.unstable_shouldYield,Zf=Qe.unstable_requestPaint,de=Qe.unstable_now,Jf=Qe.unstable_getCurrentPriorityLevel,Ms=Qe.unstable_ImmediatePriority,pc=Qe.unstable_UserBlockingPriority,Ul=Qe.unstable_NormalPriority,ep=Qe.unstable_LowPriority,mc=Qe.unstable_IdlePriority,xi=null,wt=null;function tp(e){if(wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(xi,e,void 0,(e.current.flags&128)===128)}catch{}}var ct=Math.clz32?Math.clz32:lp,np=Math.log,rp=Math.LN2;function lp(e){return e>>>=0,e===0?32:31-(np(e)/rp|0)|0}var al=64,sl=4194304;function xr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Hl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~l;s!==0?r=xr(s):(i&=a,i!==0&&(r=xr(i)))}else a=n&~l,a!==0?r=xr(a):i!==0&&(r=xr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&l)&&(l=r&-r,i=t&-t,l>=i||l===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ct(t),l=1<<n,r|=e[n],t&=~l;return r}function ip(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ap(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-ct(i),s=1<<a,o=l[a];o===-1?(!(s&n)||s&r)&&(l[a]=ip(s,t)):o<=t&&(e.expiredLanes|=s),i&=~s}}function Pa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hc(){var e=al;return al<<=1,!(al&4194240)&&(al=64),e}function Ui(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Zr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ct(t),e[t]=n}function sp(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-ct(n),i=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~i}}function Cs(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ct(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var V=0;function gc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var vc,Ns,yc,xc,wc,Da=!1,ol=[],Vt=null,qt=null,Qt=null,Dr=new Map,$r=new Map,Wt=[],op="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function No(e,t){switch(e){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":qt=null;break;case"mouseover":case"mouseout":Qt=null;break;case"pointerover":case"pointerout":Dr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$r.delete(t.pointerId)}}function sr(e,t,n,r,l,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[l]},t!==null&&(t=el(t),t!==null&&Ns(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function up(e,t,n,r,l){switch(t){case"focusin":return Vt=sr(Vt,e,t,n,r,l),!0;case"dragenter":return qt=sr(qt,e,t,n,r,l),!0;case"mouseover":return Qt=sr(Qt,e,t,n,r,l),!0;case"pointerover":var i=l.pointerId;return Dr.set(i,sr(Dr.get(i)||null,e,t,n,r,l)),!0;case"gotpointercapture":return i=l.pointerId,$r.set(i,sr($r.get(i)||null,e,t,n,r,l)),!0}return!1}function Sc(e){var t=cn(e.target);if(t!==null){var n=kn(t);if(n!==null){if(t=n.tag,t===13){if(t=uc(n),t!==null){e.blockedOn=t,wc(e.priority,function(){yc(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=$a(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ea=r,n.target.dispatchEvent(r),Ea=null}else return t=el(n),t!==null&&Ns(t),e.blockedOn=n,!1;t.shift()}return!0}function jo(e,t,n){jl(e)&&n.delete(t)}function cp(){Da=!1,Vt!==null&&jl(Vt)&&(Vt=null),qt!==null&&jl(qt)&&(qt=null),Qt!==null&&jl(Qt)&&(Qt=null),Dr.forEach(jo),$r.forEach(jo)}function or(e,t){e.blockedOn===t&&(e.blockedOn=null,Da||(Da=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,cp)))}function Ir(e){function t(l){return or(l,e)}if(0<ol.length){or(ol[0],e);for(var n=1;n<ol.length;n++){var r=ol[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Vt!==null&&or(Vt,e),qt!==null&&or(qt,e),Qt!==null&&or(Qt,e),Dr.forEach(t),$r.forEach(t),n=0;n<Wt.length;n++)r=Wt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Wt.length&&(n=Wt[0],n.blockedOn===null);)Sc(n),n.blockedOn===null&&Wt.shift()}var Hn=$t.ReactCurrentBatchConfig,Gl=!0;function dp(e,t,n,r){var l=V,i=Hn.transition;Hn.transition=null;try{V=1,js(e,t,n,r)}finally{V=l,Hn.transition=i}}function fp(e,t,n,r){var l=V,i=Hn.transition;Hn.transition=null;try{V=4,js(e,t,n,r)}finally{V=l,Hn.transition=i}}function js(e,t,n,r){if(Gl){var l=$a(e,t,n,r);if(l===null)Ji(e,t,r,Vl,n),No(e,r);else if(up(l,e,t,n,r))r.stopPropagation();else if(No(e,r),t&4&&-1<op.indexOf(e)){for(;l!==null;){var i=el(l);if(i!==null&&vc(i),i=$a(e,t,n,r),i===null&&Ji(e,t,r,Vl,n),i===l)break;l=i}l!==null&&r.stopPropagation()}else Ji(e,t,r,null,n)}}var Vl=null;function $a(e,t,n,r){if(Vl=null,e=Rs(r),e=cn(e),e!==null)if(t=kn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=uc(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vl=e,null}function kc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jf()){case Ms:return 1;case pc:return 4;case Ul:case ep:return 16;case mc:return 536870912;default:return 16}default:return 16}}var Ht=null,bs=null,bl=null;function Rc(){if(bl)return bl;var e,t=bs,n=t.length,r,l="value"in Ht?Ht.value:Ht.textContent,i=l.length;for(e=0;e<n&&t[e]===l[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===l[i-r];r++);return bl=l.slice(e,1<r?1-r:void 0)}function El(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ul(){return!0}function bo(){return!1}function Ke(e){function t(n,r,l,i,a){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ul:bo,this.isPropagationStopped=bo,this}return ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ul)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ul)},persist:function(){},isPersistent:ul}),t}var rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Es=Ke(rr),Jr=ue({},rr,{view:0,detail:0}),pp=Ke(Jr),Hi,Gi,ur,wi=ue({},Jr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ts,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ur&&(ur&&e.type==="mousemove"?(Hi=e.screenX-ur.screenX,Gi=e.screenY-ur.screenY):Gi=Hi=0,ur=e),Hi)},movementY:function(e){return"movementY"in e?e.movementY:Gi}}),Eo=Ke(wi),mp=ue({},wi,{dataTransfer:0}),hp=Ke(mp),gp=ue({},Jr,{relatedTarget:0}),Vi=Ke(gp),vp=ue({},rr,{animationName:0,elapsedTime:0,pseudoElement:0}),yp=Ke(vp),xp=ue({},rr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wp=Ke(xp),Sp=ue({},rr,{data:0}),To=Ke(Sp),kp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mp[e])?!!t[e]:!1}function Ts(){return Cp}var Np=ue({},Jr,{key:function(e){if(e.key){var t=kp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=El(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Rp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ts,charCode:function(e){return e.type==="keypress"?El(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?El(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jp=Ke(Np),bp=ue({},wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lo=Ke(bp),Ep=ue({},Jr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ts}),Tp=Ke(Ep),Lp=ue({},rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fp=Ke(Lp),Pp=ue({},wi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dp=Ke(Pp),$p=[9,13,27,32],Ls=Lt&&"CompositionEvent"in window,Rr=null;Lt&&"documentMode"in document&&(Rr=document.documentMode);var Ip=Lt&&"TextEvent"in window&&!Rr,Mc=Lt&&(!Ls||Rr&&8<Rr&&11>=Rr),Fo=" ",Po=!1;function Cc(e,t){switch(e){case"keyup":return $p.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tn=!1;function _p(e,t){switch(e){case"compositionend":return Nc(t);case"keypress":return t.which!==32?null:(Po=!0,Fo);case"textInput":return e=t.data,e===Fo&&Po?null:e;default:return null}}function Op(e,t){if(Tn)return e==="compositionend"||!Ls&&Cc(e,t)?(e=Rc(),bl=bs=Ht=null,Tn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mc&&t.locale!=="ko"?null:t.data;default:return null}}var Ap={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Do(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ap[e.type]:t==="textarea"}function jc(e,t,n,r){lc(r),t=ql(t,"onChange"),0<t.length&&(n=new Es("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mr=null,_r=null;function zp(e){Oc(e,0)}function Si(e){var t=Pn(e);if(Xu(t))return e}function Bp(e,t){if(e==="change")return t}var bc=!1;if(Lt){var qi;if(Lt){var Qi="oninput"in document;if(!Qi){var $o=document.createElement("div");$o.setAttribute("oninput","return;"),Qi=typeof $o.oninput=="function"}qi=Qi}else qi=!1;bc=qi&&(!document.documentMode||9<document.documentMode)}function Io(){Mr&&(Mr.detachEvent("onpropertychange",Ec),_r=Mr=null)}function Ec(e){if(e.propertyName==="value"&&Si(_r)){var t=[];jc(t,_r,e,Rs(e)),oc(zp,t)}}function Wp(e,t,n){e==="focusin"?(Io(),Mr=t,_r=n,Mr.attachEvent("onpropertychange",Ec)):e==="focusout"&&Io()}function Up(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Si(_r)}function Hp(e,t){if(e==="click")return Si(t)}function Gp(e,t){if(e==="input"||e==="change")return Si(t)}function Vp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ft=typeof Object.is=="function"?Object.is:Vp;function Or(e,t){if(ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!va.call(t,l)||!ft(e[l],t[l]))return!1}return!0}function _o(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Oo(e,t){var n=_o(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_o(n)}}function Tc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Tc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Lc(){for(var e=window,t=zl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=zl(e.document)}return t}function Fs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qp(e){var t=Lc(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Tc(n.ownerDocument.documentElement,n)){if(r!==null&&Fs(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,i=Math.min(r.start,l);r=r.end===void 0?i:Math.min(r.end,l),!e.extend&&i>r&&(l=r,r=i,i=l),l=Oo(n,i);var a=Oo(n,r);l&&a&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qp=Lt&&"documentMode"in document&&11>=document.documentMode,Ln=null,Ia=null,Cr=null,_a=!1;function Ao(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_a||Ln==null||Ln!==zl(r)||(r=Ln,"selectionStart"in r&&Fs(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Cr&&Or(Cr,r)||(Cr=r,r=ql(Ia,"onSelect"),0<r.length&&(t=new Es("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ln)))}function cl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Fn={animationend:cl("Animation","AnimationEnd"),animationiteration:cl("Animation","AnimationIteration"),animationstart:cl("Animation","AnimationStart"),transitionend:cl("Transition","TransitionEnd")},Yi={},Fc={};Lt&&(Fc=document.createElement("div").style,"AnimationEvent"in window||(delete Fn.animationend.animation,delete Fn.animationiteration.animation,delete Fn.animationstart.animation),"TransitionEvent"in window||delete Fn.transitionend.transition);function ki(e){if(Yi[e])return Yi[e];if(!Fn[e])return e;var t=Fn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Fc)return Yi[e]=t[n];return e}var Pc=ki("animationend"),Dc=ki("animationiteration"),$c=ki("animationstart"),Ic=ki("transitionend"),_c=new Map,zo="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rn(e,t){_c.set(e,t),Sn(t,[e])}for(var Ki=0;Ki<zo.length;Ki++){var Xi=zo[Ki],Yp=Xi.toLowerCase(),Kp=Xi[0].toUpperCase()+Xi.slice(1);rn(Yp,"on"+Kp)}rn(Pc,"onAnimationEnd");rn(Dc,"onAnimationIteration");rn($c,"onAnimationStart");rn("dblclick","onDoubleClick");rn("focusin","onFocus");rn("focusout","onBlur");rn(Ic,"onTransitionEnd");Qn("onMouseEnter",["mouseout","mouseover"]);Qn("onMouseLeave",["mouseout","mouseover"]);Qn("onPointerEnter",["pointerout","pointerover"]);Qn("onPointerLeave",["pointerout","pointerover"]);Sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xp=new Set("cancel close invalid load scroll toggle".split(" ").concat(wr));function Bo(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Yf(r,t,void 0,e),e.currentTarget=null}function Oc(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],o=s.instance,c=s.currentTarget;if(s=s.listener,o!==i&&l.isPropagationStopped())break e;Bo(l,s,c),i=o}else for(a=0;a<r.length;a++){if(s=r[a],o=s.instance,c=s.currentTarget,s=s.listener,o!==i&&l.isPropagationStopped())break e;Bo(l,s,c),i=o}}}if(Wl)throw e=Fa,Wl=!1,Fa=null,e}function te(e,t){var n=t[Wa];n===void 0&&(n=t[Wa]=new Set);var r=e+"__bubble";n.has(r)||(Ac(t,e,2,!1),n.add(r))}function Zi(e,t,n){var r=0;t&&(r|=4),Ac(n,e,r,t)}var dl="_reactListening"+Math.random().toString(36).slice(2);function Ar(e){if(!e[dl]){e[dl]=!0,Vu.forEach(function(n){n!=="selectionchange"&&(Xp.has(n)||Zi(n,!1,e),Zi(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[dl]||(t[dl]=!0,Zi("selectionchange",!1,t))}}function Ac(e,t,n,r){switch(kc(t)){case 1:var l=dp;break;case 4:l=fp;break;default:l=js}n=l.bind(null,t,n,e),l=void 0,!La||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Ji(e,t,n,r,l){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===l||s.nodeType===8&&s.parentNode===l)break;if(a===4)for(a=r.return;a!==null;){var o=a.tag;if((o===3||o===4)&&(o=a.stateNode.containerInfo,o===l||o.nodeType===8&&o.parentNode===l))return;a=a.return}for(;s!==null;){if(a=cn(s),a===null)return;if(o=a.tag,o===5||o===6){r=i=a;continue e}s=s.parentNode}}r=r.return}oc(function(){var c=i,f=Rs(n),p=[];e:{var d=_c.get(e);if(d!==void 0){var g=Es,x=e;switch(e){case"keypress":if(El(n)===0)break e;case"keydown":case"keyup":g=jp;break;case"focusin":x="focus",g=Vi;break;case"focusout":x="blur",g=Vi;break;case"beforeblur":case"afterblur":g=Vi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=hp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Tp;break;case Pc:case Dc:case $c:g=yp;break;case Ic:g=Fp;break;case"scroll":g=pp;break;case"wheel":g=Dp;break;case"copy":case"cut":case"paste":g=wp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Lo}var y=(t&4)!==0,R=!y&&e==="scroll",v=y?d!==null?d+"Capture":null:d;y=[];for(var m=c,h;m!==null;){h=m;var S=h.stateNode;if(h.tag===5&&S!==null&&(h=S,v!==null&&(S=Pr(m,v),S!=null&&y.push(zr(m,S,h)))),R)break;m=m.return}0<y.length&&(d=new g(d,x,null,n,f),p.push({event:d,listeners:y}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",d&&n!==Ea&&(x=n.relatedTarget||n.fromElement)&&(cn(x)||x[Ft]))break e;if((g||d)&&(d=f.window===f?f:(d=f.ownerDocument)?d.defaultView||d.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=c,x=x?cn(x):null,x!==null&&(R=kn(x),x!==R||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=c),g!==x)){if(y=Eo,S="onMouseLeave",v="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(y=Lo,S="onPointerLeave",v="onPointerEnter",m="pointer"),R=g==null?d:Pn(g),h=x==null?d:Pn(x),d=new y(S,m+"leave",g,n,f),d.target=R,d.relatedTarget=h,S=null,cn(f)===c&&(y=new y(v,m+"enter",x,n,f),y.target=h,y.relatedTarget=R,S=y),R=S,g&&x)t:{for(y=g,v=x,m=0,h=y;h;h=Rn(h))m++;for(h=0,S=v;S;S=Rn(S))h++;for(;0<m-h;)y=Rn(y),m--;for(;0<h-m;)v=Rn(v),h--;for(;m--;){if(y===v||v!==null&&y===v.alternate)break t;y=Rn(y),v=Rn(v)}y=null}else y=null;g!==null&&Wo(p,d,g,y,!1),x!==null&&R!==null&&Wo(p,R,x,y,!0)}}e:{if(d=c?Pn(c):window,g=d.nodeName&&d.nodeName.toLowerCase(),g==="select"||g==="input"&&d.type==="file")var N=Bp;else if(Do(d))if(bc)N=Gp;else{N=Up;var k=Wp}else(g=d.nodeName)&&g.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(N=Hp);if(N&&(N=N(e,c))){jc(p,N,n,f);break e}k&&k(e,d,c),e==="focusout"&&(k=d._wrapperState)&&k.controlled&&d.type==="number"&&Ma(d,"number",d.value)}switch(k=c?Pn(c):window,e){case"focusin":(Do(k)||k.contentEditable==="true")&&(Ln=k,Ia=c,Cr=null);break;case"focusout":Cr=Ia=Ln=null;break;case"mousedown":_a=!0;break;case"contextmenu":case"mouseup":case"dragend":_a=!1,Ao(p,n,f);break;case"selectionchange":if(Qp)break;case"keydown":case"keyup":Ao(p,n,f)}var C;if(Ls)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Tn?Cc(e,n)&&(w="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(Mc&&n.locale!=="ko"&&(Tn||w!=="onCompositionStart"?w==="onCompositionEnd"&&Tn&&(C=Rc()):(Ht=f,bs="value"in Ht?Ht.value:Ht.textContent,Tn=!0)),k=ql(c,w),0<k.length&&(w=new To(w,e,null,n,f),p.push({event:w,listeners:k}),C?w.data=C:(C=Nc(n),C!==null&&(w.data=C)))),(C=Ip?_p(e,n):Op(e,n))&&(c=ql(c,"onBeforeInput"),0<c.length&&(f=new To("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:c}),f.data=C))}Oc(p,t)})}function zr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ql(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,i=l.stateNode;l.tag===5&&i!==null&&(l=i,i=Pr(e,n),i!=null&&r.unshift(zr(e,i,l)),i=Pr(e,t),i!=null&&r.push(zr(e,i,l))),e=e.return}return r}function Rn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Wo(e,t,n,r,l){for(var i=t._reactName,a=[];n!==null&&n!==r;){var s=n,o=s.alternate,c=s.stateNode;if(o!==null&&o===r)break;s.tag===5&&c!==null&&(s=c,l?(o=Pr(n,i),o!=null&&a.unshift(zr(n,o,s))):l||(o=Pr(n,i),o!=null&&a.push(zr(n,o,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Zp=/\r\n?/g,Jp=/\u0000|\uFFFD/g;function Uo(e){return(typeof e=="string"?e:""+e).replace(Zp,`
`).replace(Jp,"")}function fl(e,t,n){if(t=Uo(t),Uo(e)!==t&&n)throw Error(b(425))}function Ql(){}var Oa=null,Aa=null;function za(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ba=typeof setTimeout=="function"?setTimeout:void 0,em=typeof clearTimeout=="function"?clearTimeout:void 0,Ho=typeof Promise=="function"?Promise:void 0,tm=typeof queueMicrotask=="function"?queueMicrotask:typeof Ho<"u"?function(e){return Ho.resolve(null).then(e).catch(nm)}:Ba;function nm(e){setTimeout(function(){throw e})}function ea(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),Ir(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);Ir(t)}function Yt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Go(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var lr=Math.random().toString(36).slice(2),xt="__reactFiber$"+lr,Br="__reactProps$"+lr,Ft="__reactContainer$"+lr,Wa="__reactEvents$"+lr,rm="__reactListeners$"+lr,lm="__reactHandles$"+lr;function cn(e){var t=e[xt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ft]||n[xt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Go(e);e!==null;){if(n=e[xt])return n;e=Go(e)}return t}e=n,n=e.parentNode}return null}function el(e){return e=e[xt]||e[Ft],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(b(33))}function Ri(e){return e[Br]||null}var Ua=[],Dn=-1;function ln(e){return{current:e}}function ne(e){0>Dn||(e.current=Ua[Dn],Ua[Dn]=null,Dn--)}function ee(e,t){Dn++,Ua[Dn]=e.current,e.current=t}var nn={},Ee=ln(nn),We=ln(!1),gn=nn;function Yn(e,t){var n=e.type.contextTypes;if(!n)return nn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},i;for(i in n)l[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function Ue(e){return e=e.childContextTypes,e!=null}function Yl(){ne(We),ne(Ee)}function Vo(e,t,n){if(Ee.current!==nn)throw Error(b(168));ee(Ee,t),ee(We,n)}function zc(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(b(108,Wf(e)||"Unknown",l));return ue({},n,r)}function Kl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nn,gn=Ee.current,ee(Ee,e),ee(We,We.current),!0}function qo(e,t,n){var r=e.stateNode;if(!r)throw Error(b(169));n?(e=zc(e,t,gn),r.__reactInternalMemoizedMergedChildContext=e,ne(We),ne(Ee),ee(Ee,e)):ne(We),ee(We,n)}var Ct=null,Mi=!1,ta=!1;function Bc(e){Ct===null?Ct=[e]:Ct.push(e)}function im(e){Mi=!0,Bc(e)}function an(){if(!ta&&Ct!==null){ta=!0;var e=0,t=V;try{var n=Ct;for(V=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ct=null,Mi=!1}catch(l){throw Ct!==null&&(Ct=Ct.slice(e+1)),fc(Ms,an),l}finally{V=t,ta=!1}}return null}var $n=[],In=0,Xl=null,Zl=0,Ze=[],Je=0,vn=null,bt=1,Et="";function on(e,t){$n[In++]=Zl,$n[In++]=Xl,Xl=e,Zl=t}function Wc(e,t,n){Ze[Je++]=bt,Ze[Je++]=Et,Ze[Je++]=vn,vn=e;var r=bt;e=Et;var l=32-ct(r)-1;r&=~(1<<l),n+=1;var i=32-ct(t)+l;if(30<i){var a=l-l%5;i=(r&(1<<a)-1).toString(32),r>>=a,l-=a,bt=1<<32-ct(t)+l|n<<l|r,Et=i+e}else bt=1<<i|n<<l|r,Et=e}function Ps(e){e.return!==null&&(on(e,1),Wc(e,1,0))}function Ds(e){for(;e===Xl;)Xl=$n[--In],$n[In]=null,Zl=$n[--In],$n[In]=null;for(;e===vn;)vn=Ze[--Je],Ze[Je]=null,Et=Ze[--Je],Ze[Je]=null,bt=Ze[--Je],Ze[Je]=null}var qe=null,Ve=null,ae=!1,ut=null;function Uc(e,t){var n=tt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Qo(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qe=e,Ve=Yt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qe=e,Ve=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=vn!==null?{id:bt,overflow:Et}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=tt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,qe=e,Ve=null,!0):!1;default:return!1}}function Ha(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ga(e){if(ae){var t=Ve;if(t){var n=t;if(!Qo(e,t)){if(Ha(e))throw Error(b(418));t=Yt(n.nextSibling);var r=qe;t&&Qo(e,t)?Uc(r,n):(e.flags=e.flags&-4097|2,ae=!1,qe=e)}}else{if(Ha(e))throw Error(b(418));e.flags=e.flags&-4097|2,ae=!1,qe=e}}}function Yo(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qe=e}function pl(e){if(e!==qe)return!1;if(!ae)return Yo(e),ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!za(e.type,e.memoizedProps)),t&&(t=Ve)){if(Ha(e))throw Hc(),Error(b(418));for(;t;)Uc(e,t),t=Yt(t.nextSibling)}if(Yo(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ve=Yt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ve=null}}else Ve=qe?Yt(e.stateNode.nextSibling):null;return!0}function Hc(){for(var e=Ve;e;)e=Yt(e.nextSibling)}function Kn(){Ve=qe=null,ae=!1}function $s(e){ut===null?ut=[e]:ut.push(e)}var am=$t.ReactCurrentBatchConfig;function cr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(b(309));var r=n.stateNode}if(!r)throw Error(b(147,e));var l=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var s=l.refs;a===null?delete s[i]:s[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(b(284));if(!n._owner)throw Error(b(290,e))}return e}function ml(e,t){throw e=Object.prototype.toString.call(t),Error(b(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ko(e){var t=e._init;return t(e._payload)}function Gc(e){function t(v,m){if(e){var h=v.deletions;h===null?(v.deletions=[m],v.flags|=16):h.push(m)}}function n(v,m){if(!e)return null;for(;m!==null;)t(v,m),m=m.sibling;return null}function r(v,m){for(v=new Map;m!==null;)m.key!==null?v.set(m.key,m):v.set(m.index,m),m=m.sibling;return v}function l(v,m){return v=Jt(v,m),v.index=0,v.sibling=null,v}function i(v,m,h){return v.index=h,e?(h=v.alternate,h!==null?(h=h.index,h<m?(v.flags|=2,m):h):(v.flags|=2,m)):(v.flags|=1048576,m)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function s(v,m,h,S){return m===null||m.tag!==6?(m=oa(h,v.mode,S),m.return=v,m):(m=l(m,h),m.return=v,m)}function o(v,m,h,S){var N=h.type;return N===En?f(v,m,h.props.children,S,h.key):m!==null&&(m.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===zt&&Ko(N)===m.type)?(S=l(m,h.props),S.ref=cr(v,m,h),S.return=v,S):(S=Il(h.type,h.key,h.props,null,v.mode,S),S.ref=cr(v,m,h),S.return=v,S)}function c(v,m,h,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==h.containerInfo||m.stateNode.implementation!==h.implementation?(m=ua(h,v.mode,S),m.return=v,m):(m=l(m,h.children||[]),m.return=v,m)}function f(v,m,h,S,N){return m===null||m.tag!==7?(m=mn(h,v.mode,S,N),m.return=v,m):(m=l(m,h),m.return=v,m)}function p(v,m,h){if(typeof m=="string"&&m!==""||typeof m=="number")return m=oa(""+m,v.mode,h),m.return=v,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case rl:return h=Il(m.type,m.key,m.props,null,v.mode,h),h.ref=cr(v,null,m),h.return=v,h;case bn:return m=ua(m,v.mode,h),m.return=v,m;case zt:var S=m._init;return p(v,S(m._payload),h)}if(yr(m)||ir(m))return m=mn(m,v.mode,h,null),m.return=v,m;ml(v,m)}return null}function d(v,m,h,S){var N=m!==null?m.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return N!==null?null:s(v,m,""+h,S);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case rl:return h.key===N?o(v,m,h,S):null;case bn:return h.key===N?c(v,m,h,S):null;case zt:return N=h._init,d(v,m,N(h._payload),S)}if(yr(h)||ir(h))return N!==null?null:f(v,m,h,S,null);ml(v,h)}return null}function g(v,m,h,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(h)||null,s(m,v,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case rl:return v=v.get(S.key===null?h:S.key)||null,o(m,v,S,N);case bn:return v=v.get(S.key===null?h:S.key)||null,c(m,v,S,N);case zt:var k=S._init;return g(v,m,h,k(S._payload),N)}if(yr(S)||ir(S))return v=v.get(h)||null,f(m,v,S,N,null);ml(m,S)}return null}function x(v,m,h,S){for(var N=null,k=null,C=m,w=m=0,L=null;C!==null&&w<h.length;w++){C.index>w?(L=C,C=null):L=C.sibling;var T=d(v,C,h[w],S);if(T===null){C===null&&(C=L);break}e&&C&&T.alternate===null&&t(v,C),m=i(T,m,w),k===null?N=T:k.sibling=T,k=T,C=L}if(w===h.length)return n(v,C),ae&&on(v,w),N;if(C===null){for(;w<h.length;w++)C=p(v,h[w],S),C!==null&&(m=i(C,m,w),k===null?N=C:k.sibling=C,k=C);return ae&&on(v,w),N}for(C=r(v,C);w<h.length;w++)L=g(C,v,w,h[w],S),L!==null&&(e&&L.alternate!==null&&C.delete(L.key===null?w:L.key),m=i(L,m,w),k===null?N=L:k.sibling=L,k=L);return e&&C.forEach(function(I){return t(v,I)}),ae&&on(v,w),N}function y(v,m,h,S){var N=ir(h);if(typeof N!="function")throw Error(b(150));if(h=N.call(h),h==null)throw Error(b(151));for(var k=N=null,C=m,w=m=0,L=null,T=h.next();C!==null&&!T.done;w++,T=h.next()){C.index>w?(L=C,C=null):L=C.sibling;var I=d(v,C,T.value,S);if(I===null){C===null&&(C=L);break}e&&C&&I.alternate===null&&t(v,C),m=i(I,m,w),k===null?N=I:k.sibling=I,k=I,C=L}if(T.done)return n(v,C),ae&&on(v,w),N;if(C===null){for(;!T.done;w++,T=h.next())T=p(v,T.value,S),T!==null&&(m=i(T,m,w),k===null?N=T:k.sibling=T,k=T);return ae&&on(v,w),N}for(C=r(v,C);!T.done;w++,T=h.next())T=g(C,v,w,T.value,S),T!==null&&(e&&T.alternate!==null&&C.delete(T.key===null?w:T.key),m=i(T,m,w),k===null?N=T:k.sibling=T,k=T);return e&&C.forEach(function(q){return t(v,q)}),ae&&on(v,w),N}function R(v,m,h,S){if(typeof h=="object"&&h!==null&&h.type===En&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case rl:e:{for(var N=h.key,k=m;k!==null;){if(k.key===N){if(N=h.type,N===En){if(k.tag===7){n(v,k.sibling),m=l(k,h.props.children),m.return=v,v=m;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===zt&&Ko(N)===k.type){n(v,k.sibling),m=l(k,h.props),m.ref=cr(v,k,h),m.return=v,v=m;break e}n(v,k);break}else t(v,k);k=k.sibling}h.type===En?(m=mn(h.props.children,v.mode,S,h.key),m.return=v,v=m):(S=Il(h.type,h.key,h.props,null,v.mode,S),S.ref=cr(v,m,h),S.return=v,v=S)}return a(v);case bn:e:{for(k=h.key;m!==null;){if(m.key===k)if(m.tag===4&&m.stateNode.containerInfo===h.containerInfo&&m.stateNode.implementation===h.implementation){n(v,m.sibling),m=l(m,h.children||[]),m.return=v,v=m;break e}else{n(v,m);break}else t(v,m);m=m.sibling}m=ua(h,v.mode,S),m.return=v,v=m}return a(v);case zt:return k=h._init,R(v,m,k(h._payload),S)}if(yr(h))return x(v,m,h,S);if(ir(h))return y(v,m,h,S);ml(v,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,m!==null&&m.tag===6?(n(v,m.sibling),m=l(m,h),m.return=v,v=m):(n(v,m),m=oa(h,v.mode,S),m.return=v,v=m),a(v)):n(v,m)}return R}var Xn=Gc(!0),Vc=Gc(!1),Jl=ln(null),ei=null,_n=null,Is=null;function _s(){Is=_n=ei=null}function Os(e){var t=Jl.current;ne(Jl),e._currentValue=t}function Va(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Gn(e,t){ei=e,Is=_n=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Be=!0),e.firstContext=null)}function rt(e){var t=e._currentValue;if(Is!==e)if(e={context:e,memoizedValue:t,next:null},_n===null){if(ei===null)throw Error(b(308));_n=e,ei.dependencies={lanes:0,firstContext:e}}else _n=_n.next=e;return t}var dn=null;function As(e){dn===null?dn=[e]:dn.push(e)}function qc(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,As(t)):(n.next=l.next,l.next=n),t.interleaved=n,Pt(e,r)}function Pt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Bt=!1;function zs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Tt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kt(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,H&2){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,Pt(e,n)}return l=r.interleaved,l===null?(t.next=t,As(r)):(t.next=l.next,l.next=t),r.interleaved=t,Pt(e,n)}function Tl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cs(e,n)}}function Xo(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?l=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?l=i=t:i=i.next=t}else l=i=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ti(e,t,n,r){var l=e.updateQueue;Bt=!1;var i=l.firstBaseUpdate,a=l.lastBaseUpdate,s=l.shared.pending;if(s!==null){l.shared.pending=null;var o=s,c=o.next;o.next=null,a===null?i=c:a.next=c,a=o;var f=e.alternate;f!==null&&(f=f.updateQueue,s=f.lastBaseUpdate,s!==a&&(s===null?f.firstBaseUpdate=c:s.next=c,f.lastBaseUpdate=o))}if(i!==null){var p=l.baseState;a=0,f=c=o=null,s=i;do{var d=s.lane,g=s.eventTime;if((r&d)===d){f!==null&&(f=f.next={eventTime:g,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var x=e,y=s;switch(d=t,g=n,y.tag){case 1:if(x=y.payload,typeof x=="function"){p=x.call(g,p,d);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,d=typeof x=="function"?x.call(g,p,d):x,d==null)break e;p=ue({},p,d);break e;case 2:Bt=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,d=l.effects,d===null?l.effects=[s]:d.push(s))}else g={eventTime:g,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},f===null?(c=f=g,o=p):f=f.next=g,a|=d;if(s=s.next,s===null){if(s=l.shared.pending,s===null)break;d=s,s=d.next,d.next=null,l.lastBaseUpdate=d,l.shared.pending=null}}while(!0);if(f===null&&(o=p),l.baseState=o,l.firstBaseUpdate=c,l.lastBaseUpdate=f,t=l.shared.interleaved,t!==null){l=t;do a|=l.lane,l=l.next;while(l!==t)}else i===null&&(l.shared.lanes=0);xn|=a,e.lanes=a,e.memoizedState=p}}function Zo(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(b(191,l));l.call(r)}}}var tl={},St=ln(tl),Wr=ln(tl),Ur=ln(tl);function fn(e){if(e===tl)throw Error(b(174));return e}function Bs(e,t){switch(ee(Ur,t),ee(Wr,e),ee(St,tl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Na(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Na(t,e)}ne(St),ee(St,t)}function Zn(){ne(St),ne(Wr),ne(Ur)}function Yc(e){fn(Ur.current);var t=fn(St.current),n=Na(t,e.type);t!==n&&(ee(Wr,e),ee(St,n))}function Ws(e){Wr.current===e&&(ne(St),ne(Wr))}var se=ln(0);function ni(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function Us(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var Ll=$t.ReactCurrentDispatcher,ra=$t.ReactCurrentBatchConfig,yn=0,oe=null,he=null,ye=null,ri=!1,Nr=!1,Hr=0,sm=0;function Ne(){throw Error(b(321))}function Hs(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ft(e[n],t[n]))return!1;return!0}function Gs(e,t,n,r,l,i){if(yn=i,oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ll.current=e===null||e.memoizedState===null?dm:fm,e=n(r,l),Nr){i=0;do{if(Nr=!1,Hr=0,25<=i)throw Error(b(301));i+=1,ye=he=null,t.updateQueue=null,Ll.current=pm,e=n(r,l)}while(Nr)}if(Ll.current=li,t=he!==null&&he.next!==null,yn=0,ye=he=oe=null,ri=!1,t)throw Error(b(300));return e}function Vs(){var e=Hr!==0;return Hr=0,e}function vt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?oe.memoizedState=ye=e:ye=ye.next=e,ye}function lt(){if(he===null){var e=oe.alternate;e=e!==null?e.memoizedState:null}else e=he.next;var t=ye===null?oe.memoizedState:ye.next;if(t!==null)ye=t,he=e;else{if(e===null)throw Error(b(310));he=e,e={memoizedState:he.memoizedState,baseState:he.baseState,baseQueue:he.baseQueue,queue:he.queue,next:null},ye===null?oe.memoizedState=ye=e:ye=ye.next=e}return ye}function Gr(e,t){return typeof t=="function"?t(e):t}function la(e){var t=lt(),n=t.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=e;var r=he,l=r.baseQueue,i=n.pending;if(i!==null){if(l!==null){var a=l.next;l.next=i.next,i.next=a}r.baseQueue=l=i,n.pending=null}if(l!==null){i=l.next,r=r.baseState;var s=a=null,o=null,c=i;do{var f=c.lane;if((yn&f)===f)o!==null&&(o=o.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var p={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};o===null?(s=o=p,a=r):o=o.next=p,oe.lanes|=f,xn|=f}c=c.next}while(c!==null&&c!==i);o===null?a=r:o.next=s,ft(r,t.memoizedState)||(Be=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=o,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do i=l.lane,oe.lanes|=i,xn|=i,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ia(e){var t=lt(),n=t.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,i=t.memoizedState;if(l!==null){n.pending=null;var a=l=l.next;do i=e(i,a.action),a=a.next;while(a!==l);ft(i,t.memoizedState)||(Be=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Kc(){}function Xc(e,t){var n=oe,r=lt(),l=t(),i=!ft(r.memoizedState,l);if(i&&(r.memoizedState=l,Be=!0),r=r.queue,qs(ed.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||ye!==null&&ye.memoizedState.tag&1){if(n.flags|=2048,Vr(9,Jc.bind(null,n,r,l,t),void 0,null),xe===null)throw Error(b(349));yn&30||Zc(n,t,l)}return l}function Zc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Jc(e,t,n,r){t.value=n,t.getSnapshot=r,td(t)&&nd(e)}function ed(e,t,n){return n(function(){td(t)&&nd(e)})}function td(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ft(e,n)}catch{return!0}}function nd(e){var t=Pt(e,1);t!==null&&dt(t,e,1,-1)}function Jo(e){var t=vt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:e},t.queue=e,e=e.dispatch=cm.bind(null,oe,e),[t.memoizedState,e]}function Vr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function rd(){return lt().memoizedState}function Fl(e,t,n,r){var l=vt();oe.flags|=e,l.memoizedState=Vr(1|t,n,void 0,r===void 0?null:r)}function Ci(e,t,n,r){var l=lt();r=r===void 0?null:r;var i=void 0;if(he!==null){var a=he.memoizedState;if(i=a.destroy,r!==null&&Hs(r,a.deps)){l.memoizedState=Vr(t,n,i,r);return}}oe.flags|=e,l.memoizedState=Vr(1|t,n,i,r)}function eu(e,t){return Fl(8390656,8,e,t)}function qs(e,t){return Ci(2048,8,e,t)}function ld(e,t){return Ci(4,2,e,t)}function id(e,t){return Ci(4,4,e,t)}function ad(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sd(e,t,n){return n=n!=null?n.concat([e]):null,Ci(4,4,ad.bind(null,t,e),n)}function Qs(){}function od(e,t){var n=lt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Hs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ud(e,t){var n=lt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Hs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function cd(e,t,n){return yn&21?(ft(n,t)||(n=hc(),oe.lanes|=n,xn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Be=!0),e.memoizedState=n)}function om(e,t){var n=V;V=n!==0&&4>n?n:4,e(!0);var r=ra.transition;ra.transition={};try{e(!1),t()}finally{V=n,ra.transition=r}}function dd(){return lt().memoizedState}function um(e,t,n){var r=Zt(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},fd(e))pd(t,n);else if(n=qc(e,t,n,r),n!==null){var l=Ie();dt(n,e,r,l),md(n,t,r)}}function cm(e,t,n){var r=Zt(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(fd(e))pd(t,l);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,s=i(a,n);if(l.hasEagerState=!0,l.eagerState=s,ft(s,a)){var o=t.interleaved;o===null?(l.next=l,As(t)):(l.next=o.next,o.next=l),t.interleaved=l;return}}catch{}finally{}n=qc(e,t,l,r),n!==null&&(l=Ie(),dt(n,e,r,l),md(n,t,r))}}function fd(e){var t=e.alternate;return e===oe||t!==null&&t===oe}function pd(e,t){Nr=ri=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function md(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cs(e,n)}}var li={readContext:rt,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useInsertionEffect:Ne,useLayoutEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useMutableSource:Ne,useSyncExternalStore:Ne,useId:Ne,unstable_isNewReconciler:!1},dm={readContext:rt,useCallback:function(e,t){return vt().memoizedState=[e,t===void 0?null:t],e},useContext:rt,useEffect:eu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Fl(4194308,4,ad.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fl(4,2,e,t)},useMemo:function(e,t){var n=vt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=um.bind(null,oe,e),[r.memoizedState,e]},useRef:function(e){var t=vt();return e={current:e},t.memoizedState=e},useState:Jo,useDebugValue:Qs,useDeferredValue:function(e){return vt().memoizedState=e},useTransition:function(){var e=Jo(!1),t=e[0];return e=om.bind(null,e[1]),vt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oe,l=vt();if(ae){if(n===void 0)throw Error(b(407));n=n()}else{if(n=t(),xe===null)throw Error(b(349));yn&30||Zc(r,t,n)}l.memoizedState=n;var i={value:n,getSnapshot:t};return l.queue=i,eu(ed.bind(null,r,i,e),[e]),r.flags|=2048,Vr(9,Jc.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=vt(),t=xe.identifierPrefix;if(ae){var n=Et,r=bt;n=(r&~(1<<32-ct(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Hr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=sm++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fm={readContext:rt,useCallback:od,useContext:rt,useEffect:qs,useImperativeHandle:sd,useInsertionEffect:ld,useLayoutEffect:id,useMemo:ud,useReducer:la,useRef:rd,useState:function(){return la(Gr)},useDebugValue:Qs,useDeferredValue:function(e){var t=lt();return cd(t,he.memoizedState,e)},useTransition:function(){var e=la(Gr)[0],t=lt().memoizedState;return[e,t]},useMutableSource:Kc,useSyncExternalStore:Xc,useId:dd,unstable_isNewReconciler:!1},pm={readContext:rt,useCallback:od,useContext:rt,useEffect:qs,useImperativeHandle:sd,useInsertionEffect:ld,useLayoutEffect:id,useMemo:ud,useReducer:ia,useRef:rd,useState:function(){return ia(Gr)},useDebugValue:Qs,useDeferredValue:function(e){var t=lt();return he===null?t.memoizedState=e:cd(t,he.memoizedState,e)},useTransition:function(){var e=ia(Gr)[0],t=lt().memoizedState;return[e,t]},useMutableSource:Kc,useSyncExternalStore:Xc,useId:dd,unstable_isNewReconciler:!1};function st(e,t){if(e&&e.defaultProps){t=ue({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function qa(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ue({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ni={isMounted:function(e){return(e=e._reactInternals)?kn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ie(),l=Zt(e),i=Tt(r,l);i.payload=t,n!=null&&(i.callback=n),t=Kt(e,i,l),t!==null&&(dt(t,e,l,r),Tl(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ie(),l=Zt(e),i=Tt(r,l);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Kt(e,i,l),t!==null&&(dt(t,e,l,r),Tl(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ie(),r=Zt(e),l=Tt(n,r);l.tag=2,t!=null&&(l.callback=t),t=Kt(e,l,r),t!==null&&(dt(t,e,r,n),Tl(t,e,r))}};function tu(e,t,n,r,l,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Or(n,r)||!Or(l,i):!0}function hd(e,t,n){var r=!1,l=nn,i=t.contextType;return typeof i=="object"&&i!==null?i=rt(i):(l=Ue(t)?gn:Ee.current,r=t.contextTypes,i=(r=r!=null)?Yn(e,l):nn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ni,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=i),t}function nu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ni.enqueueReplaceState(t,t.state,null)}function Qa(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},zs(e);var i=t.contextType;typeof i=="object"&&i!==null?l.context=rt(i):(i=Ue(t)?gn:Ee.current,l.context=Yn(e,i)),l.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(qa(e,t,i,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Ni.enqueueReplaceState(l,l.state,null),ti(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Jn(e,t){try{var n="",r=t;do n+=Bf(r),r=r.return;while(r);var l=n}catch(i){l=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:l,digest:null}}function aa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ya(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var mm=typeof WeakMap=="function"?WeakMap:Map;function gd(e,t,n){n=Tt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ai||(ai=!0,is=r),Ya(e,t)},n}function vd(e,t,n){n=Tt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){Ya(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ya(e,t),typeof r!="function"&&(Xt===null?Xt=new Set([this]):Xt.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function ru(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new mm;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=bm.bind(null,e,t,n),t.then(e,e))}function lu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function iu(e,t,n,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Tt(-1,1),t.tag=2,Kt(n,t,1))),n.lanes|=1),e)}var hm=$t.ReactCurrentOwner,Be=!1;function De(e,t,n,r){t.child=e===null?Vc(t,null,n,r):Xn(t,e.child,n,r)}function au(e,t,n,r,l){n=n.render;var i=t.ref;return Gn(t,l),r=Gs(e,t,n,r,i,l),n=Vs(),e!==null&&!Be?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Dt(e,t,l)):(ae&&n&&Ps(t),t.flags|=1,De(e,t,r,l),t.child)}function su(e,t,n,r,l){if(e===null){var i=n.type;return typeof i=="function"&&!no(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,yd(e,t,i,r,l)):(e=Il(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&l)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Or,n(a,r)&&e.ref===t.ref)return Dt(e,t,l)}return t.flags|=1,e=Jt(i,r),e.ref=t.ref,e.return=t,t.child=e}function yd(e,t,n,r,l){if(e!==null){var i=e.memoizedProps;if(Or(i,r)&&e.ref===t.ref)if(Be=!1,t.pendingProps=r=i,(e.lanes&l)!==0)e.flags&131072&&(Be=!0);else return t.lanes=e.lanes,Dt(e,t,l)}return Ka(e,t,n,r,l)}function xd(e,t,n){var r=t.pendingProps,l=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ee(An,Ge),Ge|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ee(An,Ge),Ge|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ee(An,Ge),Ge|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ee(An,Ge),Ge|=r;return De(e,t,l,n),t.child}function wd(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ka(e,t,n,r,l){var i=Ue(n)?gn:Ee.current;return i=Yn(t,i),Gn(t,l),n=Gs(e,t,n,r,i,l),r=Vs(),e!==null&&!Be?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Dt(e,t,l)):(ae&&r&&Ps(t),t.flags|=1,De(e,t,n,l),t.child)}function ou(e,t,n,r,l){if(Ue(n)){var i=!0;Kl(t)}else i=!1;if(Gn(t,l),t.stateNode===null)Pl(e,t),hd(t,n,r),Qa(t,n,r,l),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var o=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=rt(c):(c=Ue(n)?gn:Ee.current,c=Yn(t,c));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||o!==c)&&nu(t,a,r,c),Bt=!1;var d=t.memoizedState;a.state=d,ti(t,r,a,l),o=t.memoizedState,s!==r||d!==o||We.current||Bt?(typeof f=="function"&&(qa(t,n,f,r),o=t.memoizedState),(s=Bt||tu(t,n,s,r,d,o,c))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=o),a.props=r,a.state=o,a.context=c,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Qc(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:st(t.type,s),a.props=c,p=t.pendingProps,d=a.context,o=n.contextType,typeof o=="object"&&o!==null?o=rt(o):(o=Ue(n)?gn:Ee.current,o=Yn(t,o));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==p||d!==o)&&nu(t,a,r,o),Bt=!1,d=t.memoizedState,a.state=d,ti(t,r,a,l);var x=t.memoizedState;s!==p||d!==x||We.current||Bt?(typeof g=="function"&&(qa(t,n,g,r),x=t.memoizedState),(c=Bt||tu(t,n,c,r,d,x,o)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,x,o),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,x,o)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),a.props=r,a.state=x,a.context=o,r=c):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Xa(e,t,n,r,i,l)}function Xa(e,t,n,r,l,i){wd(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return l&&qo(t,n,!1),Dt(e,t,i);r=t.stateNode,hm.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Xn(t,e.child,null,i),t.child=Xn(t,null,s,i)):De(e,t,s,i),t.memoizedState=r.state,l&&qo(t,n,!0),t.child}function Sd(e){var t=e.stateNode;t.pendingContext?Vo(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vo(e,t.context,!1),Bs(e,t.containerInfo)}function uu(e,t,n,r,l){return Kn(),$s(l),t.flags|=256,De(e,t,n,r),t.child}var Za={dehydrated:null,treeContext:null,retryLane:0};function Ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function kd(e,t,n){var r=t.pendingProps,l=se.current,i=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(l&2)!==0),s?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),ee(se,l&1),e===null)return Ga(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Ei(a,r,0,null),e=mn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ja(n),t.memoizedState=Za,e):Ys(t,a));if(l=e.memoizedState,l!==null&&(s=l.dehydrated,s!==null))return gm(e,t,a,r,s,l,n);if(i){i=r.fallback,a=t.mode,l=e.child,s=l.sibling;var o={mode:"hidden",children:r.children};return!(a&1)&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=o,t.deletions=null):(r=Jt(l,o),r.subtreeFlags=l.subtreeFlags&14680064),s!==null?i=Jt(s,i):(i=mn(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Ja(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Za,r}return i=e.child,e=i.sibling,r=Jt(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ys(e,t){return t=Ei({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function hl(e,t,n,r){return r!==null&&$s(r),Xn(t,e.child,null,n),e=Ys(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function gm(e,t,n,r,l,i,a){if(n)return t.flags&256?(t.flags&=-257,r=aa(Error(b(422))),hl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,l=t.mode,r=Ei({mode:"visible",children:r.children},l,0,null),i=mn(i,l,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Xn(t,e.child,null,a),t.child.memoizedState=Ja(a),t.memoizedState=Za,i);if(!(t.mode&1))return hl(e,t,a,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var s=r.dgst;return r=s,i=Error(b(419)),r=aa(i,r,void 0),hl(e,t,a,r)}if(s=(a&e.childLanes)!==0,Be||s){if(r=xe,r!==null){switch(a&-a){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|a)?0:l,l!==0&&l!==i.retryLane&&(i.retryLane=l,Pt(e,l),dt(r,e,l,-1))}return to(),r=aa(Error(b(421))),hl(e,t,a,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=Em.bind(null,e),l._reactRetry=t,null):(e=i.treeContext,Ve=Yt(l.nextSibling),qe=t,ae=!0,ut=null,e!==null&&(Ze[Je++]=bt,Ze[Je++]=Et,Ze[Je++]=vn,bt=e.id,Et=e.overflow,vn=t),t=Ys(t,r.children),t.flags|=4096,t)}function cu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Va(e.return,t,n)}function sa(e,t,n,r,l){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=l)}function Rd(e,t,n){var r=t.pendingProps,l=r.revealOrder,i=r.tail;if(De(e,t,r.children,n),r=se.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cu(e,n,t);else if(e.tag===19)cu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ee(se,r),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&ni(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),sa(t,!1,l,n,i);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&ni(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}sa(t,!0,n,null,i);break;case"together":sa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Dt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),xn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(b(153));if(t.child!==null){for(e=t.child,n=Jt(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Jt(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function vm(e,t,n){switch(t.tag){case 3:Sd(t),Kn();break;case 5:Yc(t);break;case 1:Ue(t.type)&&Kl(t);break;case 4:Bs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;ee(Jl,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ee(se,se.current&1),t.flags|=128,null):n&t.child.childLanes?kd(e,t,n):(ee(se,se.current&1),e=Dt(e,t,n),e!==null?e.sibling:null);ee(se,se.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Rd(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),ee(se,se.current),r)break;return null;case 22:case 23:return t.lanes=0,xd(e,t,n)}return Dt(e,t,n)}var Md,es,Cd,Nd;Md=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};es=function(){};Cd=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,fn(St.current);var i=null;switch(n){case"input":l=ka(e,l),r=ka(e,r),i=[];break;case"select":l=ue({},l,{value:void 0}),r=ue({},r,{value:void 0}),i=[];break;case"textarea":l=Ca(e,l),r=Ca(e,r),i=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ql)}ja(n,r);var a;n=null;for(c in l)if(!r.hasOwnProperty(c)&&l.hasOwnProperty(c)&&l[c]!=null)if(c==="style"){var s=l[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Lr.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var o=r[c];if(s=l!=null?l[c]:void 0,r.hasOwnProperty(c)&&o!==s&&(o!=null||s!=null))if(c==="style")if(s){for(a in s)!s.hasOwnProperty(a)||o&&o.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in o)o.hasOwnProperty(a)&&s[a]!==o[a]&&(n||(n={}),n[a]=o[a])}else n||(i||(i=[]),i.push(c,n)),n=o;else c==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,s=s?s.__html:void 0,o!=null&&s!==o&&(i=i||[]).push(c,o)):c==="children"?typeof o!="string"&&typeof o!="number"||(i=i||[]).push(c,""+o):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Lr.hasOwnProperty(c)?(o!=null&&c==="onScroll"&&te("scroll",e),i||s===o||(i=[])):(i=i||[]).push(c,o))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Nd=function(e,t,n,r){n!==r&&(t.flags|=4)};function dr(e,t){if(!ae)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function je(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ym(e,t,n){var r=t.pendingProps;switch(Ds(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(t),null;case 1:return Ue(t.type)&&Yl(),je(t),null;case 3:return r=t.stateNode,Zn(),ne(We),ne(Ee),Us(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(pl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ut!==null&&(os(ut),ut=null))),es(e,t),je(t),null;case 5:Ws(t);var l=fn(Ur.current);if(n=t.type,e!==null&&t.stateNode!=null)Cd(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(b(166));return je(t),null}if(e=fn(St.current),pl(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[xt]=t,r[Br]=i,e=(t.mode&1)!==0,n){case"dialog":te("cancel",r),te("close",r);break;case"iframe":case"object":case"embed":te("load",r);break;case"video":case"audio":for(l=0;l<wr.length;l++)te(wr[l],r);break;case"source":te("error",r);break;case"img":case"image":case"link":te("error",r),te("load",r);break;case"details":te("toggle",r);break;case"input":xo(r,i),te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},te("invalid",r);break;case"textarea":So(r,i),te("invalid",r)}ja(n,i),l=null;for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];a==="children"?typeof s=="string"?r.textContent!==s&&(i.suppressHydrationWarning!==!0&&fl(r.textContent,s,e),l=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&fl(r.textContent,s,e),l=["children",""+s]):Lr.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&te("scroll",r)}switch(n){case"input":ll(r),wo(r,i,!0);break;case"textarea":ll(r),ko(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ql)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ec(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[xt]=t,e[Br]=r,Md(e,t,!1,!1),t.stateNode=e;e:{switch(a=ba(n,r),n){case"dialog":te("cancel",e),te("close",e),l=r;break;case"iframe":case"object":case"embed":te("load",e),l=r;break;case"video":case"audio":for(l=0;l<wr.length;l++)te(wr[l],e);l=r;break;case"source":te("error",e),l=r;break;case"img":case"image":case"link":te("error",e),te("load",e),l=r;break;case"details":te("toggle",e),l=r;break;case"input":xo(e,r),l=ka(e,r),te("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=ue({},r,{value:void 0}),te("invalid",e);break;case"textarea":So(e,r),l=Ca(e,r),te("invalid",e);break;default:l=r}ja(n,l),s=l;for(i in s)if(s.hasOwnProperty(i)){var o=s[i];i==="style"?rc(e,o):i==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&tc(e,o)):i==="children"?typeof o=="string"?(n!=="textarea"||o!=="")&&Fr(e,o):typeof o=="number"&&Fr(e,""+o):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Lr.hasOwnProperty(i)?o!=null&&i==="onScroll"&&te("scroll",e):o!=null&&xs(e,i,o,a))}switch(n){case"input":ll(e),wo(e,r,!1);break;case"textarea":ll(e),ko(e);break;case"option":r.value!=null&&e.setAttribute("value",""+tn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Bn(e,!!r.multiple,i,!1):r.defaultValue!=null&&Bn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Ql)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return je(t),null;case 6:if(e&&t.stateNode!=null)Nd(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(b(166));if(n=fn(Ur.current),fn(St.current),pl(t)){if(r=t.stateNode,n=t.memoizedProps,r[xt]=t,(i=r.nodeValue!==n)&&(e=qe,e!==null))switch(e.tag){case 3:fl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fl(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xt]=t,t.stateNode=r}return je(t),null;case 13:if(ne(se),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ae&&Ve!==null&&t.mode&1&&!(t.flags&128))Hc(),Kn(),t.flags|=98560,i=!1;else if(i=pl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(b(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(b(317));i[xt]=t}else Kn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;je(t),i=!1}else ut!==null&&(os(ut),ut=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||se.current&1?ge===0&&(ge=3):to())),t.updateQueue!==null&&(t.flags|=4),je(t),null);case 4:return Zn(),es(e,t),e===null&&Ar(t.stateNode.containerInfo),je(t),null;case 10:return Os(t.type._context),je(t),null;case 17:return Ue(t.type)&&Yl(),je(t),null;case 19:if(ne(se),i=t.memoizedState,i===null)return je(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)dr(i,!1);else{if(ge!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=ni(e),a!==null){for(t.flags|=128,dr(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ee(se,se.current&1|2),t.child}e=e.sibling}i.tail!==null&&de()>er&&(t.flags|=128,r=!0,dr(i,!1),t.lanes=4194304)}else{if(!r)if(e=ni(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),dr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ae)return je(t),null}else 2*de()-i.renderingStartTime>er&&n!==1073741824&&(t.flags|=128,r=!0,dr(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=de(),t.sibling=null,n=se.current,ee(se,r?n&1|2:n&1),t):(je(t),null);case 22:case 23:return eo(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ge&1073741824&&(je(t),t.subtreeFlags&6&&(t.flags|=8192)):je(t),null;case 24:return null;case 25:return null}throw Error(b(156,t.tag))}function xm(e,t){switch(Ds(t),t.tag){case 1:return Ue(t.type)&&Yl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zn(),ne(We),ne(Ee),Us(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ws(t),null;case 13:if(ne(se),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(b(340));Kn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ne(se),null;case 4:return Zn(),null;case 10:return Os(t.type._context),null;case 22:case 23:return eo(),null;case 24:return null;default:return null}}var gl=!1,be=!1,wm=typeof WeakSet=="function"?WeakSet:Set,D=null;function On(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ce(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){ce(e,t,r)}}var du=!1;function Sm(e,t){if(Oa=Gl,e=Lc(),Fs(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,s=-1,o=-1,c=0,f=0,p=e,d=null;t:for(;;){for(var g;p!==n||l!==0&&p.nodeType!==3||(s=a+l),p!==i||r!==0&&p.nodeType!==3||(o=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(g=p.firstChild)!==null;)d=p,p=g;for(;;){if(p===e)break t;if(d===n&&++c===l&&(s=a),d===i&&++f===r&&(o=a),(g=p.nextSibling)!==null)break;p=d,d=p.parentNode}p=g}n=s===-1||o===-1?null:{start:s,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(Aa={focusedElem:e,selectionRange:n},Gl=!1,D=t;D!==null;)if(t=D,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,D=e;else for(;D!==null;){t=D;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,R=x.memoizedState,v=t.stateNode,m=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:st(t.type,y),R);v.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(b(163))}}catch(S){ce(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,D=e;break}D=t.return}return x=du,du=!1,x}function jr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var i=l.destroy;l.destroy=void 0,i!==void 0&&ts(t,n,i)}l=l.next}while(l!==r)}}function ji(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ns(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function jd(e){var t=e.alternate;t!==null&&(e.alternate=null,jd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[xt],delete t[Br],delete t[Wa],delete t[rm],delete t[lm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bd(e){return e.tag===5||e.tag===3||e.tag===4}function fu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rs(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ql));else if(r!==4&&(e=e.child,e!==null))for(rs(e,t,n),e=e.sibling;e!==null;)rs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ls(e,t,n),e=e.sibling;e!==null;)ls(e,t,n),e=e.sibling}var Se=null,ot=!1;function _t(e,t,n){for(n=n.child;n!==null;)Ed(e,t,n),n=n.sibling}function Ed(e,t,n){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(xi,n)}catch{}switch(n.tag){case 5:be||On(n,t);case 6:var r=Se,l=ot;Se=null,_t(e,t,n),Se=r,ot=l,Se!==null&&(ot?(e=Se,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Se.removeChild(n.stateNode));break;case 18:Se!==null&&(ot?(e=Se,n=n.stateNode,e.nodeType===8?ea(e.parentNode,n):e.nodeType===1&&ea(e,n),Ir(e)):ea(Se,n.stateNode));break;case 4:r=Se,l=ot,Se=n.stateNode.containerInfo,ot=!0,_t(e,t,n),Se=r,ot=l;break;case 0:case 11:case 14:case 15:if(!be&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var i=l,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&ts(n,t,a),l=l.next}while(l!==r)}_t(e,t,n);break;case 1:if(!be&&(On(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){ce(n,t,s)}_t(e,t,n);break;case 21:_t(e,t,n);break;case 22:n.mode&1?(be=(r=be)||n.memoizedState!==null,_t(e,t,n),be=r):_t(e,t,n);break;default:_t(e,t,n)}}function pu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new wm),t.forEach(function(r){var l=Tm.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function it(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var i=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Se=s.stateNode,ot=!1;break e;case 3:Se=s.stateNode.containerInfo,ot=!0;break e;case 4:Se=s.stateNode.containerInfo,ot=!0;break e}s=s.return}if(Se===null)throw Error(b(160));Ed(i,a,l),Se=null,ot=!1;var o=l.alternate;o!==null&&(o.return=null),l.return=null}catch(c){ce(l,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Td(t,e),t=t.sibling}function Td(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(it(t,e),ht(e),r&4){try{jr(3,e,e.return),ji(3,e)}catch(y){ce(e,e.return,y)}try{jr(5,e,e.return)}catch(y){ce(e,e.return,y)}}break;case 1:it(t,e),ht(e),r&512&&n!==null&&On(n,n.return);break;case 5:if(it(t,e),ht(e),r&512&&n!==null&&On(n,n.return),e.flags&32){var l=e.stateNode;try{Fr(l,"")}catch(y){ce(e,e.return,y)}}if(r&4&&(l=e.stateNode,l!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,s=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&Zu(l,i),ba(s,a);var c=ba(s,i);for(a=0;a<o.length;a+=2){var f=o[a],p=o[a+1];f==="style"?rc(l,p):f==="dangerouslySetInnerHTML"?tc(l,p):f==="children"?Fr(l,p):xs(l,f,p,c)}switch(s){case"input":Ra(l,i);break;case"textarea":Ju(l,i);break;case"select":var d=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Bn(l,!!i.multiple,g,!1):d!==!!i.multiple&&(i.defaultValue!=null?Bn(l,!!i.multiple,i.defaultValue,!0):Bn(l,!!i.multiple,i.multiple?[]:"",!1))}l[Br]=i}catch(y){ce(e,e.return,y)}}break;case 6:if(it(t,e),ht(e),r&4){if(e.stateNode===null)throw Error(b(162));l=e.stateNode,i=e.memoizedProps;try{l.nodeValue=i}catch(y){ce(e,e.return,y)}}break;case 3:if(it(t,e),ht(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ir(t.containerInfo)}catch(y){ce(e,e.return,y)}break;case 4:it(t,e),ht(e);break;case 13:it(t,e),ht(e),l=e.child,l.flags&8192&&(i=l.memoizedState!==null,l.stateNode.isHidden=i,!i||l.alternate!==null&&l.alternate.memoizedState!==null||(Zs=de())),r&4&&pu(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(be=(c=be)||f,it(t,e),be=c):it(t,e),ht(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(D=e,f=e.child;f!==null;){for(p=D=f;D!==null;){switch(d=D,g=d.child,d.tag){case 0:case 11:case 14:case 15:jr(4,d,d.return);break;case 1:On(d,d.return);var x=d.stateNode;if(typeof x.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(y){ce(r,n,y)}}break;case 5:On(d,d.return);break;case 22:if(d.memoizedState!==null){hu(p);continue}}g!==null?(g.return=d,D=g):hu(p)}f=f.sibling}e:for(f=null,p=e;;){if(p.tag===5){if(f===null){f=p;try{l=p.stateNode,c?(i=l.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=p.stateNode,o=p.memoizedProps.style,a=o!=null&&o.hasOwnProperty("display")?o.display:null,s.style.display=nc("display",a))}catch(y){ce(e,e.return,y)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(y){ce(e,e.return,y)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:it(t,e),ht(e),r&4&&pu(e);break;case 21:break;default:it(t,e),ht(e)}}function ht(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(bd(n)){var r=n;break e}n=n.return}throw Error(b(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(Fr(l,""),r.flags&=-33);var i=fu(e);ls(e,i,l);break;case 3:case 4:var a=r.stateNode.containerInfo,s=fu(e);rs(e,s,a);break;default:throw Error(b(161))}}catch(o){ce(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function km(e,t,n){D=e,Ld(e)}function Ld(e,t,n){for(var r=(e.mode&1)!==0;D!==null;){var l=D,i=l.child;if(l.tag===22&&r){var a=l.memoizedState!==null||gl;if(!a){var s=l.alternate,o=s!==null&&s.memoizedState!==null||be;s=gl;var c=be;if(gl=a,(be=o)&&!c)for(D=l;D!==null;)a=D,o=a.child,a.tag===22&&a.memoizedState!==null?gu(l):o!==null?(o.return=a,D=o):gu(l);for(;i!==null;)D=i,Ld(i),i=i.sibling;D=l,gl=s,be=c}mu(e)}else l.subtreeFlags&8772&&i!==null?(i.return=l,D=i):mu(e)}}function mu(e){for(;D!==null;){var t=D;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:be||ji(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!be)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:st(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Zo(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Zo(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&n.focus();break;case"img":o.src&&(n.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Ir(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(b(163))}be||t.flags&512&&ns(t)}catch(d){ce(t,t.return,d)}}if(t===e){D=null;break}if(n=t.sibling,n!==null){n.return=t.return,D=n;break}D=t.return}}function hu(e){for(;D!==null;){var t=D;if(t===e){D=null;break}var n=t.sibling;if(n!==null){n.return=t.return,D=n;break}D=t.return}}function gu(e){for(;D!==null;){var t=D;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ji(4,t)}catch(o){ce(t,n,o)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(o){ce(t,l,o)}}var i=t.return;try{ns(t)}catch(o){ce(t,i,o)}break;case 5:var a=t.return;try{ns(t)}catch(o){ce(t,a,o)}}}catch(o){ce(t,t.return,o)}if(t===e){D=null;break}var s=t.sibling;if(s!==null){s.return=t.return,D=s;break}D=t.return}}var Rm=Math.ceil,ii=$t.ReactCurrentDispatcher,Ks=$t.ReactCurrentOwner,nt=$t.ReactCurrentBatchConfig,H=0,xe=null,pe=null,Re=0,Ge=0,An=ln(0),ge=0,qr=null,xn=0,bi=0,Xs=0,br=null,ze=null,Zs=0,er=1/0,Mt=null,ai=!1,is=null,Xt=null,vl=!1,Gt=null,si=0,Er=0,as=null,Dl=-1,$l=0;function Ie(){return H&6?de():Dl!==-1?Dl:Dl=de()}function Zt(e){return e.mode&1?H&2&&Re!==0?Re&-Re:am.transition!==null?($l===0&&($l=hc()),$l):(e=V,e!==0||(e=window.event,e=e===void 0?16:kc(e.type)),e):1}function dt(e,t,n,r){if(50<Er)throw Er=0,as=null,Error(b(185));Zr(e,n,r),(!(H&2)||e!==xe)&&(e===xe&&(!(H&2)&&(bi|=n),ge===4&&Ut(e,Re)),He(e,r),n===1&&H===0&&!(t.mode&1)&&(er=de()+500,Mi&&an()))}function He(e,t){var n=e.callbackNode;ap(e,t);var r=Hl(e,e===xe?Re:0);if(r===0)n!==null&&Co(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Co(n),t===1)e.tag===0?im(vu.bind(null,e)):Bc(vu.bind(null,e)),tm(function(){!(H&6)&&an()}),n=null;else{switch(gc(r)){case 1:n=Ms;break;case 4:n=pc;break;case 16:n=Ul;break;case 536870912:n=mc;break;default:n=Ul}n=Ad(n,Fd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Fd(e,t){if(Dl=-1,$l=0,H&6)throw Error(b(327));var n=e.callbackNode;if(Vn()&&e.callbackNode!==n)return null;var r=Hl(e,e===xe?Re:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=oi(e,r);else{t=r;var l=H;H|=2;var i=Dd();(xe!==e||Re!==t)&&(Mt=null,er=de()+500,pn(e,t));do try{Nm();break}catch(s){Pd(e,s)}while(!0);_s(),ii.current=i,H=l,pe!==null?t=0:(xe=null,Re=0,t=ge)}if(t!==0){if(t===2&&(l=Pa(e),l!==0&&(r=l,t=ss(e,l))),t===1)throw n=qr,pn(e,0),Ut(e,r),He(e,de()),n;if(t===6)Ut(e,r);else{if(l=e.current.alternate,!(r&30)&&!Mm(l)&&(t=oi(e,r),t===2&&(i=Pa(e),i!==0&&(r=i,t=ss(e,i))),t===1))throw n=qr,pn(e,0),Ut(e,r),He(e,de()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(b(345));case 2:un(e,ze,Mt);break;case 3:if(Ut(e,r),(r&130023424)===r&&(t=Zs+500-de(),10<t)){if(Hl(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){Ie(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Ba(un.bind(null,e,ze,Mt),t);break}un(e,ze,Mt);break;case 4:if(Ut(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var a=31-ct(r);i=1<<a,a=t[a],a>l&&(l=a),r&=~i}if(r=l,r=de()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rm(r/1960))-r,10<r){e.timeoutHandle=Ba(un.bind(null,e,ze,Mt),r);break}un(e,ze,Mt);break;case 5:un(e,ze,Mt);break;default:throw Error(b(329))}}}return He(e,de()),e.callbackNode===n?Fd.bind(null,e):null}function ss(e,t){var n=br;return e.current.memoizedState.isDehydrated&&(pn(e,t).flags|=256),e=oi(e,t),e!==2&&(t=ze,ze=n,t!==null&&os(t)),e}function os(e){ze===null?ze=e:ze.push.apply(ze,e)}function Mm(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],i=l.getSnapshot;l=l.value;try{if(!ft(i(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ut(e,t){for(t&=~Xs,t&=~bi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ct(t),r=1<<n;e[n]=-1,t&=~r}}function vu(e){if(H&6)throw Error(b(327));Vn();var t=Hl(e,0);if(!(t&1))return He(e,de()),null;var n=oi(e,t);if(e.tag!==0&&n===2){var r=Pa(e);r!==0&&(t=r,n=ss(e,r))}if(n===1)throw n=qr,pn(e,0),Ut(e,t),He(e,de()),n;if(n===6)throw Error(b(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,un(e,ze,Mt),He(e,de()),null}function Js(e,t){var n=H;H|=1;try{return e(t)}finally{H=n,H===0&&(er=de()+500,Mi&&an())}}function wn(e){Gt!==null&&Gt.tag===0&&!(H&6)&&Vn();var t=H;H|=1;var n=nt.transition,r=V;try{if(nt.transition=null,V=1,e)return e()}finally{V=r,nt.transition=n,H=t,!(H&6)&&an()}}function eo(){Ge=An.current,ne(An)}function pn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,em(n)),pe!==null)for(n=pe.return;n!==null;){var r=n;switch(Ds(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yl();break;case 3:Zn(),ne(We),ne(Ee),Us();break;case 5:Ws(r);break;case 4:Zn();break;case 13:ne(se);break;case 19:ne(se);break;case 10:Os(r.type._context);break;case 22:case 23:eo()}n=n.return}if(xe=e,pe=e=Jt(e.current,null),Re=Ge=t,ge=0,qr=null,Xs=bi=xn=0,ze=br=null,dn!==null){for(t=0;t<dn.length;t++)if(n=dn[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=l,r.next=a}n.pending=r}dn=null}return e}function Pd(e,t){do{var n=pe;try{if(_s(),Ll.current=li,ri){for(var r=oe.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}ri=!1}if(yn=0,ye=he=oe=null,Nr=!1,Hr=0,Ks.current=null,n===null||n.return===null){ge=1,qr=t,pe=null;break}e:{var i=e,a=n.return,s=n,o=t;if(t=Re,s.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var c=o,f=s,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=lu(a);if(g!==null){g.flags&=-257,iu(g,a,s,i,t),g.mode&1&&ru(i,c,t),t=g,o=c;var x=t.updateQueue;if(x===null){var y=new Set;y.add(o),t.updateQueue=y}else x.add(o);break e}else{if(!(t&1)){ru(i,c,t),to();break e}o=Error(b(426))}}else if(ae&&s.mode&1){var R=lu(a);if(R!==null){!(R.flags&65536)&&(R.flags|=256),iu(R,a,s,i,t),$s(Jn(o,s));break e}}i=o=Jn(o,s),ge!==4&&(ge=2),br===null?br=[i]:br.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=gd(i,o,t);Xo(i,v);break e;case 1:s=o;var m=i.type,h=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Xt===null||!Xt.has(h)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=vd(i,s,t);Xo(i,S);break e}}i=i.return}while(i!==null)}Id(n)}catch(N){t=N,pe===n&&n!==null&&(pe=n=n.return);continue}break}while(!0)}function Dd(){var e=ii.current;return ii.current=li,e===null?li:e}function to(){(ge===0||ge===3||ge===2)&&(ge=4),xe===null||!(xn&268435455)&&!(bi&268435455)||Ut(xe,Re)}function oi(e,t){var n=H;H|=2;var r=Dd();(xe!==e||Re!==t)&&(Mt=null,pn(e,t));do try{Cm();break}catch(l){Pd(e,l)}while(!0);if(_s(),H=n,ii.current=r,pe!==null)throw Error(b(261));return xe=null,Re=0,ge}function Cm(){for(;pe!==null;)$d(pe)}function Nm(){for(;pe!==null&&!Xf();)$d(pe)}function $d(e){var t=Od(e.alternate,e,Ge);e.memoizedProps=e.pendingProps,t===null?Id(e):pe=t,Ks.current=null}function Id(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=xm(n,t),n!==null){n.flags&=32767,pe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ge=6,pe=null;return}}else if(n=ym(n,t,Ge),n!==null){pe=n;return}if(t=t.sibling,t!==null){pe=t;return}pe=t=e}while(t!==null);ge===0&&(ge=5)}function un(e,t,n){var r=V,l=nt.transition;try{nt.transition=null,V=1,jm(e,t,n,r)}finally{nt.transition=l,V=r}return null}function jm(e,t,n,r){do Vn();while(Gt!==null);if(H&6)throw Error(b(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(b(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(sp(e,i),e===xe&&(pe=xe=null,Re=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vl||(vl=!0,Ad(Ul,function(){return Vn(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=nt.transition,nt.transition=null;var a=V;V=1;var s=H;H|=4,Ks.current=null,Sm(e,n),Td(n,e),qp(Aa),Gl=!!Oa,Aa=Oa=null,e.current=n,km(n),Zf(),H=s,V=a,nt.transition=i}else e.current=n;if(vl&&(vl=!1,Gt=e,si=l),i=e.pendingLanes,i===0&&(Xt=null),tp(n.stateNode),He(e,de()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(ai)throw ai=!1,e=is,is=null,e;return si&1&&e.tag!==0&&Vn(),i=e.pendingLanes,i&1?e===as?Er++:(Er=0,as=e):Er=0,an(),null}function Vn(){if(Gt!==null){var e=gc(si),t=nt.transition,n=V;try{if(nt.transition=null,V=16>e?16:e,Gt===null)var r=!1;else{if(e=Gt,Gt=null,si=0,H&6)throw Error(b(331));var l=H;for(H|=4,D=e.current;D!==null;){var i=D,a=i.child;if(D.flags&16){var s=i.deletions;if(s!==null){for(var o=0;o<s.length;o++){var c=s[o];for(D=c;D!==null;){var f=D;switch(f.tag){case 0:case 11:case 15:jr(8,f,i)}var p=f.child;if(p!==null)p.return=f,D=p;else for(;D!==null;){f=D;var d=f.sibling,g=f.return;if(jd(f),f===c){D=null;break}if(d!==null){d.return=g,D=d;break}D=g}}}var x=i.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var R=y.sibling;y.sibling=null,y=R}while(y!==null)}}D=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,D=a;else e:for(;D!==null;){if(i=D,i.flags&2048)switch(i.tag){case 0:case 11:case 15:jr(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,D=v;break e}D=i.return}}var m=e.current;for(D=m;D!==null;){a=D;var h=a.child;if(a.subtreeFlags&2064&&h!==null)h.return=a,D=h;else e:for(a=m;D!==null;){if(s=D,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:ji(9,s)}}catch(N){ce(s,s.return,N)}if(s===a){D=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,D=S;break e}D=s.return}}if(H=l,an(),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(xi,e)}catch{}r=!0}return r}finally{V=n,nt.transition=t}}return!1}function yu(e,t,n){t=Jn(n,t),t=gd(e,t,1),e=Kt(e,t,1),t=Ie(),e!==null&&(Zr(e,1,t),He(e,t))}function ce(e,t,n){if(e.tag===3)yu(e,e,n);else for(;t!==null;){if(t.tag===3){yu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xt===null||!Xt.has(r))){e=Jn(n,e),e=vd(t,e,1),t=Kt(t,e,1),e=Ie(),t!==null&&(Zr(t,1,e),He(t,e));break}}t=t.return}}function bm(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ie(),e.pingedLanes|=e.suspendedLanes&n,xe===e&&(Re&n)===n&&(ge===4||ge===3&&(Re&130023424)===Re&&500>de()-Zs?pn(e,0):Xs|=n),He(e,t)}function _d(e,t){t===0&&(e.mode&1?(t=sl,sl<<=1,!(sl&130023424)&&(sl=4194304)):t=1);var n=Ie();e=Pt(e,t),e!==null&&(Zr(e,t,n),He(e,n))}function Em(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),_d(e,n)}function Tm(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(b(314))}r!==null&&r.delete(t),_d(e,n)}var Od;Od=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||We.current)Be=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Be=!1,vm(e,t,n);Be=!!(e.flags&131072)}else Be=!1,ae&&t.flags&1048576&&Wc(t,Zl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Pl(e,t),e=t.pendingProps;var l=Yn(t,Ee.current);Gn(t,n),l=Gs(null,t,r,e,l,n);var i=Vs();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ue(r)?(i=!0,Kl(t)):i=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,zs(t),l.updater=Ni,t.stateNode=l,l._reactInternals=t,Qa(t,r,e,n),t=Xa(null,t,r,!0,i,n)):(t.tag=0,ae&&i&&Ps(t),De(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Pl(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=Fm(r),e=st(r,e),l){case 0:t=Ka(null,t,r,e,n);break e;case 1:t=ou(null,t,r,e,n);break e;case 11:t=au(null,t,r,e,n);break e;case 14:t=su(null,t,r,st(r.type,e),n);break e}throw Error(b(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:st(r,l),Ka(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:st(r,l),ou(e,t,r,l,n);case 3:e:{if(Sd(t),e===null)throw Error(b(387));r=t.pendingProps,i=t.memoizedState,l=i.element,Qc(e,t),ti(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){l=Jn(Error(b(423)),t),t=uu(e,t,r,n,l);break e}else if(r!==l){l=Jn(Error(b(424)),t),t=uu(e,t,r,n,l);break e}else for(Ve=Yt(t.stateNode.containerInfo.firstChild),qe=t,ae=!0,ut=null,n=Vc(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Kn(),r===l){t=Dt(e,t,n);break e}De(e,t,r,n)}t=t.child}return t;case 5:return Yc(t),e===null&&Ga(t),r=t.type,l=t.pendingProps,i=e!==null?e.memoizedProps:null,a=l.children,za(r,l)?a=null:i!==null&&za(r,i)&&(t.flags|=32),wd(e,t),De(e,t,a,n),t.child;case 6:return e===null&&Ga(t),null;case 13:return kd(e,t,n);case 4:return Bs(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Xn(t,null,r,n):De(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:st(r,l),au(e,t,r,l,n);case 7:return De(e,t,t.pendingProps,n),t.child;case 8:return De(e,t,t.pendingProps.children,n),t.child;case 12:return De(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,i=t.memoizedProps,a=l.value,ee(Jl,r._currentValue),r._currentValue=a,i!==null)if(ft(i.value,a)){if(i.children===l.children&&!We.current){t=Dt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){a=i.child;for(var o=s.firstContext;o!==null;){if(o.context===r){if(i.tag===1){o=Tt(-1,n&-n),o.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?o.next=o:(o.next=f.next,f.next=o),c.pending=o}}i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Va(i.return,n,t),s.lanes|=n;break}o=o.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(b(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Va(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}De(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,Gn(t,n),l=rt(l),r=r(l),t.flags|=1,De(e,t,r,n),t.child;case 14:return r=t.type,l=st(r,t.pendingProps),l=st(r.type,l),su(e,t,r,l,n);case 15:return yd(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:st(r,l),Pl(e,t),t.tag=1,Ue(r)?(e=!0,Kl(t)):e=!1,Gn(t,n),hd(t,r,l),Qa(t,r,l,n),Xa(null,t,r,!0,e,n);case 19:return Rd(e,t,n);case 22:return xd(e,t,n)}throw Error(b(156,t.tag))};function Ad(e,t){return fc(e,t)}function Lm(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tt(e,t,n,r){return new Lm(e,t,n,r)}function no(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Fm(e){if(typeof e=="function")return no(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ss)return 11;if(e===ks)return 14}return 2}function Jt(e,t){var n=e.alternate;return n===null?(n=tt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Il(e,t,n,r,l,i){var a=2;if(r=e,typeof e=="function")no(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case En:return mn(n.children,l,i,t);case ws:a=8,l|=8;break;case ya:return e=tt(12,n,t,l|2),e.elementType=ya,e.lanes=i,e;case xa:return e=tt(13,n,t,l),e.elementType=xa,e.lanes=i,e;case wa:return e=tt(19,n,t,l),e.elementType=wa,e.lanes=i,e;case Yu:return Ei(n,l,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qu:a=10;break e;case Qu:a=9;break e;case Ss:a=11;break e;case ks:a=14;break e;case zt:a=16,r=null;break e}throw Error(b(130,e==null?e:typeof e,""))}return t=tt(a,n,t,l),t.elementType=e,t.type=r,t.lanes=i,t}function mn(e,t,n,r){return e=tt(7,e,r,t),e.lanes=n,e}function Ei(e,t,n,r){return e=tt(22,e,r,t),e.elementType=Yu,e.lanes=n,e.stateNode={isHidden:!1},e}function oa(e,t,n){return e=tt(6,e,null,t),e.lanes=n,e}function ua(e,t,n){return t=tt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Pm(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ui(0),this.expirationTimes=Ui(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ui(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function ro(e,t,n,r,l,i,a,s,o){return e=new Pm(e,t,n,s,o),t===1?(t=1,i===!0&&(t|=8)):t=0,i=tt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zs(i),e}function Dm(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function zd(e){if(!e)return nn;e=e._reactInternals;e:{if(kn(e)!==e||e.tag!==1)throw Error(b(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ue(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(b(171))}if(e.tag===1){var n=e.type;if(Ue(n))return zc(e,n,t)}return t}function Bd(e,t,n,r,l,i,a,s,o){return e=ro(n,r,!0,e,l,i,a,s,o),e.context=zd(null),n=e.current,r=Ie(),l=Zt(n),i=Tt(r,l),i.callback=t??null,Kt(n,i,l),e.current.lanes=l,Zr(e,l,r),He(e,r),e}function Ti(e,t,n,r){var l=t.current,i=Ie(),a=Zt(l);return n=zd(n),t.context===null?t.context=n:t.pendingContext=n,t=Tt(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Kt(l,t,a),e!==null&&(dt(e,l,a,i),Tl(e,l,a)),a}function ui(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function xu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function lo(e,t){xu(e,t),(e=e.alternate)&&xu(e,t)}function $m(){return null}var Wd=typeof reportError=="function"?reportError:function(e){console.error(e)};function io(e){this._internalRoot=e}Li.prototype.render=io.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(b(409));Ti(e,t,null,null)};Li.prototype.unmount=io.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wn(function(){Ti(null,e,null,null)}),t[Ft]=null}};function Li(e){this._internalRoot=e}Li.prototype.unstable_scheduleHydration=function(e){if(e){var t=xc();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Wt.length&&t!==0&&t<Wt[n].priority;n++);Wt.splice(n,0,e),n===0&&Sc(e)}};function ao(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function wu(){}function Im(e,t,n,r,l){if(l){if(typeof r=="function"){var i=r;r=function(){var c=ui(a);i.call(c)}}var a=Bd(t,r,e,0,null,!1,!1,"",wu);return e._reactRootContainer=a,e[Ft]=a.current,Ar(e.nodeType===8?e.parentNode:e),wn(),a}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var s=r;r=function(){var c=ui(o);s.call(c)}}var o=ro(e,0,!1,null,null,!1,!1,"",wu);return e._reactRootContainer=o,e[Ft]=o.current,Ar(e.nodeType===8?e.parentNode:e),wn(function(){Ti(t,o,n,r)}),o}function Pi(e,t,n,r,l){var i=n._reactRootContainer;if(i){var a=i;if(typeof l=="function"){var s=l;l=function(){var o=ui(a);s.call(o)}}Ti(t,a,e,l)}else a=Im(n,t,e,l,r);return ui(a)}vc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=xr(t.pendingLanes);n!==0&&(Cs(t,n|1),He(t,de()),!(H&6)&&(er=de()+500,an()))}break;case 13:wn(function(){var r=Pt(e,1);if(r!==null){var l=Ie();dt(r,e,1,l)}}),lo(e,1)}};Ns=function(e){if(e.tag===13){var t=Pt(e,134217728);if(t!==null){var n=Ie();dt(t,e,134217728,n)}lo(e,134217728)}};yc=function(e){if(e.tag===13){var t=Zt(e),n=Pt(e,t);if(n!==null){var r=Ie();dt(n,e,t,r)}lo(e,t)}};xc=function(){return V};wc=function(e,t){var n=V;try{return V=e,t()}finally{V=n}};Ta=function(e,t,n){switch(t){case"input":if(Ra(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=Ri(r);if(!l)throw Error(b(90));Xu(r),Ra(r,l)}}}break;case"textarea":Ju(e,n);break;case"select":t=n.value,t!=null&&Bn(e,!!n.multiple,t,!1)}};ac=Js;sc=wn;var _m={usingClientEntryPoint:!1,Events:[el,Pn,Ri,lc,ic,Js]},fr={findFiberByHostInstance:cn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Om={bundleType:fr.bundleType,version:fr.version,rendererPackageName:fr.rendererPackageName,rendererConfig:fr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$t.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cc(e),e===null?null:e.stateNode},findFiberByHostInstance:fr.findFiberByHostInstance||$m,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yl.isDisabled&&yl.supportsFiber)try{xi=yl.inject(Om),wt=yl}catch{}}Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_m;Ye.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ao(t))throw Error(b(200));return Dm(e,t,null,n)};Ye.createRoot=function(e,t){if(!ao(e))throw Error(b(299));var n=!1,r="",l=Wd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=ro(e,1,!1,null,null,n,!1,r,l),e[Ft]=t.current,Ar(e.nodeType===8?e.parentNode:e),new io(t)};Ye.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(b(188)):(e=Object.keys(e).join(","),Error(b(268,e)));return e=cc(t),e=e===null?null:e.stateNode,e};Ye.flushSync=function(e){return wn(e)};Ye.hydrate=function(e,t,n){if(!Fi(t))throw Error(b(200));return Pi(null,e,t,!0,n)};Ye.hydrateRoot=function(e,t,n){if(!ao(e))throw Error(b(405));var r=n!=null&&n.hydratedSources||null,l=!1,i="",a=Wd;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Bd(t,null,e,1,n??null,l,!1,i,a),e[Ft]=t.current,Ar(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new Li(t)};Ye.render=function(e,t,n){if(!Fi(t))throw Error(b(200));return Pi(null,e,t,!1,n)};Ye.unmountComponentAtNode=function(e){if(!Fi(e))throw Error(b(40));return e._reactRootContainer?(wn(function(){Pi(null,null,e,!1,function(){e._reactRootContainer=null,e[Ft]=null})}),!0):!1};Ye.unstable_batchedUpdates=Js;Ye.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Fi(n))throw Error(b(200));if(e==null||e._reactInternals===void 0)throw Error(b(38));return Pi(e,t,n,!1,r)};Ye.version="18.3.1-next-f1338f8080-20240426";function Ud(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ud)}catch(e){console.error(e)}}Ud(),Uu.exports=Ye;var Am=Uu.exports,Su=Am;ga.createRoot=Su.createRoot,ga.hydrateRoot=Su.hydrateRoot;var so=(e=>(e.GBP="GBP",e))(so||{}),A=(e=>(e.Asset="Asset",e.Liability="Liability",e))(A||{}),j=(e=>(e.CashReserves="CashReserves",e.Gilts="Gilts",e.Mortgages="Mortgages",e.CorporateLoans="CorporateLoans",e.ReverseRepo="ReverseRepo",e))(j||{}),E=(e=>(e.RetailDeposits="RetailDeposits",e.CorporateDeposits="CorporateDeposits",e.WholesaleFundingST="WholesaleFundingST",e.WholesaleFundingLT="WholesaleFundingLT",e.RepurchaseAgreements="RepurchaseAgreements",e))(E||{}),Xe=(e=>(e.Overnight="Overnight",e.LessThan1Y="LessThan1Y",e.OneToThreeY="OneToThreeY",e.ThreeToFiveY="ThreeToFiveY",e.GreaterThan5Y="GreaterThan5Y",e.Perpetual="Perpetual",e))(Xe||{}),Pe=(e=>(e.Level1="Level1",e.Level2A="Level2A",e.Level2B="Level2B",e.None="None",e))(Pe||{});const zm={[j.CashReserves]:{productType:j.CashReserves,riskWeight:0,baseDefaultRate:0,lossGivenDefault:0,volumeElasticityToRate:0},[j.Gilts]:{productType:j.Gilts,riskWeight:0,baseDefaultRate:5e-4,lossGivenDefault:.1,volumeElasticityToRate:0},[j.Mortgages]:{productType:j.Mortgages,riskWeight:.35,baseDefaultRate:.004,lossGivenDefault:.25,volumeElasticityToRate:-.4,loan:{defaultTermMonths:360,maxTermMonths:420,initialSeasoningEnabled:!0,initialCouponDispersionBps:50,initialPdMultiplierRange:{min:.8,max:1.25},initialLgdMultiplierRange:{min:.9,max:1.1},initialMinBucketOutstanding:1e6}},[j.CorporateLoans]:{productType:j.CorporateLoans,riskWeight:1,baseDefaultRate:.015,lossGivenDefault:.45,volumeElasticityToRate:-.3,loan:{defaultTermMonths:60,maxTermMonths:420,initialSeasoningEnabled:!0,initialCouponDispersionBps:75,initialPdMultiplierRange:{min:.85,max:1.4},initialLgdMultiplierRange:{min:.9,max:1.15},initialMinBucketOutstanding:1e6}},[j.ReverseRepo]:{productType:j.ReverseRepo,riskWeight:0,baseDefaultRate:0,lossGivenDefault:0,volumeElasticityToRate:0},[E.RetailDeposits]:{productType:E.RetailDeposits,riskWeight:0,baseDefaultRate:0,lossGivenDefault:0,volumeElasticityToRate:.5},[E.CorporateDeposits]:{productType:E.CorporateDeposits,riskWeight:0,baseDefaultRate:0,lossGivenDefault:0,volumeElasticityToRate:.8},[E.WholesaleFundingST]:{productType:E.WholesaleFundingST,riskWeight:0,baseDefaultRate:0,lossGivenDefault:0,volumeElasticityToRate:0},[E.WholesaleFundingLT]:{productType:E.WholesaleFundingLT,riskWeight:0,baseDefaultRate:0,lossGivenDefault:0,volumeElasticityToRate:0},[E.RepurchaseAgreements]:{productType:E.RepurchaseAgreements,riskWeight:0,baseDefaultRate:0,lossGivenDefault:0,volumeElasticityToRate:0}},Bm={[j.CashReserves]:{productType:j.CashReserves,hqlaLevel:Pe.Level1,lcrInflowRate:0,nsfrRsfFactor:0},[j.Gilts]:{productType:j.Gilts,hqlaLevel:Pe.Level1,lcrInflowRate:0,nsfrRsfFactor:.05},[j.Mortgages]:{productType:j.Mortgages,hqlaLevel:Pe.None,lcrInflowRate:.05,nsfrRsfFactor:.85},[j.CorporateLoans]:{productType:j.CorporateLoans,hqlaLevel:Pe.None,lcrInflowRate:.05,nsfrRsfFactor:1},[j.ReverseRepo]:{productType:j.ReverseRepo,hqlaLevel:Pe.None,lcrInflowRate:1,nsfrRsfFactor:.1},[E.RetailDeposits]:{productType:E.RetailDeposits,hqlaLevel:Pe.None,lcrOutflowRate:.05,nsfrAsfFactor:.95},[E.CorporateDeposits]:{productType:E.CorporateDeposits,hqlaLevel:Pe.None,lcrOutflowRate:.4,nsfrAsfFactor:.5},[E.WholesaleFundingST]:{productType:E.WholesaleFundingST,hqlaLevel:Pe.None,lcrOutflowRate:1,nsfrAsfFactor:0},[E.WholesaleFundingLT]:{productType:E.WholesaleFundingLT,hqlaLevel:Pe.None,lcrOutflowRate:0,nsfrAsfFactor:1},[E.RepurchaseAgreements]:{productType:E.RepurchaseAgreements,hqlaLevel:Pe.None,lcrOutflowRate:1,nsfrAsfFactor:0}},Wm={taxRate:.25,operatingCostRatio:.02,maxDepositGrowthPerStep:.08,maxLoanGrowthPerStep:.05,fixedOperatingCostPerMonth:5e7,initialPortfolioSeed:123456789},Um={minCet1Ratio:.105,minLeverageRatio:.035,minLcr:1,minNsfr:1},Hm={depositBaselineGrowthMonthly:.002,loanBaselineGrowthMonthly:0,minDepositGrowthPerStep:-.1,minLoanGrowthPerStep:-.02,loanFeeRateMonthly:.001},Gm={idiosyncraticRun:{baseRunOffRate:.1,incrementalRate:.1,maxRunOffRate:.5}},Vm={cashFlowRoundingTolerance:.01,cashFlowBreachThreshold:1},pt={version:"v1",productParameters:zm,liquidityTags:Bm,global:Wm,riskLimits:Um,behaviour:Hm,shockParameters:Gm,tolerances:Vm},qm={[Pe.Level1]:1,[Pe.Level2A]:.85,[Pe.Level2B]:.5,[Pe.None]:0},Qm=e=>e.reduce((t,n)=>{var a;if(!n.liquidityTag)return t;const r=qm[n.liquidityTag.hqlaLevel]??0,l=((a=n.encumbrance)==null?void 0:a.encumberedAmount)??0,i=Math.max(0,n.balance-l);return t+i*r},0),Ym=(e,t,n)=>{let r=0,l=0;e.forEach(o=>{const c=o.liquidityTag;if(c){if(c.lcrOutflowRate!==void 0){const f=o.productType===E.RetailDeposits||o.productType===E.CorporateDeposits?n:1;r+=o.balance*c.lcrOutflowRate*f}c.lcrInflowRate!==void 0&&(l+=o.balance*c.lcrInflowRate)}});const i=Math.min(l,.75*r),a=Math.max(0,r-i);return{lcr:a>0?t/a:1/0,netOutflows:a}},Km=(e,t,n)=>{let r=t+n,l=0;e.forEach(a=>{const s=a.liquidityTag;s&&(s.nsfrAsfFactor!==void 0&&(r+=a.balance*s.nsfrAsfFactor),s.nsfrRsfFactor!==void 0&&(l+=a.balance*s.nsfrRsfFactor))});const i=l>0?r/l:1/0;return{asf:r,rsf:l,nsfr:i}},Di=({state:e,config:t,lcrOutflowMultiplier:n=1})=>{const r=e.balanceSheet.items.filter(x=>x.side===A.Asset),l=r.reduce((x,y)=>x+y.balance,0),i=r.reduce((x,y)=>{const R=t.productParameters[y.productType];return x+y.balance*((R==null?void 0:R.riskWeight)??0)},0),a=l,s=i>0?e.capital.cet1/i:1/0,o=a>0?(e.capital.cet1+e.capital.at1)/a:1/0,c=Qm(r),{lcr:f}=Ym(e.balanceSheet.items,c,n),{asf:p,rsf:d,nsfr:g}=Km(e.balanceSheet.items,e.capital.cet1,e.capital.at1);return{rwa:i,leverageExposure:a,cet1Ratio:s,leverageRatio:o,hqla:c,lcr:f,lcrOutflowMultiplier:n,asf:p,rsf:d,nsfr:g}},$i=(e,t)=>({cet1Breached:e.cet1Ratio<t.minCet1Ratio,leverageBreached:e.leverageRatio<t.minLeverageRatio,lcrBreached:e.lcr<t.minLcr,nsfrBreached:e.nsfr<t.minNsfr}),Ae=(e,t,n)=>Math.max(t,Math.min(n,e)),Xm=e=>{if(e>=0)return 1/(1+Math.exp(-e));const t=Math.exp(e);return t/(1+t)},Zm=e=>Math.log(e/(1-e)),Tr=(e,t)=>(1-Math.exp(-e*t))/(e*t),_l=(e,t)=>Tr(e,t)-Math.exp(-e*t),Jm=(e,t,n=1e-12)=>{const r=[[e[0][0],e[0][1],e[0][2],t[0]],[e[1][0],e[1][1],e[1][2],t[1]],[e[2][0],e[2][1],e[2][2],t[2]]];for(let s=0;s<3;s++){let o=s,c=Math.abs(r[s][s]);for(let p=s+1;p<3;p++){const d=Math.abs(r[p][s]);d>c&&(c=d,o=p)}if(!Number.isFinite(c)||c<n)return null;if(o!==s){const p=r[s];r[s]=r[o],r[o]=p}const f=r[s][s];if(!Number.isFinite(f)||Math.abs(f)<n)return null;for(let p=s+1;p<3;p++){const d=r[p][s]/f;if(!Number.isFinite(d))return null;for(let g=s;g<4;g++)r[p][g]-=d*r[s][g]}}if(Math.abs(r[2][2])<n||Math.abs(r[1][1])<n||Math.abs(r[0][0])<n)return null;const l=r[2][3]/r[2][2],i=(r[1][3]-r[1][2]*l)/r[1][1],a=(r[0][3]-r[0][2]*l-r[0][1]*i)/r[0][0];return!Number.isFinite(a)||!Number.isFinite(i)||!Number.isFinite(l)?null:[a,i,l]},Hd=(e,t,n)=>{if(t.length!==3)throw new Error("fitNelsonSiegelFrom3Points requires exactly 3 points");const r=n&&Number.isFinite(n.level)&&Number.isFinite(n.slope)&&Number.isFinite(n.curvature)?n:void 0,l=()=>{const h=t.map(N=>N.y).filter(N=>Number.isFinite(N));return{level:h.length===0?0:h.reduce((N,k)=>N+k,0)/h.length,slope:0,curvature:0}};if(!Number.isFinite(e)||e<=0||!t.every(({mYears:h,y:S})=>Number.isFinite(h)&&Number.isFinite(S)))return r??l();const i=t.map(({mYears:h})=>[1,Tr(e,h),_l(e,h)]),a=t.map(({y:h})=>h),s=Jm(i,a);if(s){const[h,S,N]=s;if(Number.isFinite(h)&&Number.isFinite(S)&&Number.isFinite(N))return{level:h,slope:S,curvature:N}}if(r)return r;const o=t[0].mYears>=t[1].mYears?t[0].mYears>=t[2].mYears?0:2:t[1].mYears>=t[2].mYears?1:2,c=t[o],f=t.filter((h,S)=>S!==o),[p,d]=f,g=c.y,x=Tr(e,p.mYears),y=_l(e,p.mYears),R=Tr(e,d.mYears),v=_l(e,d.mYears),m=x*v-y*R;if(Number.isFinite(m)&&Math.abs(m)>1e-12){const h=p.y-g,S=d.y-g,N=(h*v-y*S)/m,k=(x*S-h*R)/m;if(Number.isFinite(g)&&Number.isFinite(N)&&Number.isFinite(k))return{level:g,slope:N,curvature:k}}return l()},sn=(e,t)=>e.level+e.slope*Tr(e.lambda,t)+e.curvature*_l(e.lambda,t),eh=e=>{let t=e|0;t===0&&(t=1831565813);const n=()=>(t^=t<<13,t^=t>>>17,t^=t<<5,t>>>0),r=()=>n()/4294967296;return{get seed(){return t>>>0},set seed(i){t=i|0,t===0&&(t=1831565813)},uniform:r,normal:()=>{let i=0;for(;i<=0;)i=r();const a=r();return Math.sqrt(-2*Math.log(i))*Math.cos(2*Math.PI*a)}}},th=(e,t)=>{var l;const n=e.length;for(let i=0;i<n;i++)if(((l=e[i])==null?void 0:l.length)!==n)throw new Error("Cholesky decomposition requires a square matrix");const r=Array.from({length:n},()=>Array(n).fill(0));for(let i=0;i<n;i++)for(let a=0;a<=i;a++){let s=e[i][a];for(let o=0;o<a;o++)s-=r[i][o]*r[a][o];if(!Number.isFinite(s))throw new Error("Cholesky decomposition failed: non-finite intermediate value");if(i===a){if(s<=t)throw new Error(`Cholesky decomposition failed: matrix not SPD (diag ${i} = ${s})`);r[i][a]=Math.sqrt(s)}else{const o=r[a][a];if(o<=t)throw new Error(`Cholesky decomposition failed: near-zero diagonal at ${a} (${o})`);r[i][a]=s/o}}return r},nh=e=>{let r;for(let l=0;l<8;l++){const i=l===0?0:1e-12*10**(l-1),a=i===0?e:e.map((s,o)=>s.map((c,f)=>o===f?c+i:c));try{return th(a,1e-12)}catch(s){r=s}}throw r instanceof Error?r:new Error("Cholesky decomposition failed")},rh=(e,t)=>{const n=e.length,r=Array(n).fill(0);for(let l=0;l<n;l++){let i=0;for(let a=0;a<=l;a++)i+=e[l][a]*t[a];r[l]=i}return r},lh=(e,t)=>{const n=e.length,r=Array.from({length:n},()=>Array(n).fill(0));for(let l=0;l<n;l++)for(let i=0;i<n;i++)r[l][i]=t[l][i]*e[l]*e[i];return r},F={factors:{A:[.85,.7,.8,.97],sds:[.25,.22,.28,.08],corr:[[1,-.2,-.4,.1],[-.2,1,.2,.1],[-.4,.2,1,-.1],[.1,.1,-.1,1]]},gdp:{trendMoM:.001,alphaD:.0018,alphaS:.0012,alphaF:.002,regime:{normal:{mean:0,sd:.0035},recession:{mean:-.0035,sd:.0075},enterProb:.03,stayProb:.9}},unemployment:{uMin:.02,uMax:.12,uBar:.046,meanReversion:.08,okun:2.5,stress:.08,latentNoiseSd:.02},inflation:{piStar:.02,kappa:.85,bS:.004,bD:.0015,noiseSd:.0012,min:-.02,max:.15},policy:{rho:.9,rNeutralRealMean:.0125,rNeutralRealStd:.0045,phiPi:1.5,phiD:.003,noiseSd:7e-4,min:0,max:.12},termPremium:{mean:.0185,rho:.97,fLoading:.0025,piLoading:.08,noiseSd:.0012,min:0,max:.06,scale5y:.27},curve:{lambda:.7,y1Reversion:.3,y1InflationLoading:.15,y5PolicyWeight:.35,y1NoiseSd:6e-4,y5NoiseSd:8e-4,y20NoiseSd:.001},credit:{mean:.011,rho:.88,fLoading:.004,uLoading:.15,gLoading:.25,noiseSd:.0015,min:0,max:.05},marketPassThrough:{speed:.7,noiseSd:3e-4}},ih=nh(lh(F.factors.sds,F.factors.corr)),ah=(e,t)=>{const n=[t.normal(),t.normal(),t.normal(),t.normal()],r=rh(ih,n),[l,i,a,s]=F.factors.A;return{D:l*e.D+r[0],S:i*e.S+r[1],F:a*e.F+r[2],R:s*e.R+r[3]}},sh=(e,t)=>{const{enterProb:n,stayProb:r}=F.gdp.regime;return e==="recession"?t.uniform()<r?"recession":"normal":t.uniform()<n?"recession":"normal"},Rt=(e,t,n)=>e+n*(t-e),oh=()=>{const{uMin:e,uMax:t,uBar:n}=F.unemployment,r=Ae((n-e)/(t-e),1e-9,1-1e-9);return Zm(r)},uh=(e,t)=>{var i;const n=Math.max(1,Math.round(t)),r=eh(e.macroModel.rngSeed),l=oh();for(let a=0;a<n;a++){const s=ah(e.macroModel.factors,r),o=sh(e.macroModel.gdpRegime,r),c=F.gdp.regime[o],f=F.gdp.trendMoM+c.mean+F.gdp.alphaD*s.D-F.gdp.alphaS*s.S-F.gdp.alphaF*s.F+r.normal()*c.sd,p=f-F.gdp.trendMoM,d=e.inflationRate,g=(1-F.inflation.kappa)*F.inflation.piStar+F.inflation.kappa*d+F.inflation.bS*s.S+F.inflation.bD*s.D+r.normal()*F.inflation.noiseSd,x=Ae(g,F.inflation.min,F.inflation.max),y=e.macroModel.unemploymentLatent,R=y+F.unemployment.meanReversion*(l-y)-F.unemployment.okun*12*p+F.unemployment.stress*s.F+r.normal()*F.unemployment.latentNoiseSd,v=F.unemployment.uMin+(F.unemployment.uMax-F.unemployment.uMin)*Xm(R),m=F.policy.rNeutralRealMean+F.policy.rNeutralRealStd*s.R,h=m+x+F.policy.phiPi*(x-F.inflation.piStar)+F.policy.phiD*s.D,S=e.baseRate,N=F.policy.rho*S+(1-F.policy.rho)*h+r.normal()*F.policy.noiseSd,k=Ae(N,F.policy.min,F.policy.max),C=e.macroModel.termPremium,w=F.termPremium.mean+F.termPremium.rho*(C-F.termPremium.mean)+F.termPremium.fLoading*s.F+F.termPremium.piLoading*(x-F.inflation.piStar)+r.normal()*F.termPremium.noiseSd,L=Ae(w,F.termPremium.min,F.termPremium.max),T=m+F.inflation.piStar,I=k+F.curve.y1Reversion*(T-k)+F.curve.y1InflationLoading*(x-F.inflation.piStar)+r.normal()*F.curve.y1NoiseSd,K=T+F.curve.y5PolicyWeight*(k-T)+F.termPremium.scale5y*L+r.normal()*F.curve.y5NoiseSd,Q=T+L+r.normal()*F.curve.y20NoiseSd,fe=(i=e.giltCurve)==null?void 0:i.nelsonSiegel,Te=(fe==null?void 0:fe.lambda)??F.curve.lambda,mt=Number.isFinite(Te)&&Te>1e-6?Te:F.curve.lambda,M=fe&&Number.isFinite(fe.level)&&Number.isFinite(fe.slope)&&Number.isFinite(fe.curvature)?{level:fe.level,slope:fe.slope,curvature:fe.curvature}:void 0,_={...Hd(mt,[{mYears:1,y:I},{mYears:5,y:K},{mYears:20,y:Q}],M),lambda:mt},z={y1:sn(_,1),y2:sn(_,2),y3:sn(_,3),y5:sn(_,5),y10:sn(_,10),y20:sn(_,20),y30:sn(_,30)},Y=e.creditSpread,ve=F.credit.mean+F.credit.rho*(Y-F.credit.mean)+F.credit.fLoading*s.F+F.credit.uLoading*(v-F.unemployment.uBar)-F.credit.gLoading*p+r.normal()*F.credit.noiseSd,J=Ae(ve,F.credit.min,F.credit.max);e.gdpGrowthMoM=f,e.inflationRate=x,e.unemploymentRate=v,e.baseRate=k,e.giltCurve={nelsonSiegel:_,yields:z},e.riskFreeShort=z.y1,e.riskFreeLong=z.y30,e.creditSpread=J;const re=F.marketPassThrough.speed,le=F.marketPassThrough.noiseSd,kt=.003+.7*J,_i=.004+.8*J,It=.017+1*J,of=.012+.4*J;e.wholesaleFundingSpread=Ae(Rt(e.wholesaleFundingSpread,kt,re)+r.normal()*le,0,.08),e.seniorDebtSpread=Ae(Rt(e.seniorDebtSpread,_i,re)+r.normal()*le,0,.1),e.corporateLoanSpread=Ae(Rt(e.corporateLoanSpread,It,re)+r.normal()*le,0,.12),e.mortgageSpread=Ae(Rt(e.mortgageSpread,of,re)+r.normal()*le,0,.12);const uf=.02+.015*Math.max(0,s.F)+.2*J,cf=.05+.05*Math.max(0,s.F)+.5*J;e.giltRepoHaircut=Ae(Rt(e.giltRepoHaircut,uf,.25),.005,.2),e.corpBondRepoHaircut=Ae(Rt(e.corpBondRepoHaircut,cf,.25),.02,.4);const fo=Math.max(0,k-.025);e.competitorRetailDepositRate=Ae(Rt(e.competitorRetailDepositRate,fo,.25)+r.normal()*le,0,k),e.competitorCorporateDepositRate!==void 0&&(e.competitorCorporateDepositRate=Ae(Rt(e.competitorCorporateDepositRate,fo+.005,.5)+r.normal()*le,0,k));const df=z.y5+e.mortgageSpread-.005;e.competitorMortgageRate=Ae(Rt(e.competitorMortgageRate,df,.2)+r.normal()*le,0,.2),e.macroModel={...e.macroModel,factors:s,gdpRegime:o,unemploymentLatent:R,termPremium:L}}e.macroModel.rngSeed=r.seed},et={[j.CashReserves]:{productType:j.CashReserves,label:"Cash & Reserves",side:A.Asset,behaviour:{}},[j.Gilts]:{productType:j.Gilts,label:"Gilts",side:A.Asset,behaviour:{}},[j.Mortgages]:{productType:j.Mortgages,label:"Retail mortgages",side:A.Asset,behaviour:{isLoan:!0,affectsBehaviouralLoanFlow:!0,loanBenchmark:"mortgage"}},[j.CorporateLoans]:{productType:j.CorporateLoans,label:"Corporate loans",side:A.Asset,behaviour:{isLoan:!0,affectsBehaviouralLoanFlow:!0,loanBenchmark:"corporate"}},[j.ReverseRepo]:{productType:j.ReverseRepo,label:"Reverse repo",side:A.Asset,behaviour:{}},[E.RetailDeposits]:{productType:E.RetailDeposits,label:"Retail deposits",side:A.Liability,behaviour:{isCustomerDeposit:!0,depositSegment:"retail",affectsBehaviouralDepositFlow:!0}},[E.CorporateDeposits]:{productType:E.CorporateDeposits,label:"Corporate deposits",side:A.Liability,behaviour:{isCustomerDeposit:!0,depositSegment:"corporate",affectsBehaviouralDepositFlow:!0}},[E.WholesaleFundingST]:{productType:E.WholesaleFundingST,label:"Wholesale funding ST",side:A.Liability,behaviour:{}},[E.WholesaleFundingLT]:{productType:E.WholesaleFundingLT,label:"Wholesale funding LT",side:A.Liability,behaviour:{}},[E.RepurchaseAgreements]:{productType:E.RepurchaseAgreements,label:"Repo borrowing",side:A.Liability,behaviour:{}}},Qr=12,ci=420,ke=(e,t,n)=>Math.min(n,Math.max(t,e)),ch=(e,t)=>e.balanceSheet.items.find(n=>n.productType===t),oo=e=>e.balanceSheet.items.find(t=>t.productType===j.CashReserves),tr=e=>{var t,n;return!!((n=(t=et[e])==null?void 0:t.behaviour)!=null&&n.isLoan)},dh=e=>{let t=e|0;t===0&&(t=1831565813);const n=()=>(t^=t<<13,t^=t>>>17,t^=t<<5,t>>>0),r=()=>n()/4294967296;return{get seed(){return t>>>0},set seed(i){t=i|0,t===0&&(t=1831565813)},uniform:r,normal:()=>{let i=0;for(;i<=0;)i=r();const a=r();return Math.sqrt(-2*Math.log(i))*Math.cos(2*Math.PI*a)}}},fh=(e,t,n,r)=>{if(e<=0)return 0;if(!Number.isFinite(e))throw new Error("Outstanding principal must be finite");if(!Number.isFinite(t))throw new Error("Interest rate must be finite");if(!Number.isFinite(n)||n<=0)throw new Error("termMonths must be a positive integer");if(!Number.isFinite(r)||r<0)throw new Error("ageMonths must be a non-negative integer");if(r>=n)throw new Error(`Cannot infer original principal when ageMonths (${r}) >= termMonths (${n})`);const l=t/Qr,i=n,a=r;if(Math.abs(l)<1e-12){const f=i-a;if(f<=0)throw new Error(`Invalid remaining months (${f})`);return e*i/f}const s=Math.pow(1+l,i),o=Math.pow(1+l,a),c=s-o;if(!Number.isFinite(s)||!Number.isFinite(o)||!Number.isFinite(c)||c<=0)throw new Error("Failed to infer original principal (invalid amortisation factors)");return e*((s-1)/c)},di=(e,t)=>{e.loanCohorts||(e.loanCohorts={});const n=e.loanCohorts[t];if(n)return n;const r=[];return e.loanCohorts[t]=r,r},en=e=>(e??[]).reduce((t,n)=>t+(n.outstandingPrincipal??0),0),Ii=e=>{Object.entries(e.loanCohorts??{}).forEach(([n,r])=>{if(!tr(n))return;const l=ch(e,n);l&&(l.balance=en(r))})},fi=e=>{for(let n=e.length-1;n>=0;n--){const r=e[n];(r.outstandingPrincipal<=.01||r.ageMonths>=r.termMonths)&&e.splice(n,1)}},Gd=(e,t)=>{if(!Number.isFinite(e.outstandingPrincipal)||e.outstandingPrincipal<0)throw new Error(`Invalid outstandingPrincipal for cohort ${e.productType}/${e.cohortId}`);if(!Number.isFinite(e.originalPrincipal)||e.originalPrincipal<0)throw new Error(`Invalid originalPrincipal for cohort ${e.productType}/${e.cohortId}`);if(!Number.isFinite(e.annualInterestRate)||e.annualInterestRate<0)throw new Error(`Invalid annualInterestRate for cohort ${e.productType}/${e.cohortId}`);if(!Number.isFinite(e.termMonths)||!Number.isInteger(e.termMonths)||e.termMonths<=0)throw new Error(`Invalid termMonths for cohort ${e.productType}/${e.cohortId}`);if(e.termMonths>t||e.termMonths>ci)throw new Error(`Cohort termMonths (${e.termMonths}) exceeds max (${Math.min(t,ci)}) for ${e.productType}/${e.cohortId}`);if(!Number.isFinite(e.ageMonths)||!Number.isInteger(e.ageMonths)||e.ageMonths<0)throw new Error(`Invalid ageMonths for cohort ${e.productType}/${e.cohortId}`);if(e.ageMonths>=e.termMonths)throw new Error(`Cohort ageMonths (${e.ageMonths}) >= termMonths (${e.termMonths}) for ${e.productType}/${e.cohortId}`);if(!Number.isFinite(e.annualPd)||e.annualPd<0)throw new Error(`Invalid annualPd for cohort ${e.productType}/${e.cohortId}`);if(!Number.isFinite(e.lgd)||e.lgd<0||e.lgd>1)throw new Error(`Invalid lgd for cohort ${e.productType}/${e.cohortId}`)},uo=(e,t)=>{var l;const n=e.productParameters[t],r=((l=n==null?void 0:n.loan)==null?void 0:l.maxTermMonths)??ci;return Math.min(ci,r)},Ol=(e,t)=>{var l;const n=e.productParameters[t],r=(l=n==null?void 0:n.loan)==null?void 0:l.defaultTermMonths;if(!r)throw new Error(`Missing loan.defaultTermMonths for ${t}`);return r},Vd=e=>{const{state:t,config:n,productType:r,cohortId:l}=e;if(!tr(r))return 0;const i=Math.max(0,e.principal);if(i<=0)return 0;const a=oo(t),s=Math.max(0,(a==null?void 0:a.balance)??0),o=Math.min(i,s);if(o<=0)return 0;const c=uo(n,r),f=Math.min(c,e.termMonths??Ol(n,r));if(f<=0)throw new Error(`Invalid termMonths for origination: ${f}`);const p=di(t,r),d=p.find(g=>g.cohortId===l);if(!a)throw new Error("Missing cash line item; cannot originate loans");if(a.balance-=o,d){const g=Math.max(0,d.outstandingPrincipal),x=o,y=g+x;d.outstandingPrincipal+=o,d.originalPrincipal+=o,d.annualInterestRate=y>0?(d.annualInterestRate*g+e.annualInterestRate*x)/y:e.annualInterestRate,d.annualPd=y>0?(d.annualPd*g+e.annualPd*x)/y:e.annualPd,d.lgd=y>0?(d.lgd*g+e.lgd*x)/y:e.lgd,d.termMonths=Math.max(d.termMonths,f),d.ageMonths=Math.min(d.ageMonths,0)}else p.push({productType:r,cohortId:l,originalPrincipal:o,outstandingPrincipal:o,annualInterestRate:Math.max(0,e.annualInterestRate),termMonths:f,ageMonths:0,annualPd:Math.max(0,e.annualPd),lgd:ke(e.lgd,0,1)});return fi(p),Ii(t),o},qd=e=>{const{state:t,productType:n}=e;if(!tr(n))return 0;const r=di(t,n),l=en(r),i=Math.max(0,e.amount),a=Math.min(i,l);if(a<=0)return 0;let s=a;const o=1e-9;for(let f=0;f<r.length;f++){const p=r[f];if(s<=o)break;const d=f===r.length-1?s:a*p.outstandingPrincipal/l,g=Math.min(p.outstandingPrincipal,Math.max(0,d));p.outstandingPrincipal-=g,s-=g}const c=oo(t);if(!c)throw new Error("Missing cash line item; cannot apply prepayment");return c.balance+=a,fi(r),Ii(t),a},ph=(e,t,n)=>{if(n<=0)return e;const r=t/Qr;if(Math.abs(r)<1e-12)return e/n;const l=1-Math.pow(1+r,-n);return!Number.isFinite(l)||Math.abs(l)<1e-12?e:e*r/l},mh=e=>{const{state:t,config:n}=e,r=Math.max(0,Math.floor(e.dtMonths));if(r===0)return{loanInterestIncome:0,recognizedLoanLosses:{}};const l=oo(t);if(!l)throw new Error("Missing cash line item; cannot step loan cohorts");const i={};let a=0;const s=Object.keys(t.loanCohorts??{});for(let f=0;f<r;f++)s.forEach(p=>{if(!tr(p))return;const d=di(t,p),g=uo(n,p);d.forEach(x=>{if(x.outstandingPrincipal<=0||x.ageMonths>=x.termMonths)return;Gd(x,g);const y=x.termMonths-x.ageMonths,R=ph(x.outstandingPrincipal,x.annualInterestRate,y),v=x.annualInterestRate/Qr,m=x.outstandingPrincipal*v,h=Math.min(x.outstandingPrincipal,Math.max(0,R-m));x.outstandingPrincipal-=h,l.balance+=m+h,a+=m;const S=ke(x.annualPd*e.pdMultiplier,0,.999999),N=1-Math.pow(1-S,1/Qr),k=Math.max(0,x.outstandingPrincipal*N);if(k>0){const C=ke(x.lgd*e.lgdMultiplier,0,1),w=k*C,L=k-w;x.outstandingPrincipal-=k,l.balance+=L,i[p]=(i[p]??0)+w}x.ageMonths+=1}),fi(d)});const o=e.extraLossesByProduct??{};return Object.entries(o).forEach(([f,p])=>{if(!tr(f)||p<=0)return;const d=di(t,f),g=en(d);if(g<=0)return;const x=Math.min(p,g);let y=x;for(let R=0;R<d.length&&!(y<=1e-9);R++){const v=d[R],m=R===d.length-1?y:x*v.outstandingPrincipal/g,h=Math.min(v.outstandingPrincipal,Math.max(0,m));v.outstandingPrincipal-=h,y-=h,i[f]=(i[f]??0)+h}fi(d)}),Ii(t),{loanInterestIncome:a,recognizedLoanLosses:i}},ku=e=>{const t=e.tolerance??Math.max(1e6,e.targetOutstanding*1e-6);if(e.targetOutstanding>0&&e.cohorts.length===0)throw new Error(`Seeded cohort array empty for ${e.productType} while target outstanding is non-zero`);e.cohorts.forEach(l=>Gd(l,e.maxTermMonths));const n=en(e.cohorts),r=n-e.targetOutstanding;if(Math.abs(r)>t)throw new Error(`Seeded cohort outstanding mismatch for ${e.productType}: sum ${n.toFixed(2)} vs target ${e.targetOutstanding.toFixed(2)} (diff ${r.toFixed(2)})`)},Ru=e=>{if(e.length<=2)return e.slice();const t=e.slice();for(let n=0;n<e.length;n++){const r=e[n-1]??e[n],l=e[n],i=e[n+1]??e[n];t[n]=(r+l+i)/3}return t},hh=e=>{const t=e.reduce((n,r)=>n+r,0);return t<=0?e.map(()=>0):e.map(n=>n/t)},gh=(e,t,n)=>{const r=Math.max(1,Math.floor(t)),l=ke(Math.floor(n),0,r);if(l>=r)return 0;const a=Math.max(0,e)/Qr;if(Math.abs(a)<1e-12)return ke((r-l)/r,0,1);const s=Math.pow(1+a,r),o=Math.pow(1+a,l),c=s-1;return!Number.isFinite(s)||!Number.isFinite(o)||!Number.isFinite(c)||Math.abs(c)<1e-12?ke((r-l)/r,0,1):ke((s-o)/c,0,1)},Qd=e=>{var m;if(!tr(e.productType))return[];if(e.targetOutstanding<=0)return[];const t=(m=e.config.productParameters[e.productType])==null?void 0:m.loan;if(!(t!=null&&t.initialSeasoningEnabled))return[{productType:e.productType,cohortId:0,originalPrincipal:e.targetOutstanding,outstandingPrincipal:e.targetOutstanding,annualInterestRate:Math.max(0,e.baseAnnualInterestRate),termMonths:Ol(e.config,e.productType),ageMonths:0,annualPd:Math.max(0,e.baseAnnualPd),lgd:ke(e.baseLgd,0,1)}];const n=uo(e.config,e.productType),l=ke(Ol(e.config,e.productType),1,n);if(l<=1)throw new Error("defaultTermMonths too small for seasoning");const i=dh(e.seed),a=.12,s=ke(e.baseAnnualInterestRate,1e-4,.25);let o=Array.from({length:l},(h,S)=>{const N=gh(s,l,S),k=Math.exp(i.normal()*a);return Math.max(0,N*k)});o=Ru(Ru(o)),o=hh(o);const c=t.initialMinBucketOutstanding??1e6,p=(t.initialCouponDispersionBps??50)/1e4,d=t.initialPdMultiplierRange??{min:.9,max:1.1},g=t.initialLgdMultiplierRange??{min:.95,max:1.05},x=[],y=o.map((h,S)=>({w:h,ageMonths:S,outstanding:e.targetOutstanding*h})).filter(h=>h.outstanding>=c);if(y.length===0){const h=ke(Ol(e.config,e.productType),1,n),S={productType:e.productType,cohortId:0,originalPrincipal:e.targetOutstanding,outstandingPrincipal:e.targetOutstanding,annualInterestRate:Math.max(0,e.baseAnnualInterestRate),termMonths:h,ageMonths:0,annualPd:Math.max(0,e.baseAnnualPd),lgd:ke(e.baseLgd,0,1)};return ku({productType:e.productType,targetOutstanding:e.targetOutstanding,cohorts:[S],maxTermMonths:n}),[S]}const R=y.reduce((h,S)=>h+S.w,0);return new Map(y.map(h=>[h.ageMonths,h.w/R])).forEach((h,S)=>{const N=e.targetOutstanding*h,k=l,C=ke(e.baseAnnualInterestRate+i.normal()*p,1e-4,.25),w=ke(d.min+(d.max-d.min)*i.uniform(),0,10),L=ke(g.min+(g.max-g.min)*i.uniform(),0,10),T=ke(e.baseAnnualPd*w,0,.999999),I=ke(e.baseLgd*L,0,1),q=fh(N,C,k,S);x.push({productType:e.productType,cohortId:-S,originalPrincipal:q,outstandingPrincipal:N,annualInterestRate:C,termMonths:k,ageMonths:S,annualPd:T,lgd:I})}),x.sort((h,S)=>h.cohortId-S.cohortId),ku({productType:e.productType,targetOutstanding:e.targetOutstanding,cohorts:x,maxTermMonths:n}),x},vh=e=>Math.max(0,Math.min(1,e)),yh=e=>Math.log(e/(1-e)),xh=(e,t,n)=>{const r=vh((e-t)/(n-t)),l=Math.min(1-1e-9,Math.max(1e-9,r));return yh(l)},gt=(e,t,n,r,l,i)=>({side:e,productType:t,label:n,currency:so.GBP,balance:r,interestRate:l,maturityBucket:i,liquidityTag:pt.liquidityTags[t],encumbrance:{encumberedAmount:0}}),wh={items:[gt(A.Asset,j.CashReserves,"Cash & Reserves",3e10,.045,Xe.Overnight),gt(A.Asset,j.Gilts,"Gilts",6e10,.04,Xe.GreaterThan5Y),gt(A.Asset,j.Mortgages,"Mortgages",25e10,.055,Xe.GreaterThan5Y),gt(A.Asset,j.CorporateLoans,"Corporate Loans",16e10,.065,Xe.ThreeToFiveY),gt(A.Asset,j.ReverseRepo,"Reverse Repo",0,.04,Xe.LessThan1Y),gt(A.Liability,E.RetailDeposits,"Retail Deposits",26e10,.02,Xe.LessThan1Y),gt(A.Liability,E.CorporateDeposits,"Corporate Deposits",9e10,.03,Xe.LessThan1Y),gt(A.Liability,E.WholesaleFundingST,"Wholesale Funding ST",3e10,.055,Xe.LessThan1Y),gt(A.Liability,E.WholesaleFundingLT,"Wholesale Funding LT",7e10,.06,Xe.GreaterThan5Y),gt(A.Liability,E.RepurchaseAgreements,"Repo Borrowing",0,.05,Xe.LessThan1Y)]},Sh={cet1:4e10,at1:1e10},kh={interestIncome:0,interestExpense:0,netInterestIncome:0,feeIncome:0,creditLosses:0,operatingExpenses:0,preTaxProfit:0,tax:0,netIncome:0},Rh={cashStart:0,cashEnd:0,netChange:0,operatingCashFlow:0,investingCashFlow:0,financingCashFlow:0},Mh={rwa:0,leverageExposure:0,cet1Ratio:0,leverageRatio:0,hqla:0,lcr:0,lcrOutflowMultiplier:1,asf:0,rsf:0,nsfr:0},Ch={cet1Breached:!1,leverageBreached:!1,lcrBreached:!1,nsfrBreached:!1},Nh=.02,jh=.12,Yd=.7,qn={y1:.0378,y2:.0378,y3:.0382,y5:.0397,y10:.0449,y20:.0511,y30:.0521},bh=Hd(Yd,[{mYears:1,y:qn.y1},{mYears:5,y:qn.y5},{mYears:20,y:qn.y20}]),Eh={baseRate:.04,riskFreeShort:qn.y1,riskFreeLong:qn.y5,mortgageSpread:.015,corporateLoanSpread:.025,wholesaleFundingSpread:.01,seniorDebtSpread:.01,giltRepoHaircut:.02,corpBondRepoHaircut:.05,competitorRetailDepositRate:.015,competitorMortgageRate:.05,competitorCorporateDepositRate:.02,gdpGrowthMoM:.001,unemploymentRate:.051,inflationRate:.038,creditSpread:.011,giltCurve:{nelsonSiegel:{...bh,lambda:Yd},yields:qn},macroModel:{factors:{D:0,S:0,F:0,R:0},gdpRegime:"normal",unemploymentLatent:xh(.051,Nh,jh),termPremium:.0185,rngSeed:123456789}},Th={depositFranchiseStrength:.7,reputation:.8,ratingNotchOffset:0},Lh={step:0,date:new Date("2024-01-01T00:00:00Z"),stepLengthMonths:1},Yr={version:"v1",time:Lh,balanceSheet:wh,capital:Sh,incomeStatement:kh,cashFlowStatement:Rh,riskMetrics:Mh,compliance:Ch,market:Eh,behaviour:Th,loanCohorts:{},isInResolution:!1,hasFailed:!1},Fh=pt.global.initialPortfolioSeed??Yr.market.macroModel.rngSeed,Kd=e=>{const t=Yr.balanceSheet.items.find(l=>l.productType===e);if(!t)throw new Error(`Missing balance sheet item for ${e} while seeding loan cohorts`);if(t.balance<=0)return;const n=pt.productParameters[e],r=Qd({productType:e,targetOutstanding:t.balance,baseAnnualInterestRate:t.interestRate,baseAnnualPd:n.baseDefaultRate,baseLgd:n.lossGivenDefault,config:pt,seed:Fh+(e===j.Mortgages?0:1)});Yr.loanCohorts[e]=r,t.balance=en(r)};Kd(j.Mortgages);Kd(j.CorporateLoans);const Xd=Di({state:Yr,config:pt}),Ph=$i(Xd,pt.riskLimits),pi={...Yr,riskMetrics:Xd,compliance:Ph},U=(e,t="N/A")=>Number.isFinite(e)?`${(e/1e9).toFixed(2)}bn`:t,B=(e,t=2,n="N/A")=>Number.isFinite(e)?`${(e*100).toFixed(t)}%`:n,Dh=(e,t=2,n="N/A")=>Number.isFinite(e)?`${e>=0?"+":""}${(e*100).toFixed(t)}%`:n,mi=(e,t="")=>{if(e===null||!Number.isFinite(e))return t;const n=Math.abs(e)>=100?e.toFixed(0):e.toFixed(1);return`${e>0?"+":""}${n}%`},Mu=(e,t=2,n="N/A")=>Number.isFinite(e)?`${e.toFixed(t)}x`:n,Mn=(e,t="")=>Number.isFinite(e)?`${Math.round(e)}`:t,xl=(e,t=2,n="N/A")=>Number.isFinite(e)?e.toFixed(t):n,$e=(e,t="")=>e===void 0||!Number.isFinite(e)?t:`${(e*100).toFixed(2)}%`,Zd=(e,t)=>{if(!Number.isFinite(e))return"";if(((t==null?void 0:t.toLowerCase())??"").includes("%")){const l=e*100;return`${l.toFixed(Math.abs(l)>=10?0:1)}%`}const r=Math.abs(e);return r>=1e9?`${(e/1e9).toFixed(r>=1e10?0:1)}bn`:r>=1e6?`${(e/1e6).toFixed(r>=1e8?0:1)}m`:r>=1e3?`${(e/1e3).toFixed(r>=1e4?0:1)}k`:r>=1?e.toFixed(r>=10?0:1):e.toFixed(2)},Jd=(e,t,n=4)=>{let r=e,l=t;if(r===l){const x=Math.max(Math.abs(r)*.25,1);r-=x,l+=x}const a=(l-r)/Math.max(n,1);if(!Number.isFinite(a)||a===0)return[r,l];const s=10**Math.floor(Math.log10(Math.abs(a))),o=a/s;let c=1;o>5?c=10:o>2?c=5:o>1&&(c=2);const f=c*s,p=Math.floor(r/f)*f,d=Math.ceil(l/f)*f,g=[];for(let x=p;x<=d+f/2;x+=f){const y=Number(x.toFixed(10));g.includes(y)||g.push(y)}return g.length<2&&g.push(Number((p+f).toFixed(10))),g},$h=({riskMetrics:e,equity:t,assets:n,roe:r,nim:l})=>u.jsxs("div",{className:"grid-metrics",children:[u.jsx(Ot,{label:"CET1 Ratio",value:B(e.cet1Ratio),helper:"CET1 capital divided by risk-weighted assets (>= limit to avoid breach)."}),u.jsx(Ot,{label:"Leverage Ratio",value:B(e.leverageRatio),helper:"Tier 1 capital over total exposure; backstop against model risk."}),u.jsx(Ot,{label:"LCR",value:B(e.lcr),helper:"High-quality liquid assets over 30-day stressed net outflows."}),u.jsx(Ot,{label:"NSFR",value:B(e.nsfr),helper:"Available stable funding over required stable funding (1-year view)."}),u.jsx(Ot,{label:"ROE (annualised)",value:B(r),helper:"Net income annualised over common equity."}),u.jsx(Ot,{label:"NIM (annualised)",value:B(l),helper:"Net interest income over average assets."}),u.jsx(Ot,{label:"Equity",value:`${(t/1e9).toFixed(1)}bn`,helper:"CET1 + AT1 capital."}),u.jsx(Ot,{label:"Total Assets",value:`${(n/1e9).toFixed(1)}bn`,helper:"Balance sheet size."})]}),Ot=({label:e,value:t,helper:n})=>u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-label",children:e}),u.jsx("div",{className:"metric-value",children:t}),n&&u.jsx("div",{className:"metric-helper",children:n})]}),Ih=({state:e,onChange:t,onSubmit:n,disabled:r})=>{const l=i=>a=>{t({...e,[i]:a.target.value})};return u.jsxs("div",{className:"stack",children:[u.jsx("div",{className:"muted",children:"Enter decimal rates (e.g. 0.025 for 2.5%). Amounts in GBP."}),r&&u.jsx("div",{className:"alert danger",children:"Scenario ended due to failure. Actions are disabled."}),u.jsxs("div",{className:"form-row",children:[u.jsx(Cn,{label:"Retail deposit rate",value:e.retailDepositRate,onChange:l("retailDepositRate"),placeholder:"0.020",disabled:r}),u.jsx(Cn,{label:"Corporate deposit rate",value:e.corporateDepositRate,onChange:l("corporateDepositRate"),placeholder:"0.030",disabled:r}),u.jsx(Cn,{label:"Mortgage rate",value:e.mortgageRate,onChange:l("mortgageRate"),placeholder:"0.055",disabled:r}),u.jsx(Cn,{label:"Corporate loan rate",value:e.corporateLoanRate,onChange:l("corporateLoanRate"),placeholder:"0.065",disabled:r}),u.jsx(Cn,{label:"Issue long-term wholesale debt (GBP)",value:e.issueLTDebtAmount,onChange:l("issueLTDebtAmount"),placeholder:"1000000000",disabled:r}),u.jsx(Cn,{label:"Issue equity (GBP)",value:e.issueEquityAmount,onChange:l("issueEquityAmount"),placeholder:"500000000",disabled:r})]}),u.jsx("button",{className:"button primary",onClick:n,disabled:r,children:"Run next month"})]})},Cn=({label:e,value:t,onChange:n,placeholder:r,disabled:l})=>u.jsxs("label",{className:"field",children:[u.jsx("span",{children:e}),u.jsx("input",{value:t,onChange:n,placeholder:r,disabled:l,inputMode:"decimal"})]}),_h=({events:e})=>u.jsxs("div",{className:"card stack",children:[u.jsx("h3",{children:"Event Log"}),e.length===0?u.jsx("div",{className:"muted",children:"No events yet."}):u.jsx("ul",{className:"event-log",children:e.map((t,n)=>u.jsxs("li",{className:`event ${t.severity}`,children:["[",t.severity.toUpperCase(),"] ",t.message]},`${t.timestamp}-${n}`))})]}),Oh=({scenarios:e,selectedId:t,onSelect:n,onStart:r,description:l})=>u.jsxs("div",{className:"card scenario-card",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:"Scenario"}),u.jsx("h3",{children:"Guide the bank through different worlds"})]}),u.jsxs("div",{className:"form-row",style:{alignItems:"flex-end"},children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{htmlFor:"scenario",children:"Choose a scenario"}),u.jsxs("select",{id:"scenario",value:t??"",onChange:i=>n(i.target.value),children:[u.jsx("option",{value:"",disabled:!0,children:"Select scenario..."}),e.map(i=>u.jsx("option",{value:i.id,children:i.name},i.id))]})]}),u.jsx("button",{className:"button primary",onClick:r,disabled:!t,children:"Start scenario"})]}),l&&u.jsx("p",{className:"muted",children:l})]}),Ah=e=>({...e,time:{...e.time,date:new Date(e.time.date.getTime())},balanceSheet:{items:e.balanceSheet.items.map(t=>({...t,encumbrance:t.encumbrance?{...t.encumbrance}:{encumberedAmount:0},liquidityTag:t.liquidityTag?{...t.liquidityTag}:void 0}))},capital:{...e.capital},incomeStatement:{...e.incomeStatement},riskMetrics:{...e.riskMetrics},compliance:{...e.compliance},market:{...e.market,giltCurve:{...e.market.giltCurve,nelsonSiegel:{...e.market.giltCurve.nelsonSiegel},yields:{...e.market.giltCurve.yields}},macroModel:{...e.market.macroModel,factors:{...e.market.macroModel.factors}}},behaviour:{...e.behaviour},loanCohorts:Object.fromEntries(Object.entries(e.loanCohorts??{}).map(([t,n])=>[t,n.map(r=>({...r}))]))}),zh=(e,t)=>{var i;const n=Ah(pi);(i=e==null?void 0:e.balanceSheet)!=null&&i.items&&(n.balanceSheet.items=n.balanceSheet.items.map(a=>{var o,c;const s=(c=(o=e.balanceSheet)==null?void 0:o.items)==null?void 0:c.find(f=>f.productType===a.productType);return s?{...a,...s,encumbrance:s.encumbrance?{...s.encumbrance}:a.encumbrance}:a})),e!=null&&e.capital&&(n.capital={...n.capital,...e.capital}),e!=null&&e.market&&(n.market={...n.market,...e.market}),e!=null&&e.behaviour&&(n.behaviour={...n.behaviour,...e.behaviour});const r=t.global.initialPortfolioSeed??n.market.macroModel.rngSeed;return[j.Mortgages,j.CorporateLoans].forEach((a,s)=>{const o=n.balanceSheet.items.find(g=>g.productType===a);if(!o)return;if(o.balance<=0){n.loanCohorts[a]=[];return}const c=n.loanCohorts[a]??[],f=en(c);if(f>0){const g=o.balance/f;c.forEach(x=>{x.outstandingPrincipal*=g,x.originalPrincipal*=g}),n.loanCohorts[a]=c,o.balance=en(c);return}const p=t.productParameters[a],d=Qd({productType:a,targetOutstanding:o.balance,baseAnnualInterestRate:o.interestRate,baseAnnualPd:p.baseDefaultRate,baseLgd:p.lossGivenDefault,config:t,seed:r+s});n.loanCohorts[a]=d,o.balance=en(d)}),n.riskMetrics=Di({state:n,config:t}),n.compliance=$i(n.riskMetrics,t.riskLimits),n},Kr=[{id:"wholesale-funding-reliance",name:"Wholesale Funding Reliance",description:"Bank leans on short-term wholesale funding with weaker deposits. Early market spread shock and liquidity run stress funding resilience.",initialStateOverride:{balanceSheet:{items:[{productType:E.WholesaleFundingST,balance:8e10},{productType:E.RetailDeposits,balance:2e11}]}},scheduledShocks:[{stepNumber:0,shock:{type:"marketSpreadShock",wholesaleSpreadBps:120,loanSpreadBps:40,repoHaircutIncreasePct:.02}},{stepNumber:0,shock:{type:"idiosyncraticRun",outflowRateMultiplier:1.8}}]},{id:"corporate-credit-boom",name:"Corporate Credit Boom",description:"Aggressive growth in corporate lending sets the stage for a downturn that hits PD/LGD hard.",initialStateOverride:{balanceSheet:{items:[{productType:j.CorporateLoans,balance:24e10},{productType:j.Mortgages,balance:17e10}]}},scheduledShocks:[{stepNumber:3,shock:{type:"macroDownturn",pdMultiplier:3.5,lgdMultiplier:2}}]}],Bh=(e,t)=>{const n=Kr.find(l=>l.id===t);if(!(n!=null&&n.configOverrides))return e;const r=n.configOverrides;return{version:r.version??e.version,productParameters:{...e.productParameters,...r.productParameters??{}},liquidityTags:{...e.liquidityTags,...r.liquidityTags??{}},global:{...e.global,...r.global??{}},riskLimits:{...e.riskLimits,...r.riskLimits??{}}}},Wh=(e,t=pt)=>{const n=Kr.find(r=>r.id===e);return zh(n==null?void 0:n.initialStateOverride,t)},Uh=(e,t)=>{const n=Kr.find(r=>r.id===e);return n?n.scheduledShocks.filter(r=>r.stepNumber===t).map(r=>r.shock):[]},ef={Level1:1,Level2A:.85,Level2B:.5,None:0},Cu=e=>e===void 0||!Number.isFinite(e)?"":`${(e*100).toFixed(0)}%`,X=(e,t)=>e.map(n=>({step:n.time.step,value:t(n)})),Z=e=>{if(e.length<2)return null;const t=[...e].sort((l,i)=>l.step-i.step),n=t[t.length-1],r=t.find(l=>l.step===n.step-1);return!r||r.value===0||!Number.isFinite(n.value)||!Number.isFinite(r.value)?null:(n.value-r.value)/Math.abs(r.value)*100},hn=(e,t)=>e.balanceSheet.items.find(n=>n.productType===t),us=e=>e===E.RetailDeposits||e===E.CorporateDeposits,Hh=(e,t,n)=>{const r=e.balanceSheet.items.filter(a=>a.side===A.Asset),l=r.map(a=>{var c;const s=((c=n.productParameters[a.productType])==null?void 0:c.riskWeight)??0,o=X(t,f=>{const p=hn(f,a.productType);return((p==null?void 0:p.balance)??0)*s});return{id:a.productType,label:a.label,value:a.balance*s,changePct:Z(o),series:o,meta:{exposure:a.balance,riskWeight:s}}}),i=X(t,a=>a.riskMetrics.rwa);return l.push({id:"rwa-total",label:"Total RWA",value:e.riskMetrics.rwa,changePct:Z(i),series:i,meta:{exposure:r.reduce((a,s)=>a+s.balance,0)}}),l},Gh=(e,t)=>{const r=e.balanceSheet.items.filter(s=>s.side===A.Asset).map(s=>{const o=X(t,c=>{var f;return((f=hn(c,s.productType))==null?void 0:f.balance)??0});return{id:`lev-${s.productType}`,label:s.label,value:s.balance,changePct:Z(o),series:o,meta:{category:"Exposure"}}}),l=X(t,s=>s.riskMetrics.leverageExposure);r.push({id:"lev-total-exposure",label:"Total exposure",value:e.riskMetrics.leverageExposure,changePct:Z(l),series:l,meta:{category:"Exposure"}});const i=X(t,s=>s.capital.cet1+s.capital.at1);r.push({id:"lev-tier1",label:"Tier 1 capital",value:e.capital.cet1+e.capital.at1,changePct:Z(i),series:i,meta:{category:"Capital"}});const a=X(t,s=>s.riskMetrics.leverageRatio);return r.push({id:"lev-ratio",label:"Leverage ratio",value:e.riskMetrics.leverageRatio,changePct:Z(a),series:a,display:"percent",meta:{category:"Ratio"}}),r},Vh=(e,t,n)=>{const r=[];e.balanceSheet.items.filter(f=>f.side===A.Asset).forEach(f=>{var g,x;const p=((g=f.liquidityTag)==null?void 0:g.nsfrRsfFactor)??((x=n.liquidityTags[f.productType])==null?void 0:x.nsfrRsfFactor)??0,d=X(t,y=>{const R=hn(y,f.productType);return((R==null?void 0:R.balance)??0)*p});r.push({id:`nsfr-rsf-${f.productType}`,label:f.label,value:f.balance*p,changePct:Z(d),series:d,meta:{leg:"RSF",base:f.balance,factor:p}})}),e.balanceSheet.items.filter(f=>f.side===A.Liability).forEach(f=>{var g,x;const p=((g=f.liquidityTag)==null?void 0:g.nsfrAsfFactor)??((x=n.liquidityTags[f.productType])==null?void 0:x.nsfrAsfFactor)??0,d=X(t,y=>{const R=hn(y,f.productType);return((R==null?void 0:R.balance)??0)*p});r.push({id:`nsfr-asf-${f.productType}`,label:f.label,value:f.balance*p,changePct:Z(d),series:d,meta:{leg:"ASF",base:f.balance,factor:p}})}),[{id:"cet1",label:"CET1 capital",base:e.capital.cet1},{id:"at1",label:"AT1 capital",base:e.capital.at1}].forEach(f=>{const p=X(t,d=>f.id==="cet1"?d.capital.cet1:d.capital.at1);r.push({id:`nsfr-asf-${f.id}`,label:f.label,value:f.base,changePct:Z(p),series:p,meta:{leg:"ASF",base:f.base,factor:1}})});const s=X(t,f=>f.riskMetrics.asf),o=X(t,f=>f.riskMetrics.rsf),c=X(t,f=>f.riskMetrics.nsfr);return r.push({id:"nsfr-total-asf",label:"Total ASF",value:e.riskMetrics.asf,changePct:Z(s),series:s,meta:{leg:"ASF total",factor:void 0,base:void 0}},{id:"nsfr-total-rsf",label:"Total RSF",value:e.riskMetrics.rsf,changePct:Z(o),series:o,meta:{leg:"RSF total",factor:void 0,base:void 0}},{id:"nsfr-ratio",label:"NSFR",value:e.riskMetrics.nsfr,changePct:Z(c),series:c,display:"percent",meta:{leg:"Ratio",factor:void 0,base:void 0}}),r},Nn=e=>{let t=0,n=0,r=0;const l=e.riskMetrics.lcrOutflowMultiplier??1;e.balanceSheet.items.forEach(s=>{var d;const o=s.liquidityTag,c=((d=s.encumbrance)==null?void 0:d.encumberedAmount)??0,f=Math.max(0,s.balance-c);if((o==null?void 0:o.lcrOutflowRate)!==void 0){const g=us(s.productType)?o.lcrOutflowRate*l:o.lcrOutflowRate;t+=s.balance*g}(o==null?void 0:o.lcrInflowRate)!==void 0&&(n+=s.balance*o.lcrInflowRate);const p=ef[(o==null?void 0:o.hqlaLevel)??"None"]??0;p>0&&(r+=f*p)});const i=Math.min(n,.75*t),a=Math.max(0,t-i);return{outflows:t,inflows:n,inflowsCapped:i,netOutflows:a,hqla:r}},qh=(e,t)=>{const n=[];e.balanceSheet.items.forEach(f=>{var R;const p=f.liquidityTag,d=ef[(p==null?void 0:p.hqlaLevel)??"None"]??0;if(d<=0)return;const g=((R=f.encumbrance)==null?void 0:R.encumberedAmount)??0,x=Math.max(0,f.balance-g),y=X(t,v=>{var N;const m=hn(v,f.productType),h=((N=m==null?void 0:m.encumbrance)==null?void 0:N.encumberedAmount)??0;return Math.max(0,((m==null?void 0:m.balance)??0)-h)*d});n.push({id:`lcr-hqla-${f.productType}`,label:`${f.label} (HQLA)`,value:x*d,changePct:Z(y),series:y,meta:{leg:"HQLA",base:x,factor:d}})}),e.balanceSheet.items.forEach(f=>{var x;const p=(x=f.liquidityTag)==null?void 0:x.lcrOutflowRate;if(p===void 0)return;const d=us(f.productType)?p*(e.riskMetrics.lcrOutflowMultiplier??1):p,g=X(t,y=>{var m;const R=y.riskMetrics.lcrOutflowMultiplier??1,v=us(f.productType)?p*R:p;return(((m=hn(y,f.productType))==null?void 0:m.balance)??0)*v});n.push({id:`lcr-out-${f.productType}`,label:`${f.label} outflow`,value:f.balance*d,changePct:Z(g),series:g,meta:{leg:"Outflow",base:f.balance,factor:d}})}),e.balanceSheet.items.forEach(f=>{var g;const p=(g=f.liquidityTag)==null?void 0:g.lcrInflowRate;if(p===void 0)return;const d=X(t,x=>{var y;return(((y=hn(x,f.productType))==null?void 0:y.balance)??0)*p});n.push({id:`lcr-in-${f.productType}`,label:`${f.label} inflow`,value:f.balance*p,changePct:Z(d),series:d,meta:{leg:"Inflow",base:f.balance,factor:p}})});const r=Nn(e),l=X(t,f=>Nn(f).outflows),i=X(t,f=>Nn(f).inflows),a=X(t,f=>Nn(f).inflowsCapped),s=X(t,f=>Nn(f).netOutflows),o=X(t,f=>Nn(f).hqla),c=X(t,f=>f.riskMetrics.lcr);return n.push({id:"lcr-total-hqla",label:"Total HQLA",value:r.hqla,changePct:Z(o),series:o,meta:{leg:"HQLA total"}},{id:"lcr-total-outflows",label:"Total outflows",value:r.outflows,changePct:Z(l),series:l,meta:{leg:"Outflow total"}},{id:"lcr-total-inflows",label:"Total inflows",value:r.inflows,changePct:Z(i),series:i,meta:{leg:"Inflow total"}},{id:"lcr-cap-inflows",label:"Inflows capped (75% of outflows)",value:r.inflowsCapped,changePct:Z(a),series:a,meta:{leg:"Cap"}},{id:"lcr-net-outflows",label:"Net outflows",value:r.netOutflows,changePct:Z(s),series:s,meta:{leg:"Net outflow"}},{id:"lcr-ratio",label:"LCR",value:e.riskMetrics.lcr,changePct:Z(c),series:c,display:"percent",meta:{leg:"Ratio"}}),n},Qh=(e,t)=>{const n=X(t,o=>o.capital.cet1),r=X(t,o=>o.capital.at1),l=X(t,o=>o.capital.cet1+o.capital.at1),i=X(t,o=>o.riskMetrics.rwa),a=X(t,o=>o.riskMetrics.cet1Ratio),s=X(t,o=>o.riskMetrics.leverageRatio);return[{id:"cap-cet1",label:"CET1 capital",value:e.capital.cet1,changePct:Z(n),series:n,meta:{type:"Capital"}},{id:"cap-at1",label:"AT1 capital",value:e.capital.at1,changePct:Z(r),series:r,meta:{type:"Capital"}},{id:"cap-tier1",label:"Tier 1 capital",value:e.capital.cet1+e.capital.at1,changePct:Z(l),series:l,meta:{type:"Capital"}},{id:"cap-rwa",label:"Risk weighted assets",value:e.riskMetrics.rwa,changePct:Z(i),series:i,meta:{type:"Buffer"}},{id:"cap-cet1-ratio",label:"CET1 ratio",value:e.riskMetrics.cet1Ratio,changePct:Z(a),series:a,display:"percent",meta:{type:"Ratio"}},{id:"cap-lev-ratio",label:"Leverage ratio",value:e.riskMetrics.leverageRatio,changePct:Z(s),series:s,display:"percent",meta:{type:"Ratio"}}]},Yh=({data:e,xLabel:t="Simulation step",yLabel:n="Value",xTickInterval:r=12})=>{const l=e.filter(C=>Number.isFinite(C.value));if(!l.length)return u.jsx("div",{className:"series-chart empty",children:u.jsx("div",{className:"muted",children:"No history yet  run the simulation to build a trend."})});const i=l.map(C=>C.value),a=Math.max(...i),s=Math.min(...i),o=Jd(s,a,5),c=o.length?Math.min(s,...o):s,f=o.length?Math.max(a,...o):a,p=f-c,d=p===0?Math.max(Math.abs(f),1):p,g=c<0&&f>0,x=100-(0-c)/d*100,y=l.map(C=>C.step),R=Math.min(...y),v=Math.max(...y),m=Math.max(1,v-R),h=l.map(C=>{const w=(C.step-R)/m*100,L=100-(C.value-c)/d*100;return`${w.toFixed(2)},${L.toFixed(2)}`}),S=`${h.join(" ")} 100,100 0,100`,N=[],k=Math.max(1,r);N.push(R);for(let C=Math.ceil(R/k)*k;C<v;C+=k)C>R&&C<v&&N.push(C);return v!==R&&N.push(v),u.jsx("div",{className:"series-chart",children:u.jsxs("div",{className:"series-plot",children:[u.jsx("div",{className:"axis-label y-axis-label",children:n}),u.jsx("div",{className:"axis-ticks y-axis-ticks",children:o.map(C=>{const w=(C-c)/d*100;return u.jsx("span",{style:{bottom:`${w}%`},children:Zd(C,n)},C)})}),u.jsxs("div",{className:"plot-body",children:[u.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",role:"img","aria-label":"Time series",children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"series-fill",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"var(--accent)",stopOpacity:"0.2"}),u.jsx("stop",{offset:"100%",stopColor:"var(--accent)",stopOpacity:"0"})]})}),g&&u.jsx("line",{x1:"0",y1:x,x2:"100",y2:x,className:"series-zero"}),u.jsx("polygon",{className:"series-area",points:S,fill:"url(#series-fill)"}),u.jsx("polyline",{className:"series-line",points:h.join(" "),fill:"none",stroke:"var(--accent)",strokeWidth:"2"})]}),u.jsx("div",{className:"axis-ticks x-axis-ticks",children:N.map(C=>{const w=(C-R)/m*100;return u.jsx("span",{style:{left:`${w}%`},children:C},C)})}),u.jsx("div",{className:"axis-label x-axis-label",children:t})]})]})})},pr=({title:e,subtitle:t,rows:n,columns:r,selectedId:l,onSelect:i,isOpen:a,onToggle:s,valueHeader:o="Value",valueFormatter:c,yLabelForRow:f})=>{const p=n.find(y=>y.id===l)??n[0],d=y=>y===null?"muted":y>0?"positive":y<0?"negative":"muted",g=f?f(p):"Value",x=y=>c?c(y):y.display==="percent"?B(y.value):U(y.value);return u.jsxs("div",{className:"card statement-card",children:[u.jsxs("div",{className:"statement-header",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:t}),u.jsx("h3",{children:e})]}),u.jsx("div",{className:"statement-header-actions",children:u.jsx("button",{className:"button ghost small",type:"button",onClick:s,children:a?"Collapse":"Expand"})})]}),a&&u.jsxs("div",{className:"statement-body",children:[u.jsx("div",{className:"statement-table",children:u.jsxs("table",{className:"data-table clickable",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Line item"}),r==null?void 0:r.map(y=>u.jsx("th",{className:y.align==="right"?"numeric":void 0,children:y.label},y.id)),u.jsx("th",{className:"numeric",children:o}),u.jsx("th",{className:"numeric",children:"MoM"})]})}),u.jsx("tbody",{children:n.map(y=>u.jsxs("tr",{className:y.id===(p==null?void 0:p.id)?"active":"",onClick:()=>i(y.id),onKeyDown:R=>{(R.key==="Enter"||R.key===" ")&&(R.preventDefault(),i(y.id))},tabIndex:0,"aria-selected":y.id===(p==null?void 0:p.id),style:{cursor:"pointer"},children:[u.jsx("td",{children:y.label}),r==null?void 0:r.map(R=>u.jsx("td",{className:R.align==="right"?"numeric":void 0,children:R.render(y)},R.id)),u.jsx("td",{className:"numeric",children:x(y)}),u.jsx("td",{className:`numeric ${d(y.changePct)}`,children:mi(y.changePct)})]},y.id))})]})}),u.jsx("div",{className:"statement-chart",children:p?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"chart-meta",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:"Time series"}),u.jsx("div",{className:"chart-title",children:p.label})]}),u.jsxs("div",{className:"chart-pills",children:[u.jsxs("span",{className:"pill",children:["Now ",x(p)]}),u.jsxs("span",{className:`pill ${d(p.changePct)}`,children:["MoM ",mi(p.changePct)]})]})]}),u.jsx(Yh,{data:p.series,yLabel:g,xTickInterval:12})]}):u.jsx("div",{className:"muted",children:"Select a line item to plot."})})]})]})},mr=(e,t,n)=>{if(!e.length)return;const r=e.some(l=>l.id===t);(!t||!r)&&n(e[0].id)},Kh=({state:e,history:t,config:n})=>{const r=$.useMemo(()=>Hh(e,t,n),[e,t,n]),l=$.useMemo(()=>Gh(e,t),[e,t]),i=$.useMemo(()=>Vh(e,t,n),[e,t,n]),a=$.useMemo(()=>qh(e,t),[e,t]),s=$.useMemo(()=>Qh(e,t),[e,t]),[o,c]=$.useState({}),[f,p]=$.useState({rwa:!0,leverage:!0,nsfr:!0,lcr:!0,capital:!0});return $.useEffect(()=>{mr(r,o.rwa,d=>c(g=>({...g,rwa:d})))},[r,o.rwa]),$.useEffect(()=>{mr(l,o.leverage,d=>c(g=>({...g,leverage:d})))},[l,o.leverage]),$.useEffect(()=>{mr(i,o.nsfr,d=>c(g=>({...g,nsfr:d})))},[i,o.nsfr]),$.useEffect(()=>{mr(a,o.lcr,d=>c(g=>({...g,lcr:d})))},[a,o.lcr]),$.useEffect(()=>{mr(s,o.capital,d=>c(g=>({...g,capital:d})))},[s,o.capital]),u.jsxs("div",{className:"stack",children:[u.jsx(pr,{title:"Risk-weighted assets",subtitle:"RWA stack by product",rows:r,columns:[{id:"exposure",label:"Exposure",align:"right",render:d=>{var g;return U(Number(((g=d.meta)==null?void 0:g.exposure)??0))}},{id:"rw",label:"RW",align:"right",render:d=>{var g;return B(Number(((g=d.meta)==null?void 0:g.riskWeight)??0))}}],valueHeader:"RWA",selectedId:o.rwa,onSelect:d=>c(g=>({...g,rwa:d})),isOpen:f.rwa,onToggle:()=>p(d=>({...d,rwa:!d.rwa})),yLabelForRow:d=>(d==null?void 0:d.display)==="percent"?"Ratio (%)":" (bn)"}),u.jsx(pr,{title:"Leverage ratio",subtitle:"Exposure vs Tier 1 capital",rows:l,columns:[{id:"category",label:"Category",align:"left",render:d=>{var g;return((g=d.meta)==null?void 0:g.category)??""}}],valueHeader:"Value",valueFormatter:d=>d.display==="percent"?B(d.value):U(d.value),selectedId:o.leverage,onSelect:d=>c(g=>({...g,leverage:d})),isOpen:f.leverage,onToggle:()=>p(d=>({...d,leverage:!d.leverage})),yLabelForRow:d=>(d==null?void 0:d.display)==="percent"?"Ratio (%)":" (bn)"}),u.jsx(pr,{title:"NSFR",subtitle:"Available vs required stable funding",rows:i,columns:[{id:"leg",label:"Leg",render:d=>{var g;return((g=d.meta)==null?void 0:g.leg)??""}},{id:"base",label:"Base",align:"right",render:d=>{var g;return((g=d.meta)==null?void 0:g.base)!==void 0?U(Number(d.meta.base)):""}},{id:"factor",label:"Factor",align:"right",render:d=>{var g;return Cu(Number((g=d.meta)==null?void 0:g.factor))}}],valueHeader:"Required / available",valueFormatter:d=>d.display==="percent"?B(d.value):U(d.value),selectedId:o.nsfr,onSelect:d=>c(g=>({...g,nsfr:d})),isOpen:f.nsfr,onToggle:()=>p(d=>({...d,nsfr:!d.nsfr})),yLabelForRow:d=>(d==null?void 0:d.display)==="percent"?"Ratio (%)":" (bn)"}),u.jsx(pr,{title:"LCR",subtitle:"Liquidity coverage components",rows:a,columns:[{id:"leg",label:"Leg",render:d=>{var g;return((g=d.meta)==null?void 0:g.leg)??""}},{id:"base",label:"Base",align:"right",render:d=>{var g;return((g=d.meta)==null?void 0:g.base)!==void 0?U(Number(d.meta.base)):""}},{id:"factor",label:"Factor",align:"right",render:d=>{var g;return Cu(Number((g=d.meta)==null?void 0:g.factor))}}],valueHeader:"Amount",valueFormatter:d=>d.display==="percent"?B(d.value):U(d.value),selectedId:o.lcr,onSelect:d=>c(g=>({...g,lcr:d})),isOpen:f.lcr,onToggle:()=>p(d=>({...d,lcr:!d.lcr})),yLabelForRow:d=>(d==null?void 0:d.display)==="percent"?"Ratio (%)":" (bn)"}),u.jsx(pr,{title:"Capital stack",subtitle:"CET1, AT1, and ratios",rows:s,columns:[{id:"type",label:"Type",render:d=>{var g;return((g=d.meta)==null?void 0:g.type)??""}}],valueHeader:"Value",valueFormatter:d=>d.display==="percent"?B(d.value):U(d.value),selectedId:o.capital,onSelect:d=>c(g=>({...g,capital:d})),isOpen:f.capital,onToggle:()=>p(d=>({...d,capital:!d.capital})),yLabelForRow:d=>(d==null?void 0:d.display)==="percent"?"Ratio (%)":" (bn)"})]})};j.Mortgages,j.CorporateLoans;const ca={[j.Mortgages]:"Mortgages",[j.CorporateLoans]:"Corporate Loans"},Xh={greenMax:.005,amberMax:.02},Zh={greenMax:.25,amberMax:.45},Jh={greenMax:.002,amberMax:.008},eg={greenMax:120,amberMax:300},wl=(e,t)=>Number.isFinite(e)?e<=t.greenMax?"rag-green":e<=t.amberMax?"rag-amber":"rag-red":"rag-amber",da=e=>Math.max(0,Math.floor(e.termMonths-e.ageMonths)),Sl=(e,t)=>{let n=0,r=0;return e.forEach(l=>{const i=Math.max(0,l.outstandingPrincipal??0),a=t(l);!Number.isFinite(i)||i<=0||Number.isFinite(a)&&(n+=i,r+=i*a)}),n>0?r/n:Number.NaN},fa=(e,t)=>{const n=e.trim().toLowerCase().replace(/,/g,"");if(!n)return null;const r=n.match(/^(.*?)(%|bn|m|k)$/);let l=n,i=1;if(r){l=r[1];const s=r[2];s==="%"&&(i=.01),s==="bn"&&(i=1e9),s==="m"&&(i=1e6),s==="k"&&(i=1e3)}else t==="percent"&&(i=.01),t==="billions"&&(i=1e9);const a=Number(l);return Number.isFinite(a)?a*i:null},pa=(e,t)=>{const n=e.trim();if(!n)return null;if(n.includes("..")){const[l,i]=n.split("..",2),a=fa(l,t),s=fa(i,t);return a===null||s===null?null:{kind:"range",min:Math.min(a,s),max:Math.max(a,s)}}const r=n.match(/^(<=|>=|<|>|=)\s*(.+)$/);if(r){const l=fa(r[2],t);return l===null?null:{kind:"cmp",op:r[1],value:l}}return null},ma=(e,t)=>Number.isFinite(e)?t.kind==="range"?e>=t.min&&e<=t.max:t.op===">"?e>t.value:t.op===">="?e>=t.value:t.op==="<"?e<t.value:t.op==="<="?e<=t.value:e===t.value:!1,kl=(e,t)=>{const n=Number.isFinite(e),r=Number.isFinite(t);return!n&&!r?0:n?r?e-t:-1:1},Nu=(e,t)=>e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"}),ju={product:"",balance:"",rate:"",maturity:""},bu={cohortId:"",ageMonths:"",remainingTermMonths:"",outstandingPrincipal:"",annualInterestRate:"",annualPd:"",lgd:"",pdxlgd:""},jn=[{key:"cohortId",label:"Cohort ID",filterUnit:"raw",placeholder:"e.g. >= 0",value:e=>e.cohortId,display:e=>Mn(e.cohortId),cell:e=>Mn(e.cohortId)},{key:"ageMonths",label:"Age (m)",filterUnit:"raw",placeholder:"e.g. > 12",value:e=>e.ageMonths,display:e=>Mn(e.ageMonths),cell:e=>Mn(e.ageMonths)},{key:"remainingTermMonths",label:"Remaining term (m)",filterUnit:"raw",placeholder:"e.g. < 60",value:e=>da(e),display:e=>Mn(da(e)),cell:e=>{const t=da(e);return u.jsx("span",{className:`rag-badge ${wl(t,eg)}`,children:Mn(t)})}},{key:"outstandingPrincipal",label:"Outstanding",filterUnit:"billions",placeholder:"bn (e.g. > 10)",value:e=>e.outstandingPrincipal,display:e=>U(e.outstandingPrincipal),cell:e=>U(e.outstandingPrincipal)},{key:"annualInterestRate",label:"Coupon",filterUnit:"percent",placeholder:"% (e.g. < 5)",value:e=>e.annualInterestRate,display:e=>$e(e.annualInterestRate),cell:e=>$e(e.annualInterestRate)},{key:"annualPd",label:"PD",filterUnit:"percent",placeholder:"% (e.g. > 2)",value:e=>e.annualPd,display:e=>$e(e.annualPd),cell:e=>u.jsx("span",{className:`rag-badge ${wl(e.annualPd,Xh)}`,children:$e(e.annualPd)})},{key:"lgd",label:"LGD",filterUnit:"percent",placeholder:"% (e.g. > 45)",value:e=>e.lgd,display:e=>$e(e.lgd),cell:e=>u.jsx("span",{className:`rag-badge ${wl(e.lgd,Zh)}`,children:$e(e.lgd)})},{key:"pdxlgd",label:"PDLGD",filterUnit:"percent",placeholder:"% (e.g. > 0.8)",value:e=>e.annualPd*e.lgd,display:e=>$e(e.annualPd*e.lgd),cell:e=>{const t=e.annualPd*e.lgd;return u.jsx("span",{className:`rag-badge ${wl(t,Jh)}`,children:$e(t)})}}],hi=(e,t,n)=>{var i;const r=e.some(a=>a.productType===n),l=((i=t==null?void 0:t[n])==null?void 0:i.length)??0;return r||l>0},Eu=(e,t)=>hi(e,t,j.Mortgages)?j.Mortgages:hi(e,t,j.CorporateLoans)?j.CorporateLoans:j.Mortgages,tg=e=>e.productType===j.Mortgages||e.productType===j.CorporateLoans,ng=({items:e,loanCohorts:t})=>{const n=$.useMemo(()=>e.filter(tg),[e]),r=$.useMemo(()=>n.reduce((w,L)=>w+L.balance,0),[n]),[l,i]=$.useState(()=>Eu(e,t)),a=$.useMemo(()=>hi(e,t,j.Mortgages),[e,t]),s=$.useMemo(()=>hi(e,t,j.CorporateLoans),[e,t]);$.useEffect(()=>{(l===j.Mortgages?a:s)||i(Eu(e,t))},[s,e,t,a,l]);const[o,c]=$.useState(null),[f,p]=$.useState(()=>({...ju})),d=$.useMemo(()=>Object.values(f).some(w=>w.trim()!==""),[f]),g=$.useMemo(()=>{const w=f.product.trim().toLowerCase(),L=f.maturity.trim().toLowerCase(),T=f.balance.trim(),I=f.rate.trim(),q=T?pa(T,"billions"):null,K=I?pa(I,"percent"):null;return n.filter(Q=>{if(w&&!Q.label.toLowerCase().includes(w)||L&&!String(Q.maturityBucket??"").toLowerCase().includes(L))return!1;if(T){if(q){if(!ma(Q.balance,q))return!1}else if(!U(Q.balance).toLowerCase().includes(T.toLowerCase()))return!1}if(I){if(K){if(!ma(Q.interestRate,K))return!1}else if(!$e(Q.interestRate).toLowerCase().includes(I.toLowerCase()))return!1}return!0})},[f,n]),x=$.useMemo(()=>{if(!o)return g;const w=o.direction==="asc"?1:-1,L=g.slice();return L.sort((T,I)=>o.key==="product"?Nu(T.label,I.label)*w:o.key==="maturity"?Nu(String(T.maturityBucket??""),String(I.maturityBucket??""))*w:o.key==="balance"?kl(T.balance,I.balance)*w:o.key==="rate"?kl(T.interestRate,I.interestRate)*w:0),L},[g,o]),[y,R]=$.useState(()=>({key:"cohortId",direction:"asc"})),[v,m]=$.useState(()=>({...bu})),h=$.useMemo(()=>Object.values(v).some(w=>w.trim()!==""),[v]),S=$.useMemo(()=>((t==null?void 0:t[l])??[]).filter(w=>w.productType===l),[t,l]),N=$.useMemo(()=>h?S.filter(w=>{var L;for(const T of jn){const I=((L=v[T.key])==null?void 0:L.trim())??"";if(!I)continue;const q=pa(I,T.filterUnit);if(q){if(!ma(T.value(w),q))return!1;continue}if(!T.display(w).toLowerCase().includes(I.toLowerCase()))return!1}return!0}):S,[v,h,S]),k=$.useMemo(()=>{const w=jn.find(I=>I.key===y.key);if(!w)return N;const L=y.direction==="asc"?1:-1,T=N.slice();return T.sort((I,q)=>{const K=kl(w.value(I),w.value(q));return K!==0?K*L:kl(I.cohortId,q.cohortId)}),T},[y,N]),C=$.useMemo(()=>{const w=k.length,L=k.reduce((Q,fe)=>Q+(fe.outstandingPrincipal??0),0),T=Sl(k,Q=>Q.annualInterestRate),I=Sl(k,Q=>Q.annualPd),q=Sl(k,Q=>Q.lgd),K=Sl(k,Q=>Q.annualPd*Q.lgd);return{cohortCount:w,totalOutstanding:L,weightedCoupon:T,weightedPd:I,weightedLgd:q,weightedRisk:K}},[k]);return u.jsxs("div",{className:"card stack",children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,flexWrap:"wrap"},children:[u.jsx("h3",{children:"Loan Portfolio"}),u.jsxs("div",{className:"tabs",role:"tablist","aria-label":"Loan portfolio selector",children:[u.jsx("button",{type:"button",className:`tab-button ${l===j.Mortgages?"active":""}`,onClick:()=>i(j.Mortgages),role:"tab","aria-selected":l===j.Mortgages,disabled:!a,children:ca[j.Mortgages]}),u.jsx("button",{type:"button",className:`tab-button ${l===j.CorporateLoans?"active":""}`,onClick:()=>i(j.CorporateLoans),role:"tab","aria-selected":l===j.CorporateLoans,disabled:!s,children:ca[j.CorporateLoans]})]})]}),u.jsxs("div",{className:"muted",children:["Total loans: ",u.jsx("strong",{children:U(r)})]}),u.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:10,flexWrap:"wrap"},children:u.jsx("button",{type:"button",className:"button small",onClick:()=>p({...ju}),disabled:!d,children:"Clear product filters"})}),u.jsxs("table",{className:"data-table clickable",children:[u.jsxs("thead",{children:[u.jsxs("tr",{children:[u.jsx("th",{children:u.jsxs("button",{type:"button",className:"table-sort-button",onClick:()=>c(w=>!w||w.key!=="product"?{key:"product",direction:"asc"}:{key:"product",direction:w.direction==="asc"?"desc":"asc"}),children:["Product",(o==null?void 0:o.key)==="product"&&u.jsx("span",{className:"table-sort-indicator",children:o.direction==="asc"?"":""})]})}),u.jsx("th",{className:"numeric",children:u.jsxs("button",{type:"button",className:"table-sort-button",onClick:()=>c(w=>!w||w.key!=="balance"?{key:"balance",direction:"asc"}:{key:"balance",direction:w.direction==="asc"?"desc":"asc"}),children:["Balance",(o==null?void 0:o.key)==="balance"&&u.jsx("span",{className:"table-sort-indicator",children:o.direction==="asc"?"":""})]})}),u.jsx("th",{className:"numeric",children:u.jsxs("button",{type:"button",className:"table-sort-button",onClick:()=>c(w=>!w||w.key!=="rate"?{key:"rate",direction:"asc"}:{key:"rate",direction:w.direction==="asc"?"desc":"asc"}),children:["Rate",(o==null?void 0:o.key)==="rate"&&u.jsx("span",{className:"table-sort-indicator",children:o.direction==="asc"?"":""})]})}),u.jsx("th",{children:u.jsxs("button",{type:"button",className:"table-sort-button",onClick:()=>c(w=>!w||w.key!=="maturity"?{key:"maturity",direction:"asc"}:{key:"maturity",direction:w.direction==="asc"?"desc":"asc"}),children:["Maturity",(o==null?void 0:o.key)==="maturity"&&u.jsx("span",{className:"table-sort-indicator",children:o.direction==="asc"?"":""})]})})]}),u.jsxs("tr",{className:"table-filter-row",children:[u.jsx("th",{children:u.jsx("input",{className:"table-filter-input",value:f.product,onChange:w=>p(L=>({...L,product:w.target.value})),placeholder:"Filter product","aria-label":"Filter loan products"})}),u.jsx("th",{className:"numeric",children:u.jsx("input",{className:"table-filter-input",value:f.balance,onChange:w=>p(L=>({...L,balance:w.target.value})),placeholder:"bn (e.g. > 10)","aria-label":"Filter balance (billions)"})}),u.jsx("th",{className:"numeric",children:u.jsx("input",{className:"table-filter-input",value:f.rate,onChange:w=>p(L=>({...L,rate:w.target.value})),placeholder:"% (e.g. < 5)","aria-label":"Filter rate (percent)"})}),u.jsx("th",{children:u.jsx("input",{className:"table-filter-input",value:f.maturity,onChange:w=>p(L=>({...L,maturity:w.target.value})),placeholder:"Filter maturity","aria-label":"Filter maturity bucket"})})]})]}),u.jsx("tbody",{children:x.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:4,children:u.jsx("span",{className:"muted",children:"No products match the current filters."})})}):x.map(w=>u.jsxs("tr",{className:w.productType===l?"active":void 0,onClick:()=>i(w.productType),children:[u.jsx("td",{children:w.label}),u.jsx("td",{className:"numeric",children:U(w.balance)}),u.jsx("td",{className:"numeric",children:$e(w.interestRate)}),u.jsx("td",{children:w.maturityBucket})]},w.productType))})]}),u.jsxs("div",{className:"stack",style:{marginTop:10},children:[u.jsxs("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"space-between",gap:12,flexWrap:"wrap"},children:[u.jsxs("h3",{style:{margin:0},children:["Cohort breakdown  ",ca[l]]}),u.jsxs("div",{className:"muted",style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[u.jsx("span",{className:"rag-badge rag-green",children:"Green safer"}),u.jsx("span",{className:"rag-badge rag-amber",children:"Amber middle"}),u.jsx("span",{className:"rag-badge rag-red",children:"Red riskier"})]})]}),S.length===0?u.jsx("div",{className:"muted",children:"No cohort data available for this portfolio."}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid-metrics",children:[u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-label",children:"Cohorts"}),u.jsx("div",{className:"metric-value",children:C.cohortCount}),h&&u.jsxs("div",{className:"metric-helper",children:["Showing ",C.cohortCount,"/",S.length]})]}),u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-label",children:"Outstanding"}),u.jsx("div",{className:"metric-value",children:U(C.totalOutstanding)})]}),u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-label",children:"WA coupon"}),u.jsx("div",{className:"metric-value",children:$e(C.weightedCoupon)})]}),u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-label",children:"WA PD"}),u.jsx("div",{className:"metric-value",children:$e(C.weightedPd)})]}),u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-label",children:"WA LGD"}),u.jsx("div",{className:"metric-value",children:$e(C.weightedLgd)})]}),u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-label",children:"WA PDLGD"}),u.jsx("div",{className:"metric-value",children:$e(C.weightedRisk)})]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,flexWrap:"wrap"},children:[u.jsxs("div",{className:"muted",children:["Click column headers to sort. Filters support ",u.jsx("code",{children:">"}),", ",u.jsx("code",{children:"<"}),", and ranges (",u.jsx("code",{children:".."}),"); rates in %, outstanding in bn."]}),u.jsx("button",{type:"button",className:"button small",onClick:()=>m({...bu}),disabled:!h,children:"Clear cohort filters"})]}),u.jsxs("table",{className:"data-table",children:[u.jsxs("thead",{children:[u.jsx("tr",{children:jn.map(w=>u.jsx("th",{className:"numeric",children:u.jsxs("button",{type:"button",className:"table-sort-button",onClick:()=>R(L=>L.key!==w.key?{key:w.key,direction:"asc"}:{key:w.key,direction:L.direction==="asc"?"desc":"asc"}),children:[w.label,y.key===w.key&&u.jsx("span",{className:"table-sort-indicator",children:y.direction==="asc"?"":""})]})},w.key))}),u.jsx("tr",{className:"table-filter-row",children:jn.map(w=>u.jsx("th",{className:"numeric",children:u.jsx("input",{className:"table-filter-input",value:v[w.key],onChange:L=>m(T=>({...T,[w.key]:L.target.value})),placeholder:w.placeholder,"aria-label":`Filter ${w.label}`})},w.key))})]}),u.jsx("tbody",{children:k.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:jn.length,children:u.jsx("span",{className:"muted",children:"No cohorts match the current filters."})})}):k.map(w=>u.jsx("tr",{children:jn.map(L=>u.jsx("td",{className:"numeric",children:L.cell(w)},L.key))},`${w.productType}-${w.cohortId}`))})]})]})]})]})},rg=({income:e})=>u.jsxs("div",{className:"card stack",children:[u.jsx("h3",{children:"Costs & P&L (Monthly)"}),u.jsx("table",{className:"data-table",children:u.jsxs("tbody",{children:[u.jsx(At,{label:"Interest Income",value:U(e.interestIncome)}),u.jsx(At,{label:"Interest Expense",value:U(e.interestExpense)}),u.jsx(At,{label:"Net Interest Income",value:U(e.netInterestIncome),bold:!0}),u.jsx(At,{label:"Fees",value:U(e.feeIncome)}),u.jsx(At,{label:"Credit Losses",value:U(e.creditLosses)}),u.jsx(At,{label:"Operating Expenses",value:U(e.operatingExpenses)}),u.jsx(At,{label:"Tax",value:U(e.tax)}),u.jsx(At,{label:"Net Income",value:U(e.netIncome),bold:!0})]})})]}),At=({label:e,value:t,bold:n})=>u.jsxs("tr",{children:[u.jsx("td",{children:e}),u.jsx("td",{className:"numeric",style:{fontWeight:n?700:500},children:t})]}),lg=e=>({items:e.items.map(t=>({...t,liquidityTag:{...t.liquidityTag},encumbrance:t.encumbrance?{...t.encumbrance}:{encumberedAmount:0}}))}),ig=e=>({...e}),ag=e=>({...e}),sg=e=>({...e}),og=e=>({...e}),ug=e=>({...e}),cg=e=>({...e,giltCurve:{...e.giltCurve,nelsonSiegel:{...e.giltCurve.nelsonSiegel},yields:{...e.giltCurve.yields}},macroModel:{...e.macroModel,factors:{...e.macroModel.factors}}}),dg=e=>{const t={};return Object.entries(e??{}).forEach(([r,l])=>{t[r]=(l??[]).map(i=>({...i}))}),t},fg=e=>e instanceof Date?new Date(e.getTime()):new Date(e),gi=e=>({...e,version:e.version??"v1",time:{...e.time,date:fg(e.time.date)},balanceSheet:lg(e.balanceSheet),capital:{...e.capital},incomeStatement:ig(e.incomeStatement),cashFlowStatement:ag(e.cashFlowStatement),riskMetrics:sg(e.riskMetrics),compliance:og(e.compliance),market:cg(e.market),behaviour:ug(e.behaviour),loanCohorts:dg(e.loanCohorts)});function tf(e){const t=[],n=e.balanceSheet.items.filter(o=>o.side===A.Asset).reduce((o,c)=>o+c.balance,0),r=e.balanceSheet.items.filter(o=>o.side===A.Liability).reduce((o,c)=>o+c.balance,0),l=e.capital.cet1+e.capital.at1,i=n-(r+l);return Math.abs(i)>1&&t.push(`Balance sheet not balanced by ${i}`),e.balanceSheet.items.filter(o=>o.balance<-1e-6).forEach(o=>{t.push(`Negative balance on ${o.productType}: ${o.balance}`)}),[{name:"CET1",value:e.riskMetrics.cet1Ratio},{name:"Leverage",value:e.riskMetrics.leverageRatio},{name:"LCR",value:e.riskMetrics.lcr},{name:"NSFR",value:e.riskMetrics.nsfr}].forEach(o=>{(Number.isNaN(o.value)||o.value===-1/0)&&t.push(`${o.name} ratio is invalid (${o.value})`)}),t}const hr={adjustRate:(e,t,n,r)=>{gg(Ce(e.balanceSheet,n.productType),n.newRate),r.push(G("info",`Adjusted rate for ${n.productType} to ${n.newRate.toFixed(4)}`))},issueEquity:(e,t,n,r)=>{vg(e,n.amount,r)},issueDebt:(e,t,n,r)=>{yg(e,t,n.productType,n.amount,n.rate,r)},buySellAsset:(e,t,n,r)=>{xg(e,t,n.productType,n.amountDelta,r)},enterRepo:(e,t,n,r)=>{wg(e,t,n.direction,n.collateralProduct,n.amount,n.haircut,n.rate??e.market.baseRate,r)}},pg=(e,t,n,r)=>{switch(n.type){case"adjustRate":hr.adjustRate(e,t,n,r);break;case"issueEquity":hr.issueEquity(e,t,n,r);break;case"issueDebt":hr.issueDebt(e,t,n,r);break;case"buySellAsset":hr.buySellAsset(e,t,n,r);break;case"enterRepo":hr.enterRepo(e,t,n,r);break;default:r.push(G("warning",`No handler for action type ${n.type}`))}},gr={depositCompetition:(e,t)=>{t.state.market.competitorRetailDepositRate+=e.retailRateIncrease,e.corporateRateIncrease!==void 0&&(t.state.market.competitorCorporateDepositRate=(t.state.market.competitorCorporateDepositRate??t.state.market.competitorRetailDepositRate)+e.corporateRateIncrease),t.events.push(G("info",`Shock: deposit competition +${e.retailRateIncrease}`))},marketSpreadShock:(e,t)=>{const n=e.wholesaleSpreadBps/1e4;t.state.market.wholesaleFundingSpread+=n,t.state.market.seniorDebtSpread+=n,t.state.market.corporateLoanSpread+=e.loanSpreadBps/1e4,t.state.market.creditSpread+=n,t.state.market.giltRepoHaircut+=e.repoHaircutIncreasePct,t.events.push(G("warning",`Shock: market spread widen +${e.wholesaleSpreadBps}bps`))},idiosyncraticRun:(e,t)=>{t.lcrOutflowMultiplier.value*=e.outflowRateMultiplier;const n=Ce(t.state.balanceSheet,E.RetailDeposits),r=Ce(t.state.balanceSheet,E.CorporateDeposits),l=t.config.shockParameters.idiosyncraticRun,i=l.baseRunOffRate,a=Math.max(0,e.outflowRateMultiplier-1)*l.incrementalRate,s=Math.min(l.maxRunOffRate,i+a),o=n?n.balance*s:0,c=r?r.balance*s:0,f=o+c,p=nf(t.state,f,t.events),d=f>0?f:1,g=n?p*o/d:0,x=Math.min(p,Math.max(0,g)),y=r?Math.max(0,p-x):0;n&&(n.balance-=x,t.events.push(G("warning",`Idiosyncratic run reduced retail deposits by ${x.toFixed(2)} (${(s*100).toFixed(1)}%)`)),x<o&&t.events.push(G("error",`Unmet retail withdrawal demand: ${(o-x).toFixed(2)}`))),r&&(r.balance-=y,t.events.push(G("warning",`Idiosyncratic run reduced corporate deposits by ${y.toFixed(2)} (${(s*100).toFixed(1)}%)`)),y<c&&t.events.push(G("error",`Unmet corporate withdrawal demand: ${(c-y).toFixed(2)}`))),t.events.push(G("warning",`Shock: idiosyncratic run multiplier ${e.outflowRateMultiplier}`))},macroDownturn:(e,t)=>{t.pdMultiplier.value*=e.pdMultiplier,t.lgdMultiplier.value*=e.lgdMultiplier,t.events.push(G("warning",`Shock: macro downturn PDx${e.pdMultiplier} LGDx${e.lgdMultiplier}`))},counterpartyDefault:(e,t)=>{Sg(e,t.extraLosses,t.events)}},mg=(e,t)=>{switch(e.type){case"depositCompetition":gr.depositCompetition(e,t);break;case"marketSpreadShock":gr.marketSpreadShock(e,t);break;case"idiosyncraticRun":gr.idiosyncraticRun(e,t);break;case"macroDownturn":gr.macroDownturn(e,t);break;case"counterpartyDefault":gr.counterpartyDefault(e,t);break;default:t.events.push(G("warning",`No handler for shock type ${e.type}`))}},G=(e,t)=>({severity:e,message:t,timestamp:Date.now()}),hg=12,cs=(e,t,n)=>Math.min(Math.max(e,t),n),Ce=(e,t)=>e.items.find(n=>n.productType===t),co=(e,t,n)=>{const r=Ce(e.balanceSheet,j.CashReserves);if(!r||(r.balance+=t,r.balance>=0))return;const l=-r.balance;r.balance=0,e.hasFailed=!0,n.push(G("error",`Cash balance breached: short by ${l.toFixed(2)} after flow`))},nf=(e,t,n)=>{if(t<=0)return 0;const r=Ce(e.balanceSheet,j.CashReserves);if(!r)return 0;const l=Math.max(0,Math.min(t,r.balance));r.balance-=l;const i=t-l;return i<=0||(e.hasFailed=!0,n.push(G("error",`Cash balance breached: short by ${i.toFixed(2)} after outflow`))),l},gg=(e,t)=>{e&&(e.interestRate=t)},vg=(e,t,n)=>{e.capital.cet1+=t;const r=Ce(e.balanceSheet,j.CashReserves);r&&(r.balance+=t),n.push(G("info",`Issued equity: +${t.toFixed(2)} CET1 and cash`))},ds=(e,t,n,r)=>e+n===0?r:(e*t+n*r)/(e+n),yg=(e,t,n,r,l,i)=>{const a=Ce(e.balanceSheet,j.CashReserves);if(!a)return;const s=l??(n===E.WholesaleFundingST?e.market.riskFreeShort+e.market.wholesaleFundingSpread:e.market.riskFreeLong+e.market.seniorDebtSpread),o=n===E.WholesaleFundingST?"Wholesale Funding ST":"Wholesale Funding LT",c=fs(e,A.Liability,n,o,s,t);c.interestRate=ds(c.balance,c.interestRate,r,s),c.balance+=r,a.balance+=r,i.push(G("info",`Issued debt ${n}: +${r.toFixed(2)} balance at rate ${c.interestRate.toFixed(4)}`))},xg=(e,t,n,r,l)=>{var s,o;const i=Ce(e.balanceSheet,n),a=Ce(e.balanceSheet,j.CashReserves);if(!(!i||!a)){if((o=(s=et[n])==null?void 0:s.behaviour)!=null&&o.isLoan){const c=t.productParameters[n];if(r>=0){const f=r,p=Vd({state:e,config:t,productType:n,cohortId:e.time.step,principal:f,annualInterestRate:i.interestRate,annualPd:c.baseDefaultRate,lgd:c.lossGivenDefault});p+1e-6<f&&l.push(G("warning",`Insufficient cash to buy ${n}: requested ${f.toFixed(2)}, executed ${p.toFixed(2)}`)),l.push(G("info",`Bought ${n}: +${p.toFixed(2)}, cash -${p.toFixed(2)}`))}else{const f=Math.abs(r),p=qd({state:e,productType:n,amount:f});l.push(G("info",`Sold ${n}: -${p.toFixed(2)}, cash +${p.toFixed(2)}`))}return}if(r>=0){const c=Math.min(r,Math.max(0,a.balance));i.balance+=c,a.balance-=c,c<r&&l.push(G("warning",`Insufficient cash to buy ${n}: requested ${r.toFixed(2)}, executed ${c.toFixed(2)}`)),l.push(G("info",`Bought ${n}: +${c.toFixed(2)}, cash -${c.toFixed(2)}`))}else{const c=Math.min(i.balance,Math.abs(r));i.balance-=c,co(e,c,l),l.push(G("info",`Sold ${n}: -${c.toFixed(2)}, cash +${c.toFixed(2)}`))}}},fs=(e,t,n,r,l,i)=>{const a=Ce(e.balanceSheet,n);if(a)return a;const s={side:t,productType:n,label:r,currency:so.GBP,balance:0,interestRate:l,maturityBucket:Xe.LessThan1Y,liquidityTag:i.liquidityTags[n],encumbrance:{encumberedAmount:0}};return e.balanceSheet.items.push(s),s},wg=(e,t,n,r,l,i,a,s)=>{var c;const o=Ce(e.balanceSheet,j.CashReserves);if(o)if(n==="borrow"){const f=Ce(e.balanceSheet,r),d=1+Math.max(0,i??0),g=f?Math.max(0,f.balance-(((c=f.encumbrance)==null?void 0:c.encumberedAmount)??0)):0,x=d>0?g/d:0,y=Math.min(l,x);if(y<=0){s.push(G("warning",`Repo borrow failed: insufficient unencumbered ${r}`));return}const R=fs(e,A.Liability,E.RepurchaseAgreements,"Repo Borrowing",a,t);if(R.interestRate=ds(R.balance,R.interestRate,y,a),R.balance+=y,o.balance+=y,f){const h=Math.min(f.balance,y*d);f.encumbrance||(f.encumbrance={encumberedAmount:0}),f.encumbrance.encumberedAmount=cs((f.encumbrance.encumberedAmount??0)+h,0,f.balance)}const m=y+1e-9<l?`+${y.toFixed(2)} funding (requested ${l.toFixed(2)})`:`+${y.toFixed(2)} funding`;s.push(G("info",`Repo borrow: ${m}, collateral ${r} encumbered`))}else{const f=fs(e,A.Asset,j.ReverseRepo,"Reverse Repo",a,t),p=Math.min(o.balance,l);f.interestRate=ds(f.balance,f.interestRate,p,a),f.balance+=p,o.balance-=p,s.push(G("info",`Repo lend: -${p.toFixed(2)} cash, +reverse repo asset`))}},Sg=(e,t,n)=>{const r=t[e.productType]??0,l=Math.max(0,e.lossAmount);t[e.productType]=r+l,n.push(G("warning",`Counterparty default on ${e.productType}: loss ${l.toFixed(2)}`))},kg=(e,t,n,r)=>{const l={},i={value:1},a={value:1},s={value:1},o={state:e,config:t,events:r,pdMultiplier:i,lgdMultiplier:a,lcrOutflowMultiplier:s,extraLosses:l};return n.forEach(c=>mg(c,o)),{pdMultiplier:i.value,lgdMultiplier:a.value,lcrOutflowMultiplier:s.value,extraLosses:l}},Rg=(e,t,n,r)=>{n.forEach(l=>pg(e,t,l,r))},Mg=(e,t,n,r)=>{const l=t.behaviour.depositBaselineGrowthMonthly,i=t.behaviour.loanBaselineGrowthMonthly;e.balanceSheet.items.filter(a=>{var s,o,c,f;return((o=(s=et[a.productType])==null?void 0:s.behaviour)==null?void 0:o.affectsBehaviouralDepositFlow)&&((f=(c=et[a.productType])==null?void 0:c.behaviour)==null?void 0:f.isCustomerDeposit)}).forEach(a=>{const s=et[a.productType],o=s.behaviour.depositSegment==="corporate"?e.market.competitorCorporateDepositRate??e.market.competitorRetailDepositRate:e.market.competitorRetailDepositRate,c=a.interestRate-o,f=t.productParameters[a.productType].volumeElasticityToRate;let p=l+f*c;p=cs(p,t.behaviour.minDepositGrowthPerStep,t.global.maxDepositGrowthPerStep);const d=Math.max(0,1+p*n),g=a.balance,x=g*d,y=x-g;if(y>=0)a.balance=x,co(e,y,r);else{const R=-y,v=nf(e,R,r);a.balance=g-v,v<R&&r.push(G("error",`Unmet deposit withdrawal demand for ${s.label}: ${(R-v).toFixed(2)}`))}r.push(G("info",`Behaviour: ${s.label} growth ${(d-1).toFixed(4)} this step`))}),e.balanceSheet.items.filter(a=>{var s,o,c,f;return((o=(s=et[a.productType])==null?void 0:s.behaviour)==null?void 0:o.affectsBehaviouralLoanFlow)&&((f=(c=et[a.productType])==null?void 0:c.behaviour)==null?void 0:f.isLoan)}).forEach(a=>{const s=et[a.productType],o=s.behaviour.loanBenchmark==="mortgage"?e.market.competitorMortgageRate:e.market.riskFreeLong+e.market.corporateLoanSpread,c=a.interestRate-o,f=t.productParameters[a.productType].volumeElasticityToRate;let p=i+f*c;p=cs(p,t.behaviour.minLoanGrowthPerStep,t.global.maxLoanGrowthPerStep);const d=Math.max(0,1+p*n),g=a.balance;let y=g*d-g;const R=t.productParameters[a.productType];if(y>0){const v=Ce(e.balanceSheet,j.CashReserves),m=Math.max(0,(v==null?void 0:v.balance)??0),h=Math.min(y,m),S=Vd({state:e,config:t,productType:a.productType,cohortId:e.time.step,principal:h,annualInterestRate:a.interestRate,annualPd:R.baseDefaultRate,lgd:R.lossGivenDefault});S+1e-6<h&&r.push(G("warning",`Insufficient cash to originate ${s.label}: requested ${h.toFixed(2)}, executed ${S.toFixed(2)}`))}else y<0&&qd({state:e,productType:a.productType,amount:Math.abs(y)});r.push(G("info",`Behaviour: ${s.label} growth ${(d-1).toFixed(4)} this step`))})},Cg=(e,t)=>{const n=e.balanceSheet.items.filter(a=>a.side===A.Asset),r=e.balanceSheet.items.filter(a=>a.side===A.Liability),l=n.filter(a=>{var s,o;return!((o=(s=et[a.productType])==null?void 0:s.behaviour)!=null&&o.isLoan)}).reduce((a,s)=>a+s.balance*s.interestRate*t,0),i=r.reduce((a,s)=>a+s.balance*s.interestRate*t,0);return{assets:n,liabilities:r,interestIncome:l,interestExpense:i}},Ng=(e,t,n,r)=>{const l=e.balanceSheet.items.filter(o=>{var c,f;return(f=(c=et[o.productType])==null?void 0:c.behaviour)==null?void 0:f.isLoan}),i={},a={...r};let s=Object.values(a).reduce((o,c)=>o+(c??0),0);return Object.entries(n.extraLosses).forEach(([o,c])=>{var g;const f=et[o];if((g=f==null?void 0:f.behaviour)!=null&&g.isLoan)return;const p=Ce(e.balanceSheet,o),d=p?Math.min(p.balance,c):0;d>0&&(i[o]=d),s+=d}),Object.entries(n.extraLosses).forEach(([o])=>{var p;const c=et[o];if((p=c==null?void 0:c.behaviour)!=null&&p.isLoan)return;const f=Ce(e.balanceSheet,o);if(f){const d=i[o]??0;f.balance=Math.max(0,f.balance-d)}}),{loanItems:l,recognizedLoanLosses:a,recognizedNonLoanLosses:i,creditLosses:s}},jg=(e,t,n,r,l,i,a,s)=>{const o=i.loanItems.reduce((h,S)=>h+S.balance,0),c=l.assets.reduce((h,S)=>h+S.balance,0),f=t.behaviour.loanFeeRateMonthly*n*o,p=t.global.operatingCostRatio*c*r+(t.global.fixedOperatingCostPerMonth??0)*n,d=l.interestIncome+a,g=d-l.interestExpense,x=g+f-i.creditLosses-p,y=x>0?x*t.global.taxRate:0,R=x-y;e.incomeStatement={interestIncome:d,interestExpense:l.interestExpense,netInterestIncome:g,feeIncome:f,creditLosses:i.creditLosses,operatingExpenses:p,preTaxProfit:x,tax:y,netIncome:R},e.capital.cet1+=R;const v=d-l.interestExpense+f-p-y,m=v-a;return co(e,m,s),{feeIncome:f,operatingExpenses:p,tax:y,netIncome:R,operatingCashDelta:v,operatingCashDeltaApplied:m,loanInterestIncome:a}},bg=(e,t,n,r)=>{const l=Di({state:e,config:t,lcrOutflowMultiplier:n});e.riskMetrics=l,e.compliance=$i(l,t.riskLimits),e.hasFailed=e.hasFailed||e.compliance.cet1Breached||e.compliance.leverageBreached||e.compliance.lcrBreached||e.compliance.nsfrBreached,e.hasFailed&&r.push(G("error","Regulatory breach: your bank has failed!"))},Eg=(e,t,n,r,l,i)=>{var T;t.time={step:t.time.step+1,stepLengthMonths:t.time.stepLengthMonths,date:new Date(t.time.date.getTime()+t.time.stepLengthMonths*30*24*60*60*1e3)};const a=((T=Ce(t.balanceSheet,j.CashReserves))==null?void 0:T.balance)??0,s=a-r,o={},c={};e.balanceSheet.items.forEach(I=>{o[I.productType]=I.balance,c[I.productType]=I.side});const f={},p={};t.balanceSheet.items.forEach(I=>{f[I.productType]=I.balance,p[I.productType]=I.side});const d=new Set([...Object.keys(o),...Object.keys(f)]),g={};Object.entries(i.recognizedLoanLosses).forEach(([I,q])=>{const K=I;g[K]=(g[K]??0)+(q??0)}),Object.entries(i.recognizedNonLoanLosses).forEach(([I,q])=>{const K=I;g[K]=(g[K]??0)+(q??0)});const x=new Set([E.RetailDeposits,E.CorporateDeposits,E.WholesaleFundingST,E.RepurchaseAgreements]),y=new Set([j.Gilts]);let R=0,v=0,m=0;d.forEach(I=>{const q=p[I]??c[I];if(!q)return;const K=f[I]??0,Q=o[I]??0;if(q===A.Asset){if(I===j.CashReserves)return;const fe=K-Q,Te=g[I]??0,M=-(fe+Te);y.has(I)?v+=M:R+=M}else{const Te=K-Q;x.has(I)?R+=Te:m+=Te}});const h=v,N=t.capital.cet1+t.capital.at1-(e.capital.cet1+e.capital.at1)-l.netIncome,k=m+N;let C=l.operatingCashDelta+R,w=C+h+k-s;Math.abs(w)<=n.tolerances.cashFlowRoundingTolerance&&(C-=w,w=0);const L={cashStart:r,cashEnd:a,netChange:s,operatingCashFlow:C,investingCashFlow:h,financingCashFlow:k};return t.cashFlowStatement=L,{cashFlowStatement:L,cfMismatch:w}},Tg=(e,t,n,r)=>{tf(e).forEach(l=>{n.push(G("error",`Invariant violated: ${l}`)),e.hasFailed=!0}),Math.abs(r.cfMismatch)>t.tolerances.cashFlowBreachThreshold&&(n.push(G("error",`Cash flow statement mismatch: operating ${r.cashFlowStatement.operatingCashFlow.toFixed(2)} + investing ${r.cashFlowStatement.investingCashFlow.toFixed(2)} + financing ${r.cashFlowStatement.financingCashFlow.toFixed(2)} != net change ${r.cashFlowStatement.netChange.toFixed(2)} (diff ${r.cfMismatch.toFixed(6)})`)),e.hasFailed=!0)},rf=()=>({step:t=>{var v;const{state:n,config:r,actions:l,shocks:i}=t,a=gi(n),s=[],o=a.time.stepLengthMonths,c=o/hg,f=((v=Ce(n.balanceSheet,j.CashReserves))==null?void 0:v.balance)??0;Ii(a);const p=kg(a,r,i,s);Rg(a,r,l,s),Mg(a,r,o,s);const d=mh({state:a,config:r,dtMonths:o,pdMultiplier:p.pdMultiplier,lgdMultiplier:p.lgdMultiplier,extraLossesByProduct:p.extraLosses}),g=Cg(a,c),x=Ng(a,r,p,d.recognizedLoanLosses),y=jg(a,r,o,c,g,x,d.loanInterestIncome,s);bg(a,r,p.lcrOutflowMultiplier,s);const R=Eg(n,a,r,f,y,x);return Tg(a,r,s,R),uh(a.market,o),{nextState:a,events:s}}}),lf=(e={})=>({engine:e.engine??rf(),config:e.config??pt,createState:e.createState??(()=>gi(pi))}),O=e=>`${(e/1e9).toFixed(2)}bn`,me=e=>`${(e*100).toFixed(2)}%`,Al=(e,t)=>{const n=e.balanceSheet.items.find(r=>r.productType===t);if(!n)throw new Error(`Missing balance sheet line for ${t}`);return n},Le=(e,t)=>Al(e,t).balance,Fe=(e,t,n=[],r=[])=>e.engine.step({state:t,config:e.config,actions:n,shocks:r}).nextState,we=(e,t)=>{const n=tf(e);if(n.length>0)throw new Error(`Invariant violations (${t}): ${n.join("; ")}`);const r=.001,l=e.cashFlowStatement,i=l.cashStart+l.netChange-l.cashEnd;if(Math.abs(i)>r)throw new Error(`Cash rollforward mismatch (${t}): start ${l.cashStart.toFixed(2)} + net change ${l.netChange.toFixed(2)} != end ${l.cashEnd.toFixed(2)} (diff ${i.toFixed(6)})`);const a=l.operatingCashFlow+l.investingCashFlow+l.financingCashFlow-l.netChange;if(Math.abs(a)>r)throw new Error(`Cash flow statement mismatch (${t}): operating ${l.operatingCashFlow.toFixed(2)} + investing ${l.investingCashFlow.toFixed(2)} + financing ${l.financingCashFlow.toFixed(2)} != net change ${l.netChange.toFixed(2)} (diff ${a.toFixed(6)})`)},vi=[{id:"retail-rate-advantage",group:"Simulation engine",name:"increasing retail deposit rate above competitor increases retail balances vs equal rate",run:e=>{const t=e.createState();Al(t,E.RetailDeposits).interestRate=t.market.competitorRetailDepositRate;const n=Fe(e,t);we(n,"baseline");const r=e.createState(),l=Fe(e,r,[{type:"adjustRate",productType:E.RetailDeposits,newRate:r.market.competitorRetailDepositRate+.01}]);we(l,"advantaged");const i=Le(n,E.RetailDeposits),a=Le(l,E.RetailDeposits);if(a<=i)throw new Error(`Retail balances did not improve with higher rate (${O(a)} <= ${O(i)})`);return`Retail deposits baseline ${O(i)} vs advantaged ${O(a)}`}},{id:"sell-gilts-lower-lcr",group:"Simulation engine",name:"selling gilts increases cash but leaves HQLA/LCR roughly unchanged (cash is also HQLA)",run:e=>{const t=Fe(e,e.createState());we(t,"baseline");const n=Fe(e,e.createState(),[{type:"buySellAsset",productType:j.Gilts,amountDelta:-1e10}]);we(n,"after sale");const r=Le(t,j.CashReserves),l=Le(n,j.CashReserves);if(l<=r)throw new Error(`Cash did not rise after selling gilts (${O(l)} <= ${O(r)})`);const i=Math.abs(n.riskMetrics.hqla-t.riskMetrics.hqla),a=Math.abs(n.riskMetrics.lcr-t.riskMetrics.lcr),s=Math.max(t.riskMetrics.hqla*.001,1e6),o=1e-4;if(i>s)throw new Error(`HQLA changed after selling gilts (${O(n.riskMetrics.hqla)} vs ${O(t.riskMetrics.hqla)})`);if(a>o)throw new Error(`LCR moved after selling gilts (${me(n.riskMetrics.lcr)} vs ${me(t.riskMetrics.lcr)})`);return`Cash ${O(r)} -> ${O(l)}, HQLA unchanged ${O(t.riskMetrics.hqla)}, LCR ${me(t.riskMetrics.lcr)}`}},{id:"macro-downturn-capital-hit",group:"Simulation engine",name:"macro downturn shock with high PD/LGD multipliers reduces CET1 and CET1 ratio",run:e=>{const t=Fe(e,e.createState());we(t,"baseline");const n=Fe(e,e.createState(),[],[{type:"macroDownturn",pdMultiplier:3,lgdMultiplier:2}]);if(we(n,"stressed"),n.capital.cet1>=t.capital.cet1)throw new Error(`CET1 did not fall under downturn (${O(n.capital.cet1)} >= ${O(t.capital.cet1)})`);if(n.riskMetrics.cet1Ratio>=t.riskMetrics.cet1Ratio)throw new Error(`CET1 ratio did not fall (${me(n.riskMetrics.cet1Ratio)} >= ${me(t.riskMetrics.cet1Ratio)})`);return`CET1 ${O(t.capital.cet1)} -> ${O(n.capital.cet1)}, ratio ${me(t.riskMetrics.cet1Ratio)} -> ${me(n.riskMetrics.cet1Ratio)}`}},{id:"random-rate-tweaks-balanced",group:"Targeted invariants and behaviours",name:"balance sheet stays balanced after 30 random rate tweaks",run:e=>{let t=e.createState();const n=[];let r=42;const l=()=>(r=r*48271%2147483647,r/2147483647),i=.001,a=30;for(let s=0;s<a;s++){n.length=0,n.push({type:"adjustRate",productType:E.RetailDeposits,newRate:t.market.competitorRetailDepositRate+(l()-.5)*i}),n.push({type:"adjustRate",productType:j.Mortgages,newRate:Al(t,j.Mortgages).interestRate+(l()-.5)*i});const o=Fe(e,t,n);we(o,`step ${s+1}`),t=o}return`${a} random rate iterations kept invariants satisfied`}},{id:"wholesale-funding-lowers-liquidity",group:"Targeted invariants and behaviours",name:"raising ST wholesale funding and buying mortgages reduces LCR and NSFR",run:e=>{const t=Fe(e,e.createState());we(t,"baseline");const n=Fe(e,e.createState(),[{type:"issueDebt",productType:E.WholesaleFundingST,amount:2e10,rate:.055},{type:"buySellAsset",productType:j.Mortgages,amountDelta:2e10}]);if(we(n,"stressed"),n.riskMetrics.lcr>=t.riskMetrics.lcr||n.riskMetrics.nsfr>=t.riskMetrics.nsfr)throw new Error(`Liquidity ratios not lower (LCR ${me(n.riskMetrics.lcr)} vs ${me(t.riskMetrics.lcr)}, NSFR ${me(n.riskMetrics.nsfr)} vs ${me(t.riskMetrics.nsfr)})`);return`LCR ${me(t.riskMetrics.lcr)} -> ${me(n.riskMetrics.lcr)}, NSFR ${me(t.riskMetrics.nsfr)} -> ${me(n.riskMetrics.nsfr)}`}},{id:"mortgage-rate-elasticity",group:"Targeted invariants and behaviours",name:"raising mortgage rate 100bps above reference reduces mortgage volume vs baseline",run:e=>{const t=e.createState(),n=Fe(e,t,[{type:"adjustRate",productType:j.Mortgages,newRate:t.market.competitorMortgageRate}]);we(n,"baseline");const r=e.createState(),l=Fe(e,r,[{type:"adjustRate",productType:j.Mortgages,newRate:r.market.competitorMortgageRate+.01}]);we(l,"adjusted");const i=Le(n,j.Mortgages),a=Le(l,j.Mortgages);if(a>=i)throw new Error(`Mortgage volume did not fall (${O(a)} >= ${O(i)})`);return`Mortgage balance ${O(i)} -> ${O(a)}`}},{id:"idiosyncratic-run-lcr",group:"Targeted invariants and behaviours",name:"idiosyncratic run reduces deposits and worsens LCR",run:e=>{const t=Fe(e,e.createState());we(t,"baseline");const n=Fe(e,e.createState(),[],[{type:"idiosyncraticRun",outflowRateMultiplier:1.5}]);we(n,"run");const r=Le(t,E.RetailDeposits),l=Le(n,E.RetailDeposits),i=Le(t,E.CorporateDeposits),a=Le(n,E.CorporateDeposits);if(l>=r||a>=i)throw new Error(`Deposits did not fall in run (retail ${O(l)} vs ${O(r)}, corporate ${O(a)} vs ${O(i)})`);if(n.riskMetrics.lcr>=t.riskMetrics.lcr)throw new Error(`LCR did not worsen (${me(n.riskMetrics.lcr)} >= ${me(t.riskMetrics.lcr)})`);return`Retail ${O(r)} -> ${O(l)}, Corporate ${O(i)} -> ${O(a)}, LCR ${me(t.riskMetrics.lcr)} -> ${me(n.riskMetrics.lcr)}`}},{id:"repo-borrow-encumbrance",group:"Targeted invariants and behaviours",name:"repo borrow creates repo line, increases cash, and encumbers collateral",run:e=>{const t=e.createState(),n=5e9,r=t.balanceSheet.items.find(c=>c.productType===j.Gilts);if(!r)throw new Error("Missing gilts line for repo test");const{nextState:l}=e.engine.step({state:t,config:e.config,actions:[{type:"enterRepo",direction:"borrow",collateralProduct:j.Gilts,amount:n,rate:.03}],shocks:[]});we(l,"after repo");const i=Le(t,j.CashReserves),a=Le(l,j.CashReserves),s=l.balanceSheet.items.find(c=>c.productType===E.RepurchaseAgreements),o=l.balanceSheet.items.find(c=>c.productType===j.Gilts);if(!s)throw new Error("Repo liability line missing after trade");if(!o)throw new Error("Gilts line missing after repo");if(a<=i)throw new Error(`Cash did not increase (${O(a)} <= ${O(i)})`);if(s.balance<n)throw new Error(`Repo line smaller than expected (${O(s.balance)} < ${O(n)})`);if(o.encumbrance.encumberedAmount<=r.encumbrance.encumberedAmount)throw new Error("Collateral encumbrance did not rise after repo");return`Cash ${O(i)} -> ${O(a)}, encumbrance ${O(r.encumbrance.encumberedAmount)} -> ${O(o.encumbrance.encumberedAmount)}`}},{id:"counterparty-default-loss",group:"Targeted invariants and behaviours",name:"counterparty default reduces corporate loans roughly by the loss once (no double count)",run:e=>{const t=e.createState(),n=1e10,r={type:"counterpartyDefault",productType:j.CorporateLoans,lossAmount:n},l=Fe(e,gi(t));we(l,"baseline");const i=Fe(e,gi(t),[],[r]);we(i,"after default");const a=Le(l,j.CorporateLoans),s=Le(i,j.CorporateLoans),o=a-s;if(o<=n*.8||o>=n*1.2)throw new Error(`Loss recognition out of bounds (${O(o)} vs expected ~${O(n)})`);return`Corporate loans incremental reduction ${O(o)} (expected ~${O(n)})`}},{id:"baseline-deposit-growth",group:"Targeted invariants and behaviours",name:"baseline deposit growth is positive when matching competitor rates",run:e=>{const t=e.createState(),n=Al(t,E.RetailDeposits);n.interestRate=t.market.competitorRetailDepositRate;const{nextState:r}=e.engine.step({state:t,config:e.config,actions:[],shocks:[]});we(r,"after step");const l=Le(r,E.RetailDeposits);if(l<=n.balance)throw new Error(`Deposit growth was not positive (${O(l)} <= ${O(n.balance)})`);return`Retail deposits ${O(n.balance)} -> ${O(l)}`}}],Lg=(e={})=>{const t=e.filter??(()=>!0);return vi.filter(t).map(n=>{const r=lf(e);try{const l=n.run(r);return{...n,passed:!0,detail:l}}catch(l){return{...n,passed:!1,detail:(l==null?void 0:l.message)??String(l)}}})};if(import.meta.vitest){const{describe:e,expect:t,it:n}=import.meta.vitest;e("Simulation test suite metadata",()=>{n("simulation test ids are unique",()=>{const l=new Set,i=new Set;vi.forEach(a=>{l.has(a.id)&&i.add(a.id),l.add(a.id)}),t([...i]).toEqual([])})});const r=vi.reduce((l,i)=>(l[i.group]||(l[i.group]=[]),l[i.group].push(i),l),{});Object.entries(r).forEach(([l,i])=>{e(l,()=>{i.forEach(a=>{n(`${a.id}: ${a.name}`,()=>{const s=lf(),o=a.run(s);t(o).toBeTypeOf("string"),t(o.length).toBeGreaterThan(0)})})})})}const Fg=({state:e})=>{const t=$.useMemo(()=>{const s=[],o=e.balanceSheet.items.filter(R=>R.side==="Asset").reduce((R,v)=>R+v.balance,0),c=e.balanceSheet.items.filter(R=>R.side==="Liability").reduce((R,v)=>R+v.balance,0),f=e.capital.cet1+e.capital.at1,p=o-(c+f);s.push({name:"Balance sheet balances",passed:Math.abs(p)<1,detail:`Assets ${U(o)} vs Liabilities+Equity ${U(c+f)} (gap ${p.toFixed(2)})`});const d=e.cashFlowStatement,g=Math.abs(d.cashStart+d.netChange-d.cashEnd)<1;s.push({name:"Cash rollforward",passed:g,detail:`Start ${U(d.cashStart)} + net change ${U(d.netChange)} = end ${U(d.cashEnd)}`});const x=d.operatingCashFlow+d.investingCashFlow+d.financingCashFlow,y=Math.abs(x-d.netChange)<1;return s.push({name:"Cash flow components sum",passed:y,detail:`Op ${U(d.operatingCashFlow)} + Inv ${U(d.investingCashFlow)} + Fin ${U(d.financingCashFlow)} = ${U(x)} vs net change ${U(d.netChange)}`}),s},[e]),n=$.useMemo(()=>Lg(),[]),r=$.useMemo(()=>{const s=new Set,o=new Set;return vi.forEach(c=>{s.has(c.id)&&o.add(c.id),s.add(c.id)}),[{id:"simulation-test-ids-unique",group:"Simulation test suite metadata",name:"simulation test ids are unique",passed:o.size===0,detail:o.size===0?"No duplicate ids":`Duplicate ids: ${[...o].join(", ")}`}]},[]),l=$.useMemo(()=>[...r,...n],[r,n]),i=l.filter(s=>s.passed).length,a=$.useMemo(()=>{const s=new Map;return l.forEach(o=>{const c=s.get(o.group);if(c){c.push(o);return}s.set(o.group,[o])}),s},[l]);return u.jsxs("div",{className:"card stack",children:[u.jsx("h3",{children:"Reconciliations"}),u.jsxs("div",{className:"stack",children:[u.jsx(Tu,{title:"Current state checks",rows:t}),u.jsx("div",{style:{fontWeight:700},children:`Simulation tests (${i}/${l.length} passing)`}),[...a.entries()].map(([s,o])=>{const c=o.filter(f=>f.passed).length;return u.jsx(Tu,{title:`${s} (${c}/${o.length} passing)`,rows:o},s)})]})]})},Tu=({title:e,rows:t})=>u.jsxs("div",{className:"stack",children:[u.jsx("div",{style:{fontWeight:700},children:e}),u.jsx("div",{className:"stack",children:t.map(n=>{const r="id"in n?n.id:n.name,l="id"in n?`${n.id}: ${n.name}`:n.name;return u.jsxs("div",{className:"recon-item",children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[u.jsx("div",{style:{fontWeight:600},children:l}),u.jsx("span",{className:`status-badge ${n.passed?"pass":"fail"}`,children:n.passed?"PASS":"FAIL"})]}),u.jsx("div",{className:"muted",style:{marginTop:4},children:n.detail})]},r)})})]});class Pg{constructor(t){this.engine=rf(),this.config=t}setConfig(t){this.config=t}step(t,n,r){return this.engine.step({state:t,config:this.config,actions:n,shocks:r})}}const Nt=e=>{if(e.length<2)return null;const t=e[e.length-1],n=[...e].reverse().find(r=>r.step<t.step);return!n||!Number.isFinite(n.value)||n.value===0?null:(t.value-n.value)/Math.abs(n.value)*100},Dg=(e,t)=>{var n;return((n=e.balanceSheet.items.find(r=>r.productType===t))==null?void 0:n.balance)??0},jt=(e,t)=>e.map(n=>({step:n.time.step,value:t(n)})),zn=(e,t)=>e.balanceSheet.items.filter(n=>n.side===t).reduce((n,r)=>n+r.balance,0),af=(e,t)=>{const n=jt(t,r=>Dg(r,e.productType));return{id:e.productType,label:e.label,value:e.balance,changePct:Nt(n),series:n,rate:e.interestRate}},$g=(e,t)=>{const r=e.balanceSheet.items.filter(i=>i.side===A.Asset).map(i=>af(i,t)),l=jt(t,i=>zn(i,A.Asset));return r.push({id:"total-assets",label:"Total assets",value:zn(e,A.Asset),changePct:Nt(l),series:l}),r},Ig=(e,t)=>{const r=e.balanceSheet.items.filter(c=>c.side===A.Liability).map(c=>af(c,t)),l=jt(t,c=>c.capital.cet1),i=jt(t,c=>c.capital.at1),a=jt(t,c=>c.capital.cet1+c.capital.at1),s=jt(t,c=>zn(c,A.Liability)),o=jt(t,c=>zn(c,A.Liability)+c.capital.cet1+c.capital.at1);return r.push({id:"capital-cet1",label:"CET1 capital",value:e.capital.cet1,changePct:Nt(l),series:l},{id:"capital-at1",label:"AT1 capital",value:e.capital.at1,changePct:Nt(i),series:i},{id:"capital-total",label:"Total equity",value:e.capital.cet1+e.capital.at1,changePct:Nt(a),series:a},{id:"total-liabilities",label:"Total liabilities",value:zn(e,A.Liability),changePct:Nt(s),series:s},{id:"liabilities-equity",label:"Liabilities + equity",value:zn(e,A.Liability)+e.capital.cet1+e.capital.at1,changePct:Nt(o),series:o}),r},_g=(e,t)=>[{id:"interestIncome",label:"Interest income",selector:r=>r.incomeStatement.interestIncome},{id:"interestExpense",label:"Interest expense",selector:r=>r.incomeStatement.interestExpense},{id:"netInterestIncome",label:"Net interest income",selector:r=>r.incomeStatement.netInterestIncome},{id:"feeIncome",label:"Fee income",selector:r=>r.incomeStatement.feeIncome},{id:"creditLosses",label:"Credit losses",selector:r=>r.incomeStatement.creditLosses},{id:"operatingExpenses",label:"Operating expenses",selector:r=>r.incomeStatement.operatingExpenses},{id:"preTaxProfit",label:"Pre-tax profit",selector:r=>r.incomeStatement.preTaxProfit},{id:"tax",label:"Tax",selector:r=>r.incomeStatement.tax},{id:"netIncome",label:"Net income",selector:r=>r.incomeStatement.netIncome}].map(r=>{const l=jt(t,r.selector);return{id:r.id,label:r.label,value:r.selector(e),changePct:Nt(l),series:l}}),Og=(e,t)=>[{id:"cashStart",label:"Cash at start",selector:r=>r.cashFlowStatement.cashStart},{id:"operatingCashFlow",label:"Operating cash flow",selector:r=>r.cashFlowStatement.operatingCashFlow},{id:"investingCashFlow",label:"Investing cash flow",selector:r=>r.cashFlowStatement.investingCashFlow},{id:"financingCashFlow",label:"Financing cash flow",selector:r=>r.cashFlowStatement.financingCashFlow},{id:"netChange",label:"Net change in cash",selector:r=>r.cashFlowStatement.netChange},{id:"cashEnd",label:"Cash at end",selector:r=>r.cashFlowStatement.cashEnd}].map(r=>{const l=jt(t,r.selector);return{id:r.id,label:r.label,value:r.selector(e),changePct:Nt(l),series:l}}),Ag=({data:e,xLabel:t="Simulation step",yLabel:n="Amount",xTickInterval:r=12})=>{if(!e.length)return u.jsx("div",{className:"series-chart empty",children:u.jsx("div",{className:"muted",children:"No history yet  run the simulation to build a trend."})});const l=e.map(k=>k.value),i=Math.max(...l),a=Math.min(...l),s=Jd(a,i,5),o=s.length?Math.min(a,...s):a,c=s.length?Math.max(i,...s):i,f=c-o,p=f===0?Math.max(Math.abs(c),1):f,d=o<0&&c>0,g=100-(0-o)/p*100,x=e.map(k=>k.step),y=Math.min(...x),R=Math.max(...x),v=Math.max(1,R-y),m=e.map(k=>{const C=(k.step-y)/v*100,w=100-(k.value-o)/p*100;return`${C.toFixed(2)},${w.toFixed(2)}`}),h=`${m.join(" ")} 100,100 0,100`,S=[],N=Math.max(1,r);S.push(y);for(let k=Math.ceil(y/N)*N;k<R;k+=N)k>y&&k<R&&S.push(k);return R!==y&&S.push(R),u.jsx("div",{className:"series-chart",children:u.jsxs("div",{className:"series-plot",children:[u.jsx("div",{className:"axis-label y-axis-label",children:n}),u.jsx("div",{className:"axis-ticks y-axis-ticks",children:s.map(k=>{const C=(k-o)/p*100;return u.jsx("span",{style:{bottom:`${C}%`},children:Zd(k,n)},k)})}),u.jsxs("div",{className:"plot-body",children:[u.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",role:"img","aria-label":"Time series",children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"series-fill",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"var(--accent)",stopOpacity:"0.2"}),u.jsx("stop",{offset:"100%",stopColor:"var(--accent)",stopOpacity:"0"})]})}),d&&u.jsx("line",{x1:"0",y1:g,x2:"100",y2:g,className:"series-zero"}),u.jsx("polygon",{className:"series-area",points:h,fill:"url(#series-fill)"}),u.jsx("polyline",{className:"series-line",points:m.join(" "),fill:"none",stroke:"var(--accent)",strokeWidth:"2"})]}),u.jsx("div",{className:"axis-ticks x-axis-ticks",children:S.map(k=>{const C=(k-y)/v*100;return u.jsx("span",{style:{left:`${C}%`},children:k},k)})}),u.jsx("div",{className:"axis-label x-axis-label",children:t})]})]})})},Rl=({title:e,subtitle:t,rows:n,selectedId:r,onSelect:l,isOpen:i,onToggle:a,yLabelForRow:s})=>{const o=n.some(d=>d.rate!==void 0),c=n.find(d=>d.id===r)??n[0],f=d=>d===null?"muted":d>0?"positive":d<0?"negative":"muted",p=s?s(c):"Amount";return u.jsxs("div",{className:"card statement-card",children:[u.jsxs("div",{className:"statement-header",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:t}),u.jsx("h3",{children:e})]}),u.jsx("div",{className:"statement-header-actions",children:u.jsx("button",{className:"button ghost small",type:"button",onClick:a,children:i?"Collapse":"Expand"})})]}),i&&u.jsxs("div",{className:"statement-body",children:[u.jsx("div",{className:"statement-table",children:u.jsxs("table",{className:"data-table clickable",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Line item"}),u.jsx("th",{className:"numeric",children:"Amount"}),u.jsx("th",{className:"numeric",children:"MoM"}),o&&u.jsx("th",{className:"numeric",children:"Rate"})]})}),u.jsx("tbody",{children:n.map(d=>u.jsxs("tr",{className:d.id===(c==null?void 0:c.id)?"active":"",onClick:()=>l(d.id),style:{cursor:"pointer"},children:[u.jsx("td",{children:d.label}),u.jsx("td",{className:"numeric",children:U(d.value)}),u.jsx("td",{className:`numeric ${f(d.changePct)}`,children:mi(d.changePct)}),o&&u.jsx("td",{className:"numeric muted",children:$e(d.rate)})]},d.id))})]})}),u.jsx("div",{className:"statement-chart",children:c?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"chart-meta",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:"Time series"}),u.jsx("div",{className:"chart-title",children:c.label})]}),u.jsxs("div",{className:"chart-pills",children:[u.jsxs("span",{className:"pill",children:["Now ",U(c.value)]}),u.jsxs("span",{className:`pill ${f(c.changePct)}`,children:["MoM ",mi(c.changePct)]})]})]}),u.jsx(Ag,{data:c.series,yLabel:p,xTickInterval:12})]}):u.jsx("div",{className:"muted",children:"Select a line item to plot."})})]})]})},Ml=(e,t,n)=>{if(!e.length)return;const r=e.some(l=>l.id===t);(!t||!r)&&n(e[0].id)},zg=({state:e,history:t})=>{const n=$.useMemo(()=>$g(e,t),[e,t]),r=$.useMemo(()=>Ig(e,t),[e,t]),l=$.useMemo(()=>_g(e,t),[e,t]),i=$.useMemo(()=>Og(e,t),[e,t]),[a,s]=$.useState({}),[o,c]=$.useState({assets:!0,liabilities:!0,income:!0,cashflow:!0});return $.useEffect(()=>{Ml(n,a.assets,f=>s(p=>({...p,assets:f})))},[n,a.assets]),$.useEffect(()=>{Ml(r,a.liabilities,f=>s(p=>({...p,liabilities:f})))},[r,a.liabilities]),$.useEffect(()=>{Ml(l,a.income,f=>s(p=>({...p,income:f})))},[l,a.income]),$.useEffect(()=>{Ml(i,a.cashflow,f=>s(p=>({...p,cashflow:f})))},[i,a.cashflow]),u.jsxs("div",{className:"stack",children:[u.jsx(Rl,{title:"Assets",subtitle:"Balance sheet  assets",rows:n,selectedId:a.assets,onSelect:f=>s(p=>({...p,assets:f})),isOpen:o.assets,onToggle:()=>c(f=>({...f,assets:!f.assets})),yLabelForRow:()=>" (bn)"}),u.jsx(Rl,{title:"Liabilities & equity",subtitle:"Balance sheet  funding",rows:r,selectedId:a.liabilities,onSelect:f=>s(p=>({...p,liabilities:f})),isOpen:o.liabilities,onToggle:()=>c(f=>({...f,liabilities:!f.liabilities})),yLabelForRow:()=>" (bn)"}),u.jsx(Rl,{title:"Income statement",subtitle:"P&L (monthly run rate)",rows:l,selectedId:a.income,onSelect:f=>s(p=>({...p,income:f})),isOpen:o.income,onToggle:()=>c(f=>({...f,income:!f.income})),yLabelForRow:()=>" (bn)"}),u.jsx(Rl,{title:"Cash flow statement",subtitle:"Cash movement (monthly)",rows:i,selectedId:a.cashflow,onSelect:f=>s(p=>({...p,cashflow:f})),isOpen:o.cashflow,onToggle:()=>c(f=>({...f,cashflow:!f.cashflow})),yLabelForRow:()=>" (bn)"})]})},at=({label:e,value:t,helper:n})=>u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-label",children:e}),u.jsx("div",{className:"metric-value",children:t}),n&&u.jsx("div",{className:"metric-helper",children:n})]}),ie=({label:e,value:t})=>u.jsxs("tr",{children:[u.jsx("td",{children:e}),u.jsx("td",{className:"align-right",style:{fontWeight:600},children:t})]}),Bg=(e,t=2)=>e===void 0?"N/A":B(e,t),Wg=({market:e,config:t})=>{const n=e.giltCurve.yields;e.giltCurve.nelsonSiegel;const r=e.macroModel.factors;return u.jsxs("div",{className:"grid-two",children:[u.jsxs("div",{className:"card stack",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:"Exogenous variables"}),u.jsx("h3",{children:"UK Macro State"}),u.jsx("p",{className:"muted",style:{marginTop:4},children:"Structural factors (D/S/F/R) drive GDP, inflation, unemployment, policy rate, the curve, and spreads."})]}),u.jsxs("div",{className:"grid-metrics",children:[u.jsx(at,{label:"Regime",value:e.macroModel.gdpRegime,helper:"Can be either normal or recession."}),u.jsx(at,{label:"GDP (MoM)",value:Dh(e.gdpGrowthMoM),helper:"Monthly GDP growth."}),u.jsx(at,{label:"Inflation (YoY)",value:B(e.inflationRate),helper:"Sticky CPI-like process."}),u.jsx(at,{label:"Unemployment",value:B(e.unemploymentRate)}),u.jsx(at,{label:"Bank Rate",value:B(e.baseRate),helper:"Policy rule with inertia."}),u.jsx(at,{label:"Macro Credit Spread",value:B(e.creditSpread),helper:"Wider in financial stress / weak labour."}),u.jsx(at,{label:"Demand",value:xl(r.D),helper:"(+) means positive demand shock"}),u.jsx(at,{label:"Supply)",value:xl(r.S),helper:"(+) means positive supply shock"}),u.jsx(at,{label:"Financial Conditions",value:xl(r.F),helper:"(+) means tighter conditions"}),u.jsx(at,{label:"R* (Neutral real)",value:xl(r.R)}),u.jsx(at,{label:"RNG Seed",value:`${e.macroModel.rngSeed}`,helper:"Deterministic path for reproducibility."})]})]}),u.jsxs("div",{className:"card stack",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:"Risk-free curve"}),u.jsx("h3",{children:"Gilt Curve"}),u.jsx("p",{className:"muted",style:{marginTop:4},children:"1y/5y/20y anchors are fit each month and other tenors are interpolated"})]}),u.jsxs("table",{className:"data-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Tenor"}),u.jsx("th",{className:"align-right",children:"Yield"})]})}),u.jsxs("tbody",{children:[u.jsx(ie,{label:"1Y",value:B(n.y1)}),u.jsx(ie,{label:"2Y",value:B(n.y2)}),u.jsx(ie,{label:"3Y",value:B(n.y3)}),u.jsx(ie,{label:"5Y",value:B(n.y5)}),u.jsx(ie,{label:"10Y",value:B(n.y10)}),u.jsx(ie,{label:"20Y",value:B(n.y20)}),u.jsx(ie,{label:"30Y",value:B(n.y30)})]})]})]}),u.jsxs("div",{className:"card stack",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:"Funding environment"}),u.jsx("h3",{children:"Spreads, Haircuts, Competition"})]}),u.jsx("table",{className:"data-table",children:u.jsxs("tbody",{children:[u.jsx(ie,{label:"Competitor Mortgage Rate",value:B(e.competitorMortgageRate)}),u.jsx(ie,{label:"Competitor Corporate Loan Rate",value:B(e.riskFreeLong+e.corporateLoanSpread)}),u.jsx(ie,{label:"Competitor retail deposit rate",value:B(e.competitorRetailDepositRate)}),u.jsx(ie,{label:"Competitor corporate deposit rate",value:Bg(e.competitorCorporateDepositRate)}),u.jsx(ie,{label:"ST Wholesale funding spread (over 1y gilt)",value:B(e.wholesaleFundingSpread)}),u.jsx(ie,{label:"LT wholesale funding spread (over 30y gilt)",value:B(e.seniorDebtSpread)}),u.jsx(ie,{label:"Gilt repo haircut",value:B(e.giltRepoHaircut)}),u.jsx(ie,{label:"Corp bond repo haircut",value:B(e.corpBondRepoHaircut)})]})})]}),u.jsxs("div",{className:"card stack",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:"Model inputs"}),u.jsx("h3",{children:"Simulation Parameters"})]}),u.jsx("table",{className:"data-table",children:u.jsxs("tbody",{children:[u.jsx(ie,{label:"Tax rate",value:B(t.global.taxRate)}),u.jsx(ie,{label:"Operating cost ratio (annual)",value:B(t.global.operatingCostRatio)}),u.jsx(ie,{label:"Fixed operating cost (monthly)",value:U(t.global.fixedOperatingCostPerMonth??0)}),u.jsx(ie,{label:"Max deposit growth (per step)",value:B(t.global.maxDepositGrowthPerStep)}),u.jsx(ie,{label:"Max loan growth (per step)",value:B(t.global.maxLoanGrowthPerStep)}),u.jsx(ie,{label:"Min CET1 ratio",value:B(t.riskLimits.minCet1Ratio)}),u.jsx(ie,{label:"Min leverage ratio",value:B(t.riskLimits.minLeverageRatio)}),u.jsx(ie,{label:"Min LCR",value:Mu(t.riskLimits.minLcr)}),u.jsx(ie,{label:"Min NSFR",value:Mu(t.riskLimits.minNsfr)})]})})]})]})},ha=new Pg(pt),Ug=["Overview","Scenarios","Accounts","Regulatory","Loans","Costs","Events","Reconciliations"],Hg=()=>{var K,Q,fe,Te,mt;const[e,t]=$.useState("light"),[n,r]=$.useState(pt),[l,i]=$.useState(pi),[a,s]=$.useState([pi]),[o,c]=$.useState([]),[f,p]=$.useState({retailDepositRate:((K=l.balanceSheet.items.find(M=>M.productType===E.RetailDeposits))==null?void 0:K.interestRate.toString())??"",corporateDepositRate:((Q=l.balanceSheet.items.find(M=>M.productType===E.CorporateDeposits))==null?void 0:Q.interestRate.toString())??"",mortgageRate:((fe=l.balanceSheet.items.find(M=>M.productType===j.Mortgages))==null?void 0:fe.interestRate.toString())??"",corporateLoanRate:((Te=l.balanceSheet.items.find(M=>M.productType===j.CorporateLoans))==null?void 0:Te.interestRate.toString())??"",issueLTDebtAmount:"",issueEquityAmount:""}),[d,g]=$.useState(null),[x,y]=$.useState(null),[R,v]=$.useState("Overview"),[m,h]=$.useState(!1),S=$.useRef(null),N=$.useRef(null),k=$.useMemo(()=>l.capital.cet1+l.capital.at1,[l.capital]),C=$.useMemo(()=>l.balanceSheet.items.filter(M=>M.side===A.Asset).reduce((M,P)=>M+P.balance,0),[l.balanceSheet]),w=k>0?l.incomeStatement.netIncome*12/k:0,L=C>0?l.incomeStatement.netInterestIncome*12/C:0,T=Gg(l.compliance,l.riskMetrics);$.useEffect(()=>{document.documentElement.setAttribute("data-theme",e)},[e]),$.useEffect(()=>{var P;if(!m)return;const M=_=>{if(_.key==="Escape"){h(!1);return}if(_.key!=="Tab")return;const z=N.current;if(!z)return;const ve=Array.from(z.querySelectorAll('a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])'));if(ve.length===0)return;const J=ve[0],re=ve[ve.length-1],le=document.activeElement;if(_.shiftKey){(!le||le===J||!z.contains(le))&&(_.preventDefault(),re.focus());return}(!le||le===re||!z.contains(le))&&(_.preventDefault(),J.focus())};return window.addEventListener("keydown",M),(P=S.current)==null||P.focus(),()=>{window.removeEventListener("keydown",M)}},[m]);const I=()=>{const M=[],P=It=>It===""?void 0:Number(It),_=P(f.retailDepositRate);_!==void 0&&!Number.isNaN(_)&&M.push({type:"adjustRate",productType:E.RetailDeposits,newRate:_});const z=P(f.corporateDepositRate);z!==void 0&&!Number.isNaN(z)&&M.push({type:"adjustRate",productType:E.CorporateDeposits,newRate:z});const Y=P(f.mortgageRate);Y!==void 0&&!Number.isNaN(Y)&&M.push({type:"adjustRate",productType:j.Mortgages,newRate:Y});const ve=P(f.corporateLoanRate);ve!==void 0&&!Number.isNaN(ve)&&M.push({type:"adjustRate",productType:j.CorporateLoans,newRate:ve});const J=P(f.issueLTDebtAmount);J&&!Number.isNaN(J)&&J>0&&M.push({type:"issueDebt",productType:E.WholesaleFundingLT,amount:J,rate:0});const re=P(f.issueEquityAmount);re&&!Number.isNaN(re)&&re>0&&M.push({type:"issueEquity",amount:re});const le=Uh(x,l.time.step);ha.setConfig(n);const{nextState:kt,events:_i}=ha.step(l,M,le);i(kt),s(It=>[...It,kt]),c(It=>[...It,..._i])},q=()=>{var z,Y,ve,J;if(!d)return;const M=Bh(pt,d),P=Wh(d,M),_=Di({state:P,config:M});P.riskMetrics=_,P.compliance=$i(_,M.riskLimits),ha.setConfig(M),r(M),i(P),s([P]),c([]),y(d),p({retailDepositRate:((z=P.balanceSheet.items.find(re=>re.productType===E.RetailDeposits))==null?void 0:z.interestRate.toString())??"",corporateDepositRate:((Y=P.balanceSheet.items.find(re=>re.productType===E.CorporateDeposits))==null?void 0:Y.interestRate.toString())??"",mortgageRate:((ve=P.balanceSheet.items.find(re=>re.productType===j.Mortgages))==null?void 0:ve.interestRate.toString())??"",corporateLoanRate:((J=P.balanceSheet.items.find(re=>re.productType===j.CorporateLoans))==null?void 0:J.interestRate.toString())??"",issueLTDebtAmount:"",issueEquityAmount:""})};return u.jsxs("div",{className:"app-shell",children:[u.jsxs("header",{className:"hero",children:[u.jsxs("div",{className:"hero-content",children:[u.jsx("div",{className:"eyebrow",children:"Bank strategy lab"}),u.jsx("h1",{children:"UK Bank Simulator"}),u.jsx("p",{className:"muted",children:"Tune pricing, issue capital, and run scenarios to watch the balance sheet respond in real time."}),u.jsxs("div",{className:"hero-pills",children:[u.jsxs("span",{className:"pill",children:["Month ",l.time.step]}),u.jsx("button",{className:"button small",type:"button",onClick:()=>h(!0),children:"Actions"}),u.jsx("button",{className:"button primary small",type:"button",onClick:I,disabled:l.hasFailed,children:"Run next month"}),u.jsx("span",{className:`pill ${l.hasFailed?"danger":"success"}`,children:l.hasFailed?"Resolution mode":"Going concern"}),u.jsx("span",{className:"pill warning",children:x?`Scenario: ${x}`:"Sandbox mode"})]})]}),u.jsxs("div",{className:"hero-side",children:[u.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[u.jsx("span",{className:"muted",style:{fontSize:12},children:"Theme"}),u.jsx("button",{className:"button ghost",onClick:()=>t(M=>M==="light"?"dark":"light"),children:e==="light"?"Switch to dark":"Switch to light"})]}),u.jsxs("div",{className:"muted align-right",children:["ROE ",yt(w),"  NIM ",yt(L)]}),u.jsxs("div",{className:"hero-pills",style:{justifyContent:"flex-end"},children:[u.jsxs("span",{className:"pill",children:["Assets ",Lu(C)]}),u.jsxs("span",{className:"pill",children:["Equity ",Lu(k)]})]}),u.jsx("div",{className:"muted",style:{textAlign:"right",fontSize:13},children:"Use the Actions panel to adjust pricing, raise capital, and run the next month."})]})]}),l.hasFailed&&u.jsxs("div",{className:"alert danger",children:[u.jsx("div",{style:{fontWeight:700},children:"Bank failed or regulatory breach occurred."}),u.jsx("div",{className:"muted",style:{marginTop:6},children:T}),u.jsxs("div",{className:"muted",style:{marginTop:8},children:[u.jsx("strong",{children:"Final metrics:"})," CET1 ",yt(l.riskMetrics.cet1Ratio),", Leverage ",yt(l.riskMetrics.leverageRatio),", LCR ",yt(l.riskMetrics.lcr),", NSFR ",yt(l.riskMetrics.nsfr),"."]}),u.jsxs("div",{className:"muted",style:{marginTop:8},children:[u.jsx("strong",{children:"Recent events:"}),u.jsx("ul",{style:{margin:"6px 0 0 16px",padding:0},children:o.slice(-5).map((M,P)=>u.jsxs("li",{children:["[",M.severity.toUpperCase(),"] ",M.message]},P))})]})]}),u.jsx("div",{className:"tabs",children:Ug.map(M=>u.jsx("button",{onClick:()=>v(M),className:`tab-button ${R===M?"active":""}`,children:M},M))}),R==="Overview"&&u.jsxs("div",{className:"section-grid",children:[u.jsx("div",{className:"card",children:u.jsx($h,{riskMetrics:l.riskMetrics,equity:k,assets:C,roe:w,nim:L})}),u.jsx(Wg,{market:l.market,config:n})]}),R==="Scenarios"&&u.jsxs("section",{className:"stack",children:[u.jsx("h2",{children:"Scenarios"}),u.jsxs("div",{className:"grid-two",children:[u.jsx(Oh,{scenarios:Kr,selectedId:d,onSelect:M=>g(M),onStart:q,description:(mt=Kr.find(M=>M.id===d))==null?void 0:mt.description}),u.jsxs("div",{className:"card stack",children:[u.jsx("div",{className:"eyebrow",children:"What to expect"}),u.jsx("p",{className:"muted",children:"Starting a scenario reloads the bank with tailored settings and scheduled shocks. You can still tweak pricing and funding in the Actions panel once the scenario is active."}),u.jsx("div",{className:"muted",style:{marginTop:8},children:x?`Currently running: ${x}`:"No scenario running; sandbox mode active."})]})]})]}),R==="Accounts"&&u.jsxs("section",{className:"stack",children:[u.jsx("h2",{children:"Accounts"}),u.jsx(zg,{state:l,history:a})]}),R==="Regulatory"&&u.jsxs("section",{className:"stack",children:[u.jsx("h2",{children:"Regulatory Metrics"}),u.jsx(Kh,{state:l,history:a,config:n})]}),R==="Loans"&&u.jsxs("section",{className:"stack",children:[u.jsx("h2",{children:"Loans"}),u.jsx(ng,{items:l.balanceSheet.items,loanCohorts:l.loanCohorts})]}),R==="Costs"&&u.jsxs("section",{className:"stack",children:[u.jsx("h2",{children:"Costs"}),u.jsx(rg,{income:l.incomeStatement})]}),R==="Events"&&u.jsxs("section",{className:"stack",children:[u.jsx("h2",{children:"Event Log"}),u.jsx(_h,{events:o})]}),R==="Reconciliations"&&u.jsxs("section",{className:"stack",children:[u.jsx("h2",{children:"Reconciliations"}),u.jsx(Fg,{state:l})]}),u.jsx("button",{type:"button",className:`actions-handle ${m?"open":""}`,onClick:()=>h(!0),"aria-haspopup":"dialog","aria-controls":"actions-panel","aria-expanded":m,"aria-hidden":m,tabIndex:m?-1:0,children:u.jsx("span",{children:"Actions"})}),u.jsx("div",{className:`actions-drawer-overlay ${m?"open":""}`,onClick:()=>h(!1),"aria-hidden":!m}),u.jsx("aside",{id:"actions-panel",className:`actions-drawer ${m?"open":""}`,role:"dialog","aria-modal":m?!0:void 0,"aria-label":"Actions panel","aria-hidden":!m,children:u.jsxs("div",{ref:N,className:"actions-drawer-content",children:[u.jsxs("div",{className:"actions-drawer-header",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:"Actions"}),u.jsx("h2",{style:{marginTop:6},children:"Next month levers"}),u.jsx("p",{className:"muted",style:{marginTop:4},children:"Adjust pricing, raise funding, and run the simulation from one place."})]}),u.jsx("button",{ref:S,className:"button icon",type:"button",onClick:()=>h(!1),"aria-label":"Close actions panel",children:""})]}),u.jsx("div",{className:"card stack",children:u.jsx(Ih,{state:f,onChange:p,onSubmit:I,disabled:l.hasFailed})})]})})]})},Gg=(e,t)=>e?e.lcrBreached?`Liquidity Coverage Ratio dropped below requirement; HQLA was insufficient versus net outflows (LCR=${yt(t.lcr)}).`:e.nsfrBreached?`Stable funding shortfall; NSFR dipped below 1.0 (NSFR=${yt(t.nsfr)}).`:e.cet1Breached?`CET1 ratio fell under the minimum buffer (CET1 ratio=${yt(t.cet1Ratio)}).`:e.leverageBreached?`Leverage backstop breached (Leverage ratio=${yt(t.leverageRatio)}).`:"The bank failed due to unspecified breach.":"",yt=e=>Number.isFinite(e)?`${(e*100).toFixed(2)}%`:"N/A",Lu=e=>Number.isFinite(e)?`${(e/1e9).toFixed(1)}bn`:"N/A",sf=document.getElementById("root");if(!sf)throw new Error("Root element not found");ga.createRoot(sf).render(u.jsx(bf.StrictMode,{children:u.jsx(Hg,{})}));
