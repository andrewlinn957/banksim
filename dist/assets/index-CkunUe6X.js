(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();function gf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ou={exports:{}},wi={},Au={exports:{}},B={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var el=Symbol.for("react.element"),vf=Symbol.for("react.portal"),yf=Symbol.for("react.fragment"),xf=Symbol.for("react.strict_mode"),wf=Symbol.for("react.profiler"),Sf=Symbol.for("react.provider"),kf=Symbol.for("react.context"),Rf=Symbol.for("react.forward_ref"),Mf=Symbol.for("react.suspense"),Cf=Symbol.for("react.memo"),Nf=Symbol.for("react.lazy"),go=Symbol.iterator;function jf(e){return e===null||typeof e!="object"?null:(e=go&&e[go]||e["@@iterator"],typeof e=="function"?e:null)}var zu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bu=Object.assign,Wu={};function sr(e,t,n){this.props=e,this.context=t,this.refs=Wu,this.updater=n||zu}sr.prototype.isReactComponent={};sr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};sr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Uu(){}Uu.prototype=sr.prototype;function ga(e,t,n){this.props=e,this.context=t,this.refs=Wu,this.updater=n||zu}var va=ga.prototype=new Uu;va.constructor=ga;Bu(va,sr.prototype);va.isPureReactComponent=!0;var vo=Array.isArray,Hu=Object.prototype.hasOwnProperty,ya={current:null},Gu={key:!0,ref:!0,__self:!0,__source:!0};function Vu(e,t,n){var r,l={},i=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)Hu.call(t,r)&&!Gu.hasOwnProperty(r)&&(l[r]=t[r]);var a=arguments.length-2;if(a===1)l.children=n;else if(1<a){for(var o=Array(a),c=0;c<a;c++)o[c]=arguments[c+2];l.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)l[r]===void 0&&(l[r]=a[r]);return{$$typeof:el,type:e,key:i,ref:s,props:l,_owner:ya.current}}function Ef(e,t){return{$$typeof:el,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function xa(e){return typeof e=="object"&&e!==null&&e.$$typeof===el}function bf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var yo=/\/+/g;function zi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?bf(""+e.key):t.toString(36)}function El(e,t,n,r,l){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case el:case vf:s=!0}}if(s)return s=e,l=l(s),e=r===""?"."+zi(s,0):r,vo(l)?(n="",e!=null&&(n=e.replace(yo,"$&/")+"/"),El(l,t,n,"",function(c){return c})):l!=null&&(xa(l)&&(l=Ef(l,n+(!l.key||s&&s.key===l.key?"":(""+l.key).replace(yo,"$&/")+"/")+e)),t.push(l)),1;if(s=0,r=r===""?".":r+":",vo(e))for(var a=0;a<e.length;a++){i=e[a];var o=r+zi(i,a);s+=El(i,t,n,o,l)}else if(o=jf(e),typeof o=="function")for(e=o.call(e),a=0;!(i=e.next()).done;)i=i.value,o=r+zi(i,a++),s+=El(i,t,n,o,l);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function il(e,t,n){if(e==null)return e;var r=[],l=0;return El(e,r,"","",function(i){return t.call(n,i,l++)}),r}function Tf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pe={current:null},bl={transition:null},Ff={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:bl,ReactCurrentOwner:ya};function qu(){throw Error("act(...) is not supported in production builds of React.")}B.Children={map:il,forEach:function(e,t,n){il(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return il(e,function(){t++}),t},toArray:function(e){return il(e,function(t){return t})||[]},only:function(e){if(!xa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};B.Component=sr;B.Fragment=yf;B.Profiler=wf;B.PureComponent=ga;B.StrictMode=xf;B.Suspense=Mf;B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ff;B.act=qu;B.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Bu({},e.props),l=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=ya.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(o in t)Hu.call(t,o)&&!Gu.hasOwnProperty(o)&&(r[o]=t[o]===void 0&&a!==void 0?a[o]:t[o])}var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){a=Array(o);for(var c=0;c<o;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:el,type:e.type,key:l,ref:i,props:r,_owner:s}};B.createContext=function(e){return e={$$typeof:kf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Sf,_context:e},e.Consumer=e};B.createElement=Vu;B.createFactory=function(e){var t=Vu.bind(null,e);return t.type=e,t};B.createRef=function(){return{current:null}};B.forwardRef=function(e){return{$$typeof:Rf,render:e}};B.isValidElement=xa;B.lazy=function(e){return{$$typeof:Nf,_payload:{_status:-1,_result:e},_init:Tf}};B.memo=function(e,t){return{$$typeof:Cf,type:e,compare:t===void 0?null:t}};B.startTransition=function(e){var t=bl.transition;bl.transition={};try{e()}finally{bl.transition=t}};B.unstable_act=qu;B.useCallback=function(e,t){return Pe.current.useCallback(e,t)};B.useContext=function(e){return Pe.current.useContext(e)};B.useDebugValue=function(){};B.useDeferredValue=function(e){return Pe.current.useDeferredValue(e)};B.useEffect=function(e,t){return Pe.current.useEffect(e,t)};B.useId=function(){return Pe.current.useId()};B.useImperativeHandle=function(e,t,n){return Pe.current.useImperativeHandle(e,t,n)};B.useInsertionEffect=function(e,t){return Pe.current.useInsertionEffect(e,t)};B.useLayoutEffect=function(e,t){return Pe.current.useLayoutEffect(e,t)};B.useMemo=function(e,t){return Pe.current.useMemo(e,t)};B.useReducer=function(e,t,n){return Pe.current.useReducer(e,t,n)};B.useRef=function(e){return Pe.current.useRef(e)};B.useState=function(e){return Pe.current.useState(e)};B.useSyncExternalStore=function(e,t,n){return Pe.current.useSyncExternalStore(e,t,n)};B.useTransition=function(){return Pe.current.useTransition()};B.version="18.3.1";Au.exports=B;var D=Au.exports;const Lf=gf(D);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pf=D,$f=Symbol.for("react.element"),Df=Symbol.for("react.fragment"),If=Object.prototype.hasOwnProperty,_f=Pf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Of={key:!0,ref:!0,__self:!0,__source:!0};function Qu(e,t,n){var r,l={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)If.call(t,r)&&!Of.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:$f,type:e,key:i,ref:s,props:l,_owner:_f.current}}wi.Fragment=Df;wi.jsx=Qu;wi.jsxs=Qu;Ou.exports=wi;var u=Ou.exports,ys={},Yu={exports:{}},qe={},Ku={exports:{}},Xu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,P){var _=M.length;M.push(P);e:for(;0<_;){var z=_-1>>>1,G=M[z];if(0<l(G,P))M[z]=P,M[_]=G,_=z;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var P=M[0],_=M.pop();if(_!==P){M[0]=_;e:for(var z=0,G=M.length,he=G>>>1;z<he;){var K=2*(z+1)-1,te=M[K],ne=K+1,St=M[ne];if(0>l(te,_))ne<G&&0>l(St,te)?(M[z]=St,M[ne]=_,z=ne):(M[z]=te,M[K]=_,z=K);else if(ne<G&&0>l(St,_))M[z]=St,M[ne]=_,z=ne;else break e}}return P}function l(M,P){var _=M.sortIndex-P.sortIndex;return _!==0?_:M.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var o=[],c=[],f=1,p=null,d=3,g=!1,x=!1,y=!1,k=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(M){for(var P=n(c);P!==null;){if(P.callback===null)r(c);else if(P.startTime<=M)r(c),P.sortIndex=P.expirationTime,t(o,P);else break;P=n(c)}}function S(M){if(y=!1,v(M),!x)if(n(o)!==null)x=!0,je(N);else{var P=n(c);P!==null&&ft(S,P.startTime-M)}}function N(M,P){x=!1,y&&(y=!1,h(w),w=-1),g=!0;var _=d;try{for(v(P),p=n(o);p!==null&&(!(p.expirationTime>P)||M&&!I());){var z=p.callback;if(typeof z=="function"){p.callback=null,d=p.priorityLevel;var G=z(p.expirationTime<=P);P=e.unstable_now(),typeof G=="function"?p.callback=G:p===n(o)&&r(o),v(P)}else r(o);p=n(o)}if(p!==null)var he=!0;else{var K=n(c);K!==null&&ft(S,K.startTime-P),he=!1}return he}finally{p=null,d=_,g=!1}}var R=!1,C=null,w=-1,F=5,T=-1;function I(){return!(e.unstable_now()-T<F)}function Y(){if(C!==null){var M=e.unstable_now();T=M;var P=!0;try{P=C(!0,M)}finally{P?V():(R=!1,C=null)}}else R=!1}var V;if(typeof m=="function")V=function(){m(Y)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ce=H.port2;H.port1.onmessage=Y,V=function(){ce.postMessage(null)}}else V=function(){k(Y,0)};function je(M){C=M,R||(R=!0,V())}function ft(M,P){w=k(function(){M(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){x||g||(x=!0,je(N))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(o)},e.unstable_next=function(M){switch(d){case 1:case 2:case 3:var P=3;break;default:P=d}var _=d;d=P;try{return M()}finally{d=_}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,P){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var _=d;d=M;try{return P()}finally{d=_}},e.unstable_scheduleCallback=function(M,P,_){var z=e.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?z+_:z):_=z,M){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=_+G,M={id:f++,callback:P,priorityLevel:M,startTime:_,expirationTime:G,sortIndex:-1},_>z?(M.sortIndex=_,t(c,M),n(o)===null&&M===n(c)&&(y?(h(w),w=-1):y=!0,ft(S,_-z))):(M.sortIndex=G,t(o,M),x||g||(x=!0,je(N))),M},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(M){var P=d;return function(){var _=d;d=P;try{return M.apply(this,arguments)}finally{d=_}}}})(Xu);Ku.exports=Xu;var Af=Ku.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zf=D,Ve=Af;function E(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zu=new Set,Dr={};function kn(e,t){Zn(e,t),Zn(e+"Capture",t)}function Zn(e,t){for(Dr[e]=t,e=0;e<t.length;e++)Zu.add(t[e])}var Tt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xs=Object.prototype.hasOwnProperty,Bf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xo={},wo={};function Wf(e){return xs.call(wo,e)?!0:xs.call(xo,e)?!1:Bf.test(e)?wo[e]=!0:(xo[e]=!0,!1)}function Uf(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Hf(e,t,n,r){if(t===null||typeof t>"u"||Uf(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $e(e,t,n,r,l,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var Se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Se[e]=new $e(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Se[t]=new $e(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Se[e]=new $e(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Se[e]=new $e(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Se[e]=new $e(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Se[e]=new $e(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Se[e]=new $e(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Se[e]=new $e(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Se[e]=new $e(e,5,!1,e.toLowerCase(),null,!1,!1)});var wa=/[\-:]([a-z])/g;function Sa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wa,Sa);Se[t]=new $e(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wa,Sa);Se[t]=new $e(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wa,Sa);Se[t]=new $e(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Se[e]=new $e(e,1,!1,e.toLowerCase(),null,!1,!1)});Se.xlinkHref=new $e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Se[e]=new $e(e,1,!1,e.toLowerCase(),null,!0,!0)});function ka(e,t,n,r){var l=Se.hasOwnProperty(t)?Se[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Hf(t,n,l,r)&&(n=null),r||l===null?Wf(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var $t=zf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sl=Symbol.for("react.element"),Fn=Symbol.for("react.portal"),Ln=Symbol.for("react.fragment"),Ra=Symbol.for("react.strict_mode"),ws=Symbol.for("react.profiler"),Ju=Symbol.for("react.provider"),ec=Symbol.for("react.context"),Ma=Symbol.for("react.forward_ref"),Ss=Symbol.for("react.suspense"),ks=Symbol.for("react.suspense_list"),Ca=Symbol.for("react.memo"),Bt=Symbol.for("react.lazy"),tc=Symbol.for("react.offscreen"),So=Symbol.iterator;function ur(e){return e===null||typeof e!="object"?null:(e=So&&e[So]||e["@@iterator"],typeof e=="function"?e:null)}var ae=Object.assign,Bi;function Sr(e){if(Bi===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Bi=t&&t[1]||""}return`
`+Bi+e}var Wi=!1;function Ui(e,t){if(!e||Wi)return"";Wi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var l=c.stack.split(`
`),i=r.stack.split(`
`),s=l.length-1,a=i.length-1;1<=s&&0<=a&&l[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(l[s]!==i[a]){if(s!==1||a!==1)do if(s--,a--,0>a||l[s]!==i[a]){var o=`
`+l[s].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=s&&0<=a);break}}}finally{Wi=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Sr(e):""}function Gf(e){switch(e.tag){case 5:return Sr(e.type);case 16:return Sr("Lazy");case 13:return Sr("Suspense");case 19:return Sr("SuspenseList");case 0:case 2:case 15:return e=Ui(e.type,!1),e;case 11:return e=Ui(e.type.render,!1),e;case 1:return e=Ui(e.type,!0),e;default:return""}}function Rs(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ln:return"Fragment";case Fn:return"Portal";case ws:return"Profiler";case Ra:return"StrictMode";case Ss:return"Suspense";case ks:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ec:return(e.displayName||"Context")+".Consumer";case Ju:return(e._context.displayName||"Context")+".Provider";case Ma:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ca:return t=e.displayName||null,t!==null?t:Rs(e.type)||"Memo";case Bt:t=e._payload,e=e._init;try{return Rs(e(t))}catch{}}return null}function Vf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rs(t);case 8:return t===Ra?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function nn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function nc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qf(e){var t=nc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function al(e){e._valueTracker||(e._valueTracker=qf(e))}function rc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=nc(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Wl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ms(e,t){var n=t.checked;return ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ko(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=nn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lc(e,t){t=t.checked,t!=null&&ka(e,"checked",t,!1)}function Cs(e,t){lc(e,t);var n=nn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ns(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ns(e,t.type,nn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ro(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ns(e,t,n){(t!=="number"||Wl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var kr=Array.isArray;function Gn(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+nn(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function js(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(E(91));return ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Mo(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(E(92));if(kr(n)){if(1<n.length)throw Error(E(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:nn(n)}}function ic(e,t){var n=nn(t.value),r=nn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Co(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function sc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Es(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?sc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ol,ac=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ol=ol||document.createElement("div"),ol.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ol.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ir(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Cr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qf=["Webkit","ms","Moz","O"];Object.keys(Cr).forEach(function(e){Qf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Cr[t]=Cr[e]})});function oc(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Cr.hasOwnProperty(e)&&Cr[e]?(""+t).trim():t+"px"}function uc(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=oc(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var Yf=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bs(e,t){if(t){if(Yf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(E(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(E(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(E(61))}if(t.style!=null&&typeof t.style!="object")throw Error(E(62))}}function Ts(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fs=null;function Na(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ls=null,Vn=null,qn=null;function No(e){if(e=rl(e)){if(typeof Ls!="function")throw Error(E(280));var t=e.stateNode;t&&(t=Ci(t),Ls(e.stateNode,e.type,t))}}function cc(e){Vn?qn?qn.push(e):qn=[e]:Vn=e}function dc(){if(Vn){var e=Vn,t=qn;if(qn=Vn=null,No(e),t)for(e=0;e<t.length;e++)No(t[e])}}function fc(e,t){return e(t)}function pc(){}var Hi=!1;function mc(e,t,n){if(Hi)return e(t,n);Hi=!0;try{return fc(e,t,n)}finally{Hi=!1,(Vn!==null||qn!==null)&&(pc(),dc())}}function _r(e,t){var n=e.stateNode;if(n===null)return null;var r=Ci(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(E(231,t,typeof n));return n}var Ps=!1;if(Tt)try{var cr={};Object.defineProperty(cr,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",cr,cr),window.removeEventListener("test",cr,cr)}catch{Ps=!1}function Kf(e,t,n,r,l,i,s,a,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var Nr=!1,Ul=null,Hl=!1,$s=null,Xf={onError:function(e){Nr=!0,Ul=e}};function Zf(e,t,n,r,l,i,s,a,o){Nr=!1,Ul=null,Kf.apply(Xf,arguments)}function Jf(e,t,n,r,l,i,s,a,o){if(Zf.apply(this,arguments),Nr){if(Nr){var c=Ul;Nr=!1,Ul=null}else throw Error(E(198));Hl||(Hl=!0,$s=c)}}function Rn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function hc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function jo(e){if(Rn(e)!==e)throw Error(E(188))}function ep(e){var t=e.alternate;if(!t){if(t=Rn(e),t===null)throw Error(E(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var i=l.alternate;if(i===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===n)return jo(l),e;if(i===r)return jo(l),t;i=i.sibling}throw Error(E(188))}if(n.return!==r.return)n=l,r=i;else{for(var s=!1,a=l.child;a;){if(a===n){s=!0,n=l,r=i;break}if(a===r){s=!0,r=l,n=i;break}a=a.sibling}if(!s){for(a=i.child;a;){if(a===n){s=!0,n=i,r=l;break}if(a===r){s=!0,r=i,n=l;break}a=a.sibling}if(!s)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?e:t}function gc(e){return e=ep(e),e!==null?vc(e):null}function vc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=vc(e);if(t!==null)return t;e=e.sibling}return null}var yc=Ve.unstable_scheduleCallback,Eo=Ve.unstable_cancelCallback,tp=Ve.unstable_shouldYield,np=Ve.unstable_requestPaint,ue=Ve.unstable_now,rp=Ve.unstable_getCurrentPriorityLevel,ja=Ve.unstable_ImmediatePriority,xc=Ve.unstable_UserBlockingPriority,Gl=Ve.unstable_NormalPriority,lp=Ve.unstable_LowPriority,wc=Ve.unstable_IdlePriority,Si=null,xt=null;function ip(e){if(xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(Si,e,void 0,(e.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:op,sp=Math.log,ap=Math.LN2;function op(e){return e>>>=0,e===0?32:31-(sp(e)/ap|0)|0}var ul=64,cl=4194304;function Rr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Vl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,i=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~l;a!==0?r=Rr(a):(i&=s,i!==0&&(r=Rr(i)))}else s=n&~l,s!==0?r=Rr(s):i!==0&&(r=Rr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&l)&&(l=r&-r,i=t&-t,l>=i||l===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ot(t),l=1<<n,r|=e[n],t&=~l;return r}function up(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cp(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-ot(i),a=1<<s,o=l[s];o===-1?(!(a&n)||a&r)&&(l[s]=up(a,t)):o<=t&&(e.expiredLanes|=a),i&=~a}}function Ds(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Sc(){var e=ul;return ul<<=1,!(ul&4194240)&&(ul=64),e}function Gi(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ot(t),e[t]=n}function dp(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-ot(n),i=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~i}}function Ea(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var U=0;function kc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Rc,ba,Mc,Cc,Nc,Is=!1,dl=[],qt=null,Qt=null,Yt=null,Or=new Map,Ar=new Map,Ut=[],fp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bo(e,t){switch(e){case"focusin":case"focusout":qt=null;break;case"dragenter":case"dragleave":Qt=null;break;case"mouseover":case"mouseout":Yt=null;break;case"pointerover":case"pointerout":Or.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ar.delete(t.pointerId)}}function dr(e,t,n,r,l,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[l]},t!==null&&(t=rl(t),t!==null&&ba(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function pp(e,t,n,r,l){switch(t){case"focusin":return qt=dr(qt,e,t,n,r,l),!0;case"dragenter":return Qt=dr(Qt,e,t,n,r,l),!0;case"mouseover":return Yt=dr(Yt,e,t,n,r,l),!0;case"pointerover":var i=l.pointerId;return Or.set(i,dr(Or.get(i)||null,e,t,n,r,l)),!0;case"gotpointercapture":return i=l.pointerId,Ar.set(i,dr(Ar.get(i)||null,e,t,n,r,l)),!0}return!1}function jc(e){var t=dn(e.target);if(t!==null){var n=Rn(t);if(n!==null){if(t=n.tag,t===13){if(t=hc(n),t!==null){e.blockedOn=t,Nc(e.priority,function(){Mc(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Tl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=_s(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Fs=r,n.target.dispatchEvent(r),Fs=null}else return t=rl(n),t!==null&&ba(t),e.blockedOn=n,!1;t.shift()}return!0}function To(e,t,n){Tl(e)&&n.delete(t)}function mp(){Is=!1,qt!==null&&Tl(qt)&&(qt=null),Qt!==null&&Tl(Qt)&&(Qt=null),Yt!==null&&Tl(Yt)&&(Yt=null),Or.forEach(To),Ar.forEach(To)}function fr(e,t){e.blockedOn===t&&(e.blockedOn=null,Is||(Is=!0,Ve.unstable_scheduleCallback(Ve.unstable_NormalPriority,mp)))}function zr(e){function t(l){return fr(l,e)}if(0<dl.length){fr(dl[0],e);for(var n=1;n<dl.length;n++){var r=dl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(qt!==null&&fr(qt,e),Qt!==null&&fr(Qt,e),Yt!==null&&fr(Yt,e),Or.forEach(t),Ar.forEach(t),n=0;n<Ut.length;n++)r=Ut[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ut.length&&(n=Ut[0],n.blockedOn===null);)jc(n),n.blockedOn===null&&Ut.shift()}var Qn=$t.ReactCurrentBatchConfig,ql=!0;function hp(e,t,n,r){var l=U,i=Qn.transition;Qn.transition=null;try{U=1,Ta(e,t,n,r)}finally{U=l,Qn.transition=i}}function gp(e,t,n,r){var l=U,i=Qn.transition;Qn.transition=null;try{U=4,Ta(e,t,n,r)}finally{U=l,Qn.transition=i}}function Ta(e,t,n,r){if(ql){var l=_s(e,t,n,r);if(l===null)ts(e,t,r,Ql,n),bo(e,r);else if(pp(l,e,t,n,r))r.stopPropagation();else if(bo(e,r),t&4&&-1<fp.indexOf(e)){for(;l!==null;){var i=rl(l);if(i!==null&&Rc(i),i=_s(e,t,n,r),i===null&&ts(e,t,r,Ql,n),i===l)break;l=i}l!==null&&r.stopPropagation()}else ts(e,t,r,null,n)}}var Ql=null;function _s(e,t,n,r){if(Ql=null,e=Na(r),e=dn(e),e!==null)if(t=Rn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=hc(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ql=e,null}function Ec(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rp()){case ja:return 1;case xc:return 4;case Gl:case lp:return 16;case wc:return 536870912;default:return 16}default:return 16}}var Gt=null,Fa=null,Fl=null;function bc(){if(Fl)return Fl;var e,t=Fa,n=t.length,r,l="value"in Gt?Gt.value:Gt.textContent,i=l.length;for(e=0;e<n&&t[e]===l[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===l[i-r];r++);return Fl=l.slice(e,1<r?1-r:void 0)}function Ll(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fl(){return!0}function Fo(){return!1}function Qe(e){function t(n,r,l,i,s){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fl:Fo,this.isPropagationStopped=Fo,this}return ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fl)},persist:function(){},isPersistent:fl}),t}var ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},La=Qe(ar),nl=ae({},ar,{view:0,detail:0}),vp=Qe(nl),Vi,qi,pr,ki=ae({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pr&&(pr&&e.type==="mousemove"?(Vi=e.screenX-pr.screenX,qi=e.screenY-pr.screenY):qi=Vi=0,pr=e),Vi)},movementY:function(e){return"movementY"in e?e.movementY:qi}}),Lo=Qe(ki),yp=ae({},ki,{dataTransfer:0}),xp=Qe(yp),wp=ae({},nl,{relatedTarget:0}),Qi=Qe(wp),Sp=ae({},ar,{animationName:0,elapsedTime:0,pseudoElement:0}),kp=Qe(Sp),Rp=ae({},ar,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mp=Qe(Rp),Cp=ae({},ar,{data:0}),Po=Qe(Cp),Np={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ep={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ep[e])?!!t[e]:!1}function Pa(){return bp}var Tp=ae({},nl,{key:function(e){if(e.key){var t=Np[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ll(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pa,charCode:function(e){return e.type==="keypress"?Ll(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ll(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Fp=Qe(Tp),Lp=ae({},ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$o=Qe(Lp),Pp=ae({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pa}),$p=Qe(Pp),Dp=ae({},ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ip=Qe(Dp),_p=ae({},ki,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Op=Qe(_p),Ap=[9,13,27,32],$a=Tt&&"CompositionEvent"in window,jr=null;Tt&&"documentMode"in document&&(jr=document.documentMode);var zp=Tt&&"TextEvent"in window&&!jr,Tc=Tt&&(!$a||jr&&8<jr&&11>=jr),Do=" ",Io=!1;function Fc(e,t){switch(e){case"keyup":return Ap.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pn=!1;function Bp(e,t){switch(e){case"compositionend":return Lc(t);case"keypress":return t.which!==32?null:(Io=!0,Do);case"textInput":return e=t.data,e===Do&&Io?null:e;default:return null}}function Wp(e,t){if(Pn)return e==="compositionend"||!$a&&Fc(e,t)?(e=bc(),Fl=Fa=Gt=null,Pn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tc&&t.locale!=="ko"?null:t.data;default:return null}}var Up={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _o(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Up[e.type]:t==="textarea"}function Pc(e,t,n,r){cc(r),t=Yl(t,"onChange"),0<t.length&&(n=new La("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Er=null,Br=null;function Hp(e){Hc(e,0)}function Ri(e){var t=In(e);if(rc(t))return e}function Gp(e,t){if(e==="change")return t}var $c=!1;if(Tt){var Yi;if(Tt){var Ki="oninput"in document;if(!Ki){var Oo=document.createElement("div");Oo.setAttribute("oninput","return;"),Ki=typeof Oo.oninput=="function"}Yi=Ki}else Yi=!1;$c=Yi&&(!document.documentMode||9<document.documentMode)}function Ao(){Er&&(Er.detachEvent("onpropertychange",Dc),Br=Er=null)}function Dc(e){if(e.propertyName==="value"&&Ri(Br)){var t=[];Pc(t,Br,e,Na(e)),mc(Hp,t)}}function Vp(e,t,n){e==="focusin"?(Ao(),Er=t,Br=n,Er.attachEvent("onpropertychange",Dc)):e==="focusout"&&Ao()}function qp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ri(Br)}function Qp(e,t){if(e==="click")return Ri(t)}function Yp(e,t){if(e==="input"||e==="change")return Ri(t)}function Kp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ct=typeof Object.is=="function"?Object.is:Kp;function Wr(e,t){if(ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!xs.call(t,l)||!ct(e[l],t[l]))return!1}return!0}function zo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bo(e,t){var n=zo(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zo(n)}}function Ic(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ic(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _c(){for(var e=window,t=Wl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wl(e.document)}return t}function Da(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Xp(e){var t=_c(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ic(n.ownerDocument.documentElement,n)){if(r!==null&&Da(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,i=Math.min(r.start,l);r=r.end===void 0?i:Math.min(r.end,l),!e.extend&&i>r&&(l=r,r=i,i=l),l=Bo(n,i);var s=Bo(n,r);l&&s&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Zp=Tt&&"documentMode"in document&&11>=document.documentMode,$n=null,Os=null,br=null,As=!1;function Wo(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;As||$n==null||$n!==Wl(r)||(r=$n,"selectionStart"in r&&Da(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),br&&Wr(br,r)||(br=r,r=Yl(Os,"onSelect"),0<r.length&&(t=new La("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=$n)))}function pl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Dn={animationend:pl("Animation","AnimationEnd"),animationiteration:pl("Animation","AnimationIteration"),animationstart:pl("Animation","AnimationStart"),transitionend:pl("Transition","TransitionEnd")},Xi={},Oc={};Tt&&(Oc=document.createElement("div").style,"AnimationEvent"in window||(delete Dn.animationend.animation,delete Dn.animationiteration.animation,delete Dn.animationstart.animation),"TransitionEvent"in window||delete Dn.transitionend.transition);function Mi(e){if(Xi[e])return Xi[e];if(!Dn[e])return e;var t=Dn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Oc)return Xi[e]=t[n];return e}var Ac=Mi("animationend"),zc=Mi("animationiteration"),Bc=Mi("animationstart"),Wc=Mi("transitionend"),Uc=new Map,Uo="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ln(e,t){Uc.set(e,t),kn(t,[e])}for(var Zi=0;Zi<Uo.length;Zi++){var Ji=Uo[Zi],Jp=Ji.toLowerCase(),em=Ji[0].toUpperCase()+Ji.slice(1);ln(Jp,"on"+em)}ln(Ac,"onAnimationEnd");ln(zc,"onAnimationIteration");ln(Bc,"onAnimationStart");ln("dblclick","onDoubleClick");ln("focusin","onFocus");ln("focusout","onBlur");ln(Wc,"onTransitionEnd");Zn("onMouseEnter",["mouseout","mouseover"]);Zn("onMouseLeave",["mouseout","mouseover"]);Zn("onPointerEnter",["pointerout","pointerover"]);Zn("onPointerLeave",["pointerout","pointerover"]);kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kn("onBeforeInput",["compositionend","keypress","textInput","paste"]);kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Ho(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Jf(r,t,void 0,e),e.currentTarget=null}function Hc(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],o=a.instance,c=a.currentTarget;if(a=a.listener,o!==i&&l.isPropagationStopped())break e;Ho(l,a,c),i=o}else for(s=0;s<r.length;s++){if(a=r[s],o=a.instance,c=a.currentTarget,a=a.listener,o!==i&&l.isPropagationStopped())break e;Ho(l,a,c),i=o}}}if(Hl)throw e=$s,Hl=!1,$s=null,e}function Z(e,t){var n=t[Hs];n===void 0&&(n=t[Hs]=new Set);var r=e+"__bubble";n.has(r)||(Gc(t,e,2,!1),n.add(r))}function es(e,t,n){var r=0;t&&(r|=4),Gc(n,e,r,t)}var ml="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[ml]){e[ml]=!0,Zu.forEach(function(n){n!=="selectionchange"&&(tm.has(n)||es(n,!1,e),es(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ml]||(t[ml]=!0,es("selectionchange",!1,t))}}function Gc(e,t,n,r){switch(Ec(t)){case 1:var l=hp;break;case 4:l=gp;break;default:l=Ta}n=l.bind(null,t,n,e),l=void 0,!Ps||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function ts(e,t,n,r,l){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===l||a.nodeType===8&&a.parentNode===l)break;if(s===4)for(s=r.return;s!==null;){var o=s.tag;if((o===3||o===4)&&(o=s.stateNode.containerInfo,o===l||o.nodeType===8&&o.parentNode===l))return;s=s.return}for(;a!==null;){if(s=dn(a),s===null)return;if(o=s.tag,o===5||o===6){r=i=s;continue e}a=a.parentNode}}r=r.return}mc(function(){var c=i,f=Na(n),p=[];e:{var d=Uc.get(e);if(d!==void 0){var g=La,x=e;switch(e){case"keypress":if(Ll(n)===0)break e;case"keydown":case"keyup":g=Fp;break;case"focusin":x="focus",g=Qi;break;case"focusout":x="blur",g=Qi;break;case"beforeblur":case"afterblur":g=Qi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Lo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=xp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=$p;break;case Ac:case zc:case Bc:g=kp;break;case Wc:g=Ip;break;case"scroll":g=vp;break;case"wheel":g=Op;break;case"copy":case"cut":case"paste":g=Mp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=$o}var y=(t&4)!==0,k=!y&&e==="scroll",h=y?d!==null?d+"Capture":null:d;y=[];for(var m=c,v;m!==null;){v=m;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,h!==null&&(S=_r(m,h),S!=null&&y.push(Hr(m,S,v)))),k)break;m=m.return}0<y.length&&(d=new g(d,x,null,n,f),p.push({event:d,listeners:y}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",d&&n!==Fs&&(x=n.relatedTarget||n.fromElement)&&(dn(x)||x[Ft]))break e;if((g||d)&&(d=f.window===f?f:(d=f.ownerDocument)?d.defaultView||d.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=c,x=x?dn(x):null,x!==null&&(k=Rn(x),x!==k||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=c),g!==x)){if(y=Lo,S="onMouseLeave",h="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(y=$o,S="onPointerLeave",h="onPointerEnter",m="pointer"),k=g==null?d:In(g),v=x==null?d:In(x),d=new y(S,m+"leave",g,n,f),d.target=k,d.relatedTarget=v,S=null,dn(f)===c&&(y=new y(h,m+"enter",x,n,f),y.target=v,y.relatedTarget=k,S=y),k=S,g&&x)t:{for(y=g,h=x,m=0,v=y;v;v=Mn(v))m++;for(v=0,S=h;S;S=Mn(S))v++;for(;0<m-v;)y=Mn(y),m--;for(;0<v-m;)h=Mn(h),v--;for(;m--;){if(y===h||h!==null&&y===h.alternate)break t;y=Mn(y),h=Mn(h)}y=null}else y=null;g!==null&&Go(p,d,g,y,!1),x!==null&&k!==null&&Go(p,k,x,y,!0)}}e:{if(d=c?In(c):window,g=d.nodeName&&d.nodeName.toLowerCase(),g==="select"||g==="input"&&d.type==="file")var N=Gp;else if(_o(d))if($c)N=Yp;else{N=qp;var R=Vp}else(g=d.nodeName)&&g.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(N=Qp);if(N&&(N=N(e,c))){Pc(p,N,n,f);break e}R&&R(e,d,c),e==="focusout"&&(R=d._wrapperState)&&R.controlled&&d.type==="number"&&Ns(d,"number",d.value)}switch(R=c?In(c):window,e){case"focusin":(_o(R)||R.contentEditable==="true")&&($n=R,Os=c,br=null);break;case"focusout":br=Os=$n=null;break;case"mousedown":As=!0;break;case"contextmenu":case"mouseup":case"dragend":As=!1,Wo(p,n,f);break;case"selectionchange":if(Zp)break;case"keydown":case"keyup":Wo(p,n,f)}var C;if($a)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Pn?Fc(e,n)&&(w="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(Tc&&n.locale!=="ko"&&(Pn||w!=="onCompositionStart"?w==="onCompositionEnd"&&Pn&&(C=bc()):(Gt=f,Fa="value"in Gt?Gt.value:Gt.textContent,Pn=!0)),R=Yl(c,w),0<R.length&&(w=new Po(w,e,null,n,f),p.push({event:w,listeners:R}),C?w.data=C:(C=Lc(n),C!==null&&(w.data=C)))),(C=zp?Bp(e,n):Wp(e,n))&&(c=Yl(c,"onBeforeInput"),0<c.length&&(f=new Po("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:c}),f.data=C))}Hc(p,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yl(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,i=l.stateNode;l.tag===5&&i!==null&&(l=i,i=_r(e,n),i!=null&&r.unshift(Hr(e,i,l)),i=_r(e,t),i!=null&&r.push(Hr(e,i,l))),e=e.return}return r}function Mn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Go(e,t,n,r,l){for(var i=t._reactName,s=[];n!==null&&n!==r;){var a=n,o=a.alternate,c=a.stateNode;if(o!==null&&o===r)break;a.tag===5&&c!==null&&(a=c,l?(o=_r(n,i),o!=null&&s.unshift(Hr(n,o,a))):l||(o=_r(n,i),o!=null&&s.push(Hr(n,o,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var nm=/\r\n?/g,rm=/\u0000|\uFFFD/g;function Vo(e){return(typeof e=="string"?e:""+e).replace(nm,`
`).replace(rm,"")}function hl(e,t,n){if(t=Vo(t),Vo(e)!==t&&n)throw Error(E(425))}function Kl(){}var zs=null,Bs=null;function Ws(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Us=typeof setTimeout=="function"?setTimeout:void 0,lm=typeof clearTimeout=="function"?clearTimeout:void 0,qo=typeof Promise=="function"?Promise:void 0,im=typeof queueMicrotask=="function"?queueMicrotask:typeof qo<"u"?function(e){return qo.resolve(null).then(e).catch(sm)}:Us;function sm(e){setTimeout(function(){throw e})}function ns(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),zr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);zr(t)}function Kt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Qo(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var or=Math.random().toString(36).slice(2),yt="__reactFiber$"+or,Gr="__reactProps$"+or,Ft="__reactContainer$"+or,Hs="__reactEvents$"+or,am="__reactListeners$"+or,om="__reactHandles$"+or;function dn(e){var t=e[yt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ft]||n[yt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Qo(e);e!==null;){if(n=e[yt])return n;e=Qo(e)}return t}e=n,n=e.parentNode}return null}function rl(e){return e=e[yt]||e[Ft],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function In(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(E(33))}function Ci(e){return e[Gr]||null}var Gs=[],_n=-1;function sn(e){return{current:e}}function ee(e){0>_n||(e.current=Gs[_n],Gs[_n]=null,_n--)}function X(e,t){_n++,Gs[_n]=e.current,e.current=t}var rn={},Ne=sn(rn),ze=sn(!1),vn=rn;function Jn(e,t){var n=e.type.contextTypes;if(!n)return rn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},i;for(i in n)l[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function Be(e){return e=e.childContextTypes,e!=null}function Xl(){ee(ze),ee(Ne)}function Yo(e,t,n){if(Ne.current!==rn)throw Error(E(168));X(Ne,t),X(ze,n)}function Vc(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(E(108,Vf(e)||"Unknown",l));return ae({},n,r)}function Zl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||rn,vn=Ne.current,X(Ne,e),X(ze,ze.current),!0}function Ko(e,t,n){var r=e.stateNode;if(!r)throw Error(E(169));n?(e=Vc(e,t,vn),r.__reactInternalMemoizedMergedChildContext=e,ee(ze),ee(Ne),X(Ne,e)):ee(ze),X(ze,n)}var Mt=null,Ni=!1,rs=!1;function qc(e){Mt===null?Mt=[e]:Mt.push(e)}function um(e){Ni=!0,qc(e)}function an(){if(!rs&&Mt!==null){rs=!0;var e=0,t=U;try{var n=Mt;for(U=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Mt=null,Ni=!1}catch(l){throw Mt!==null&&(Mt=Mt.slice(e+1)),yc(ja,an),l}finally{U=t,rs=!1}}return null}var On=[],An=0,Jl=null,ei=0,Ke=[],Xe=0,yn=null,jt=1,Et="";function un(e,t){On[An++]=ei,On[An++]=Jl,Jl=e,ei=t}function Qc(e,t,n){Ke[Xe++]=jt,Ke[Xe++]=Et,Ke[Xe++]=yn,yn=e;var r=jt;e=Et;var l=32-ot(r)-1;r&=~(1<<l),n+=1;var i=32-ot(t)+l;if(30<i){var s=l-l%5;i=(r&(1<<s)-1).toString(32),r>>=s,l-=s,jt=1<<32-ot(t)+l|n<<l|r,Et=i+e}else jt=1<<i|n<<l|r,Et=e}function Ia(e){e.return!==null&&(un(e,1),Qc(e,1,0))}function _a(e){for(;e===Jl;)Jl=On[--An],On[An]=null,ei=On[--An],On[An]=null;for(;e===yn;)yn=Ke[--Xe],Ke[Xe]=null,Et=Ke[--Xe],Ke[Xe]=null,jt=Ke[--Xe],Ke[Xe]=null}var Ge=null,He=null,le=!1,at=null;function Yc(e,t){var n=Je(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Xo(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ge=e,He=Kt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ge=e,He=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=yn!==null?{id:jt,overflow:Et}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Je(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ge=e,He=null,!0):!1;default:return!1}}function Vs(e){return(e.mode&1)!==0&&(e.flags&128)===0}function qs(e){if(le){var t=He;if(t){var n=t;if(!Xo(e,t)){if(Vs(e))throw Error(E(418));t=Kt(n.nextSibling);var r=Ge;t&&Xo(e,t)?Yc(r,n):(e.flags=e.flags&-4097|2,le=!1,Ge=e)}}else{if(Vs(e))throw Error(E(418));e.flags=e.flags&-4097|2,le=!1,Ge=e}}}function Zo(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ge=e}function gl(e){if(e!==Ge)return!1;if(!le)return Zo(e),le=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ws(e.type,e.memoizedProps)),t&&(t=He)){if(Vs(e))throw Kc(),Error(E(418));for(;t;)Yc(e,t),t=Kt(t.nextSibling)}if(Zo(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(E(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){He=Kt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}He=null}}else He=Ge?Kt(e.stateNode.nextSibling):null;return!0}function Kc(){for(var e=He;e;)e=Kt(e.nextSibling)}function er(){He=Ge=null,le=!1}function Oa(e){at===null?at=[e]:at.push(e)}var cm=$t.ReactCurrentBatchConfig;function mr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,e));var l=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var a=l.refs;s===null?delete a[i]:a[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,e))}return e}function vl(e,t){throw e=Object.prototype.toString.call(t),Error(E(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jo(e){var t=e._init;return t(e._payload)}function Xc(e){function t(h,m){if(e){var v=h.deletions;v===null?(h.deletions=[m],h.flags|=16):v.push(m)}}function n(h,m){if(!e)return null;for(;m!==null;)t(h,m),m=m.sibling;return null}function r(h,m){for(h=new Map;m!==null;)m.key!==null?h.set(m.key,m):h.set(m.index,m),m=m.sibling;return h}function l(h,m){return h=en(h,m),h.index=0,h.sibling=null,h}function i(h,m,v){return h.index=v,e?(v=h.alternate,v!==null?(v=v.index,v<m?(h.flags|=2,m):v):(h.flags|=2,m)):(h.flags|=1048576,m)}function s(h){return e&&h.alternate===null&&(h.flags|=2),h}function a(h,m,v,S){return m===null||m.tag!==6?(m=cs(v,h.mode,S),m.return=h,m):(m=l(m,v),m.return=h,m)}function o(h,m,v,S){var N=v.type;return N===Ln?f(h,m,v.props.children,S,v.key):m!==null&&(m.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Bt&&Jo(N)===m.type)?(S=l(m,v.props),S.ref=mr(h,m,v),S.return=h,S):(S=Al(v.type,v.key,v.props,null,h.mode,S),S.ref=mr(h,m,v),S.return=h,S)}function c(h,m,v,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=ds(v,h.mode,S),m.return=h,m):(m=l(m,v.children||[]),m.return=h,m)}function f(h,m,v,S,N){return m===null||m.tag!==7?(m=hn(v,h.mode,S,N),m.return=h,m):(m=l(m,v),m.return=h,m)}function p(h,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=cs(""+m,h.mode,v),m.return=h,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case sl:return v=Al(m.type,m.key,m.props,null,h.mode,v),v.ref=mr(h,null,m),v.return=h,v;case Fn:return m=ds(m,h.mode,v),m.return=h,m;case Bt:var S=m._init;return p(h,S(m._payload),v)}if(kr(m)||ur(m))return m=hn(m,h.mode,v,null),m.return=h,m;vl(h,m)}return null}function d(h,m,v,S){var N=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return N!==null?null:a(h,m,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case sl:return v.key===N?o(h,m,v,S):null;case Fn:return v.key===N?c(h,m,v,S):null;case Bt:return N=v._init,d(h,m,N(v._payload),S)}if(kr(v)||ur(v))return N!==null?null:f(h,m,v,S,null);vl(h,v)}return null}function g(h,m,v,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return h=h.get(v)||null,a(m,h,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case sl:return h=h.get(S.key===null?v:S.key)||null,o(m,h,S,N);case Fn:return h=h.get(S.key===null?v:S.key)||null,c(m,h,S,N);case Bt:var R=S._init;return g(h,m,v,R(S._payload),N)}if(kr(S)||ur(S))return h=h.get(v)||null,f(m,h,S,N,null);vl(m,S)}return null}function x(h,m,v,S){for(var N=null,R=null,C=m,w=m=0,F=null;C!==null&&w<v.length;w++){C.index>w?(F=C,C=null):F=C.sibling;var T=d(h,C,v[w],S);if(T===null){C===null&&(C=F);break}e&&C&&T.alternate===null&&t(h,C),m=i(T,m,w),R===null?N=T:R.sibling=T,R=T,C=F}if(w===v.length)return n(h,C),le&&un(h,w),N;if(C===null){for(;w<v.length;w++)C=p(h,v[w],S),C!==null&&(m=i(C,m,w),R===null?N=C:R.sibling=C,R=C);return le&&un(h,w),N}for(C=r(h,C);w<v.length;w++)F=g(C,h,w,v[w],S),F!==null&&(e&&F.alternate!==null&&C.delete(F.key===null?w:F.key),m=i(F,m,w),R===null?N=F:R.sibling=F,R=F);return e&&C.forEach(function(I){return t(h,I)}),le&&un(h,w),N}function y(h,m,v,S){var N=ur(v);if(typeof N!="function")throw Error(E(150));if(v=N.call(v),v==null)throw Error(E(151));for(var R=N=null,C=m,w=m=0,F=null,T=v.next();C!==null&&!T.done;w++,T=v.next()){C.index>w?(F=C,C=null):F=C.sibling;var I=d(h,C,T.value,S);if(I===null){C===null&&(C=F);break}e&&C&&I.alternate===null&&t(h,C),m=i(I,m,w),R===null?N=I:R.sibling=I,R=I,C=F}if(T.done)return n(h,C),le&&un(h,w),N;if(C===null){for(;!T.done;w++,T=v.next())T=p(h,T.value,S),T!==null&&(m=i(T,m,w),R===null?N=T:R.sibling=T,R=T);return le&&un(h,w),N}for(C=r(h,C);!T.done;w++,T=v.next())T=g(C,h,w,T.value,S),T!==null&&(e&&T.alternate!==null&&C.delete(T.key===null?w:T.key),m=i(T,m,w),R===null?N=T:R.sibling=T,R=T);return e&&C.forEach(function(Y){return t(h,Y)}),le&&un(h,w),N}function k(h,m,v,S){if(typeof v=="object"&&v!==null&&v.type===Ln&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case sl:e:{for(var N=v.key,R=m;R!==null;){if(R.key===N){if(N=v.type,N===Ln){if(R.tag===7){n(h,R.sibling),m=l(R,v.props.children),m.return=h,h=m;break e}}else if(R.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Bt&&Jo(N)===R.type){n(h,R.sibling),m=l(R,v.props),m.ref=mr(h,R,v),m.return=h,h=m;break e}n(h,R);break}else t(h,R);R=R.sibling}v.type===Ln?(m=hn(v.props.children,h.mode,S,v.key),m.return=h,h=m):(S=Al(v.type,v.key,v.props,null,h.mode,S),S.ref=mr(h,m,v),S.return=h,h=S)}return s(h);case Fn:e:{for(R=v.key;m!==null;){if(m.key===R)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(h,m.sibling),m=l(m,v.children||[]),m.return=h,h=m;break e}else{n(h,m);break}else t(h,m);m=m.sibling}m=ds(v,h.mode,S),m.return=h,h=m}return s(h);case Bt:return R=v._init,k(h,m,R(v._payload),S)}if(kr(v))return x(h,m,v,S);if(ur(v))return y(h,m,v,S);vl(h,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(h,m.sibling),m=l(m,v),m.return=h,h=m):(n(h,m),m=cs(v,h.mode,S),m.return=h,h=m),s(h)):n(h,m)}return k}var tr=Xc(!0),Zc=Xc(!1),ti=sn(null),ni=null,zn=null,Aa=null;function za(){Aa=zn=ni=null}function Ba(e){var t=ti.current;ee(ti),e._currentValue=t}function Qs(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Yn(e,t){ni=e,Aa=zn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ae=!0),e.firstContext=null)}function tt(e){var t=e._currentValue;if(Aa!==e)if(e={context:e,memoizedValue:t,next:null},zn===null){if(ni===null)throw Error(E(308));zn=e,ni.dependencies={lanes:0,firstContext:e}}else zn=zn.next=e;return t}var fn=null;function Wa(e){fn===null?fn=[e]:fn.push(e)}function Jc(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,Wa(t)):(n.next=l.next,l.next=n),t.interleaved=n,Lt(e,r)}function Lt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Wt=!1;function Ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ed(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xt(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,W&2){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,Lt(e,n)}return l=r.interleaved,l===null?(t.next=t,Wa(r)):(t.next=l.next,l.next=t),r.interleaved=t,Lt(e,n)}function Pl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ea(e,n)}}function eu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?l=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?l=i=t:i=i.next=t}else l=i=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ri(e,t,n,r){var l=e.updateQueue;Wt=!1;var i=l.firstBaseUpdate,s=l.lastBaseUpdate,a=l.shared.pending;if(a!==null){l.shared.pending=null;var o=a,c=o.next;o.next=null,s===null?i=c:s.next=c,s=o;var f=e.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==s&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=o))}if(i!==null){var p=l.baseState;s=0,f=c=o=null,a=i;do{var d=a.lane,g=a.eventTime;if((r&d)===d){f!==null&&(f=f.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=e,y=a;switch(d=t,g=n,y.tag){case 1:if(x=y.payload,typeof x=="function"){p=x.call(g,p,d);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,d=typeof x=="function"?x.call(g,p,d):x,d==null)break e;p=ae({},p,d);break e;case 2:Wt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=l.effects,d===null?l.effects=[a]:d.push(a))}else g={eventTime:g,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=g,o=p):f=f.next=g,s|=d;if(a=a.next,a===null){if(a=l.shared.pending,a===null)break;d=a,a=d.next,d.next=null,l.lastBaseUpdate=d,l.shared.pending=null}}while(!0);if(f===null&&(o=p),l.baseState=o,l.firstBaseUpdate=c,l.lastBaseUpdate=f,t=l.shared.interleaved,t!==null){l=t;do s|=l.lane,l=l.next;while(l!==t)}else i===null&&(l.shared.lanes=0);wn|=s,e.lanes=s,e.memoizedState=p}}function tu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(E(191,l));l.call(r)}}}var ll={},wt=sn(ll),Vr=sn(ll),qr=sn(ll);function pn(e){if(e===ll)throw Error(E(174));return e}function Ha(e,t){switch(X(qr,t),X(Vr,e),X(wt,ll),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Es(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Es(t,e)}ee(wt),X(wt,t)}function nr(){ee(wt),ee(Vr),ee(qr)}function td(e){pn(qr.current);var t=pn(wt.current),n=Es(t,e.type);t!==n&&(X(Vr,e),X(wt,n))}function Ga(e){Vr.current===e&&(ee(wt),ee(Vr))}var ie=sn(0);function li(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ls=[];function Va(){for(var e=0;e<ls.length;e++)ls[e]._workInProgressVersionPrimary=null;ls.length=0}var $l=$t.ReactCurrentDispatcher,is=$t.ReactCurrentBatchConfig,xn=0,se=null,pe=null,ge=null,ii=!1,Tr=!1,Qr=0,dm=0;function Re(){throw Error(E(321))}function qa(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ct(e[n],t[n]))return!1;return!0}function Qa(e,t,n,r,l,i){if(xn=i,se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$l.current=e===null||e.memoizedState===null?hm:gm,e=n(r,l),Tr){i=0;do{if(Tr=!1,Qr=0,25<=i)throw Error(E(301));i+=1,ge=pe=null,t.updateQueue=null,$l.current=vm,e=n(r,l)}while(Tr)}if($l.current=si,t=pe!==null&&pe.next!==null,xn=0,ge=pe=se=null,ii=!1,t)throw Error(E(300));return e}function Ya(){var e=Qr!==0;return Qr=0,e}function gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ge===null?se.memoizedState=ge=e:ge=ge.next=e,ge}function nt(){if(pe===null){var e=se.alternate;e=e!==null?e.memoizedState:null}else e=pe.next;var t=ge===null?se.memoizedState:ge.next;if(t!==null)ge=t,pe=e;else{if(e===null)throw Error(E(310));pe=e,e={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},ge===null?se.memoizedState=ge=e:ge=ge.next=e}return ge}function Yr(e,t){return typeof t=="function"?t(e):t}function ss(e){var t=nt(),n=t.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=e;var r=pe,l=r.baseQueue,i=n.pending;if(i!==null){if(l!==null){var s=l.next;l.next=i.next,i.next=s}r.baseQueue=l=i,n.pending=null}if(l!==null){i=l.next,r=r.baseState;var a=s=null,o=null,c=i;do{var f=c.lane;if((xn&f)===f)o!==null&&(o=o.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var p={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};o===null?(a=o=p,s=r):o=o.next=p,se.lanes|=f,wn|=f}c=c.next}while(c!==null&&c!==i);o===null?s=r:o.next=a,ct(r,t.memoizedState)||(Ae=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=o,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do i=l.lane,se.lanes|=i,wn|=i,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function as(e){var t=nt(),n=t.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,i=t.memoizedState;if(l!==null){n.pending=null;var s=l=l.next;do i=e(i,s.action),s=s.next;while(s!==l);ct(i,t.memoizedState)||(Ae=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function nd(){}function rd(e,t){var n=se,r=nt(),l=t(),i=!ct(r.memoizedState,l);if(i&&(r.memoizedState=l,Ae=!0),r=r.queue,Ka(sd.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||ge!==null&&ge.memoizedState.tag&1){if(n.flags|=2048,Kr(9,id.bind(null,n,r,l,t),void 0,null),ve===null)throw Error(E(349));xn&30||ld(n,t,l)}return l}function ld(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=se.updateQueue,t===null?(t={lastEffect:null,stores:null},se.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function id(e,t,n,r){t.value=n,t.getSnapshot=r,ad(t)&&od(e)}function sd(e,t,n){return n(function(){ad(t)&&od(e)})}function ad(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ct(e,n)}catch{return!0}}function od(e){var t=Lt(e,1);t!==null&&ut(t,e,1,-1)}function nu(e){var t=gt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yr,lastRenderedState:e},t.queue=e,e=e.dispatch=mm.bind(null,se,e),[t.memoizedState,e]}function Kr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=se.updateQueue,t===null?(t={lastEffect:null,stores:null},se.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ud(){return nt().memoizedState}function Dl(e,t,n,r){var l=gt();se.flags|=e,l.memoizedState=Kr(1|t,n,void 0,r===void 0?null:r)}function ji(e,t,n,r){var l=nt();r=r===void 0?null:r;var i=void 0;if(pe!==null){var s=pe.memoizedState;if(i=s.destroy,r!==null&&qa(r,s.deps)){l.memoizedState=Kr(t,n,i,r);return}}se.flags|=e,l.memoizedState=Kr(1|t,n,i,r)}function ru(e,t){return Dl(8390656,8,e,t)}function Ka(e,t){return ji(2048,8,e,t)}function cd(e,t){return ji(4,2,e,t)}function dd(e,t){return ji(4,4,e,t)}function fd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pd(e,t,n){return n=n!=null?n.concat([e]):null,ji(4,4,fd.bind(null,t,e),n)}function Xa(){}function md(e,t){var n=nt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function hd(e,t){var n=nt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function gd(e,t,n){return xn&21?(ct(n,t)||(n=Sc(),se.lanes|=n,wn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ae=!0),e.memoizedState=n)}function fm(e,t){var n=U;U=n!==0&&4>n?n:4,e(!0);var r=is.transition;is.transition={};try{e(!1),t()}finally{U=n,is.transition=r}}function vd(){return nt().memoizedState}function pm(e,t,n){var r=Jt(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yd(e))xd(t,n);else if(n=Jc(e,t,n,r),n!==null){var l=Le();ut(n,e,r,l),wd(n,t,r)}}function mm(e,t,n){var r=Jt(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yd(e))xd(t,l);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,a=i(s,n);if(l.hasEagerState=!0,l.eagerState=a,ct(a,s)){var o=t.interleaved;o===null?(l.next=l,Wa(t)):(l.next=o.next,o.next=l),t.interleaved=l;return}}catch{}finally{}n=Jc(e,t,l,r),n!==null&&(l=Le(),ut(n,e,r,l),wd(n,t,r))}}function yd(e){var t=e.alternate;return e===se||t!==null&&t===se}function xd(e,t){Tr=ii=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function wd(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ea(e,n)}}var si={readContext:tt,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useInsertionEffect:Re,useLayoutEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useMutableSource:Re,useSyncExternalStore:Re,useId:Re,unstable_isNewReconciler:!1},hm={readContext:tt,useCallback:function(e,t){return gt().memoizedState=[e,t===void 0?null:t],e},useContext:tt,useEffect:ru,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Dl(4194308,4,fd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Dl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Dl(4,2,e,t)},useMemo:function(e,t){var n=gt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=gt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=pm.bind(null,se,e),[r.memoizedState,e]},useRef:function(e){var t=gt();return e={current:e},t.memoizedState=e},useState:nu,useDebugValue:Xa,useDeferredValue:function(e){return gt().memoizedState=e},useTransition:function(){var e=nu(!1),t=e[0];return e=fm.bind(null,e[1]),gt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=se,l=gt();if(le){if(n===void 0)throw Error(E(407));n=n()}else{if(n=t(),ve===null)throw Error(E(349));xn&30||ld(r,t,n)}l.memoizedState=n;var i={value:n,getSnapshot:t};return l.queue=i,ru(sd.bind(null,r,i,e),[e]),r.flags|=2048,Kr(9,id.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=gt(),t=ve.identifierPrefix;if(le){var n=Et,r=jt;n=(r&~(1<<32-ot(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Qr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=dm++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},gm={readContext:tt,useCallback:md,useContext:tt,useEffect:Ka,useImperativeHandle:pd,useInsertionEffect:cd,useLayoutEffect:dd,useMemo:hd,useReducer:ss,useRef:ud,useState:function(){return ss(Yr)},useDebugValue:Xa,useDeferredValue:function(e){var t=nt();return gd(t,pe.memoizedState,e)},useTransition:function(){var e=ss(Yr)[0],t=nt().memoizedState;return[e,t]},useMutableSource:nd,useSyncExternalStore:rd,useId:vd,unstable_isNewReconciler:!1},vm={readContext:tt,useCallback:md,useContext:tt,useEffect:Ka,useImperativeHandle:pd,useInsertionEffect:cd,useLayoutEffect:dd,useMemo:hd,useReducer:as,useRef:ud,useState:function(){return as(Yr)},useDebugValue:Xa,useDeferredValue:function(e){var t=nt();return pe===null?t.memoizedState=e:gd(t,pe.memoizedState,e)},useTransition:function(){var e=as(Yr)[0],t=nt().memoizedState;return[e,t]},useMutableSource:nd,useSyncExternalStore:rd,useId:vd,unstable_isNewReconciler:!1};function it(e,t){if(e&&e.defaultProps){t=ae({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ys(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ae({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ei={isMounted:function(e){return(e=e._reactInternals)?Rn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Le(),l=Jt(e),i=bt(r,l);i.payload=t,n!=null&&(i.callback=n),t=Xt(e,i,l),t!==null&&(ut(t,e,l,r),Pl(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Le(),l=Jt(e),i=bt(r,l);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Xt(e,i,l),t!==null&&(ut(t,e,l,r),Pl(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Le(),r=Jt(e),l=bt(n,r);l.tag=2,t!=null&&(l.callback=t),t=Xt(e,l,r),t!==null&&(ut(t,e,r,n),Pl(t,e,r))}};function lu(e,t,n,r,l,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,s):t.prototype&&t.prototype.isPureReactComponent?!Wr(n,r)||!Wr(l,i):!0}function Sd(e,t,n){var r=!1,l=rn,i=t.contextType;return typeof i=="object"&&i!==null?i=tt(i):(l=Be(t)?vn:Ne.current,r=t.contextTypes,i=(r=r!=null)?Jn(e,l):rn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ei,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=i),t}function iu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ei.enqueueReplaceState(t,t.state,null)}function Ks(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},Ua(e);var i=t.contextType;typeof i=="object"&&i!==null?l.context=tt(i):(i=Be(t)?vn:Ne.current,l.context=Jn(e,i)),l.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ys(e,t,i,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Ei.enqueueReplaceState(l,l.state,null),ri(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function rr(e,t){try{var n="",r=t;do n+=Gf(r),r=r.return;while(r);var l=n}catch(i){l=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:l,digest:null}}function os(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Xs(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ym=typeof WeakMap=="function"?WeakMap:Map;function kd(e,t,n){n=bt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){oi||(oi=!0,aa=r),Xs(e,t)},n}function Rd(e,t,n){n=bt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){Xs(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Xs(e,t),typeof r!="function"&&(Zt===null?Zt=new Set([this]):Zt.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function su(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ym;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=Lm.bind(null,e,t,n),t.then(e,e))}function au(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ou(e,t,n,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bt(-1,1),t.tag=2,Xt(n,t,1))),n.lanes|=1),e)}var xm=$t.ReactCurrentOwner,Ae=!1;function Fe(e,t,n,r){t.child=e===null?Zc(t,null,n,r):tr(t,e.child,n,r)}function uu(e,t,n,r,l){n=n.render;var i=t.ref;return Yn(t,l),r=Qa(e,t,n,r,i,l),n=Ya(),e!==null&&!Ae?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Pt(e,t,l)):(le&&n&&Ia(t),t.flags|=1,Fe(e,t,r,l),t.child)}function cu(e,t,n,r,l){if(e===null){var i=n.type;return typeof i=="function"&&!io(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Md(e,t,i,r,l)):(e=Al(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&l)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:Wr,n(s,r)&&e.ref===t.ref)return Pt(e,t,l)}return t.flags|=1,e=en(i,r),e.ref=t.ref,e.return=t,t.child=e}function Md(e,t,n,r,l){if(e!==null){var i=e.memoizedProps;if(Wr(i,r)&&e.ref===t.ref)if(Ae=!1,t.pendingProps=r=i,(e.lanes&l)!==0)e.flags&131072&&(Ae=!0);else return t.lanes=e.lanes,Pt(e,t,l)}return Zs(e,t,n,r,l)}function Cd(e,t,n){var r=t.pendingProps,l=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},X(Wn,Ue),Ue|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,X(Wn,Ue),Ue|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,X(Wn,Ue),Ue|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,X(Wn,Ue),Ue|=r;return Fe(e,t,l,n),t.child}function Nd(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Zs(e,t,n,r,l){var i=Be(n)?vn:Ne.current;return i=Jn(t,i),Yn(t,l),n=Qa(e,t,n,r,i,l),r=Ya(),e!==null&&!Ae?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Pt(e,t,l)):(le&&r&&Ia(t),t.flags|=1,Fe(e,t,n,l),t.child)}function du(e,t,n,r,l){if(Be(n)){var i=!0;Zl(t)}else i=!1;if(Yn(t,l),t.stateNode===null)Il(e,t),Sd(t,n,r),Ks(t,n,r,l),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var o=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=tt(c):(c=Be(n)?vn:Ne.current,c=Jn(t,c));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||o!==c)&&iu(t,s,r,c),Wt=!1;var d=t.memoizedState;s.state=d,ri(t,r,s,l),o=t.memoizedState,a!==r||d!==o||ze.current||Wt?(typeof f=="function"&&(Ys(t,n,f,r),o=t.memoizedState),(a=Wt||lu(t,n,a,r,d,o,c))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=o),s.props=r,s.state=o,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,ed(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:it(t.type,a),s.props=c,p=t.pendingProps,d=s.context,o=n.contextType,typeof o=="object"&&o!==null?o=tt(o):(o=Be(n)?vn:Ne.current,o=Jn(t,o));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||d!==o)&&iu(t,s,r,o),Wt=!1,d=t.memoizedState,s.state=d,ri(t,r,s,l);var x=t.memoizedState;a!==p||d!==x||ze.current||Wt?(typeof g=="function"&&(Ys(t,n,g,r),x=t.memoizedState),(c=Wt||lu(t,n,c,r,d,x,o)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,x,o),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,x,o)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),s.props=r,s.state=x,s.context=o,r=c):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Js(e,t,n,r,i,l)}function Js(e,t,n,r,l,i){Nd(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return l&&Ko(t,n,!1),Pt(e,t,i);r=t.stateNode,xm.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=tr(t,e.child,null,i),t.child=tr(t,null,a,i)):Fe(e,t,a,i),t.memoizedState=r.state,l&&Ko(t,n,!0),t.child}function jd(e){var t=e.stateNode;t.pendingContext?Yo(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Yo(e,t.context,!1),Ha(e,t.containerInfo)}function fu(e,t,n,r,l){return er(),Oa(l),t.flags|=256,Fe(e,t,n,r),t.child}var ea={dehydrated:null,treeContext:null,retryLane:0};function ta(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ed(e,t,n){var r=t.pendingProps,l=ie.current,i=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(l&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),X(ie,l&1),e===null)return qs(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,i?(r=t.mode,i=t.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=Fi(s,r,0,null),e=hn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ta(n),t.memoizedState=ea,e):Za(t,s));if(l=e.memoizedState,l!==null&&(a=l.dehydrated,a!==null))return wm(e,t,s,r,a,l,n);if(i){i=r.fallback,s=t.mode,l=e.child,a=l.sibling;var o={mode:"hidden",children:r.children};return!(s&1)&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=o,t.deletions=null):(r=en(l,o),r.subtreeFlags=l.subtreeFlags&14680064),a!==null?i=en(a,i):(i=hn(i,s,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,s=e.child.memoizedState,s=s===null?ta(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=ea,r}return i=e.child,e=i.sibling,r=en(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Za(e,t){return t=Fi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function yl(e,t,n,r){return r!==null&&Oa(r),tr(t,e.child,null,n),e=Za(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wm(e,t,n,r,l,i,s){if(n)return t.flags&256?(t.flags&=-257,r=os(Error(E(422))),yl(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,l=t.mode,r=Fi({mode:"visible",children:r.children},l,0,null),i=hn(i,l,s,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&tr(t,e.child,null,s),t.child.memoizedState=ta(s),t.memoizedState=ea,i);if(!(t.mode&1))return yl(e,t,s,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(E(419)),r=os(i,r,void 0),yl(e,t,s,r)}if(a=(s&e.childLanes)!==0,Ae||a){if(r=ve,r!==null){switch(s&-s){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|s)?0:l,l!==0&&l!==i.retryLane&&(i.retryLane=l,Lt(e,l),ut(r,e,l,-1))}return lo(),r=os(Error(E(421))),yl(e,t,s,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=Pm.bind(null,e),l._reactRetry=t,null):(e=i.treeContext,He=Kt(l.nextSibling),Ge=t,le=!0,at=null,e!==null&&(Ke[Xe++]=jt,Ke[Xe++]=Et,Ke[Xe++]=yn,jt=e.id,Et=e.overflow,yn=t),t=Za(t,r.children),t.flags|=4096,t)}function pu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Qs(e.return,t,n)}function us(e,t,n,r,l){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=l)}function bd(e,t,n){var r=t.pendingProps,l=r.revealOrder,i=r.tail;if(Fe(e,t,r.children,n),r=ie.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pu(e,n,t);else if(e.tag===19)pu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(X(ie,r),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&li(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),us(t,!1,l,n,i);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&li(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}us(t,!0,n,null,i);break;case"together":us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Il(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),wn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(E(153));if(t.child!==null){for(e=t.child,n=en(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=en(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Sm(e,t,n){switch(t.tag){case 3:jd(t),er();break;case 5:td(t);break;case 1:Be(t.type)&&Zl(t);break;case 4:Ha(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;X(ti,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(X(ie,ie.current&1),t.flags|=128,null):n&t.child.childLanes?Ed(e,t,n):(X(ie,ie.current&1),e=Pt(e,t,n),e!==null?e.sibling:null);X(ie,ie.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return bd(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),X(ie,ie.current),r)break;return null;case 22:case 23:return t.lanes=0,Cd(e,t,n)}return Pt(e,t,n)}var Td,na,Fd,Ld;Td=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};na=function(){};Fd=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,pn(wt.current);var i=null;switch(n){case"input":l=Ms(e,l),r=Ms(e,r),i=[];break;case"select":l=ae({},l,{value:void 0}),r=ae({},r,{value:void 0}),i=[];break;case"textarea":l=js(e,l),r=js(e,r),i=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Kl)}bs(n,r);var s;n=null;for(c in l)if(!r.hasOwnProperty(c)&&l.hasOwnProperty(c)&&l[c]!=null)if(c==="style"){var a=l[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Dr.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var o=r[c];if(a=l!=null?l[c]:void 0,r.hasOwnProperty(c)&&o!==a&&(o!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||o&&o.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in o)o.hasOwnProperty(s)&&a[s]!==o[s]&&(n||(n={}),n[s]=o[s])}else n||(i||(i=[]),i.push(c,n)),n=o;else c==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,a=a?a.__html:void 0,o!=null&&a!==o&&(i=i||[]).push(c,o)):c==="children"?typeof o!="string"&&typeof o!="number"||(i=i||[]).push(c,""+o):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Dr.hasOwnProperty(c)?(o!=null&&c==="onScroll"&&Z("scroll",e),i||a===o||(i=[])):(i=i||[]).push(c,o))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Ld=function(e,t,n,r){n!==r&&(t.flags|=4)};function hr(e,t){if(!le)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Me(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function km(e,t,n){var r=t.pendingProps;switch(_a(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(t),null;case 1:return Be(t.type)&&Xl(),Me(t),null;case 3:return r=t.stateNode,nr(),ee(ze),ee(Ne),Va(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(gl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,at!==null&&(ca(at),at=null))),na(e,t),Me(t),null;case 5:Ga(t);var l=pn(qr.current);if(n=t.type,e!==null&&t.stateNode!=null)Fd(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(E(166));return Me(t),null}if(e=pn(wt.current),gl(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[yt]=t,r[Gr]=i,e=(t.mode&1)!==0,n){case"dialog":Z("cancel",r),Z("close",r);break;case"iframe":case"object":case"embed":Z("load",r);break;case"video":case"audio":for(l=0;l<Mr.length;l++)Z(Mr[l],r);break;case"source":Z("error",r);break;case"img":case"image":case"link":Z("error",r),Z("load",r);break;case"details":Z("toggle",r);break;case"input":ko(r,i),Z("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Z("invalid",r);break;case"textarea":Mo(r,i),Z("invalid",r)}bs(n,i),l=null;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];s==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&hl(r.textContent,a,e),l=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&hl(r.textContent,a,e),l=["children",""+a]):Dr.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Z("scroll",r)}switch(n){case"input":al(r),Ro(r,i,!0);break;case"textarea":al(r),Co(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Kl)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sc(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[yt]=t,e[Gr]=r,Td(e,t,!1,!1),t.stateNode=e;e:{switch(s=Ts(n,r),n){case"dialog":Z("cancel",e),Z("close",e),l=r;break;case"iframe":case"object":case"embed":Z("load",e),l=r;break;case"video":case"audio":for(l=0;l<Mr.length;l++)Z(Mr[l],e);l=r;break;case"source":Z("error",e),l=r;break;case"img":case"image":case"link":Z("error",e),Z("load",e),l=r;break;case"details":Z("toggle",e),l=r;break;case"input":ko(e,r),l=Ms(e,r),Z("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=ae({},r,{value:void 0}),Z("invalid",e);break;case"textarea":Mo(e,r),l=js(e,r),Z("invalid",e);break;default:l=r}bs(n,l),a=l;for(i in a)if(a.hasOwnProperty(i)){var o=a[i];i==="style"?uc(e,o):i==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&ac(e,o)):i==="children"?typeof o=="string"?(n!=="textarea"||o!=="")&&Ir(e,o):typeof o=="number"&&Ir(e,""+o):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Dr.hasOwnProperty(i)?o!=null&&i==="onScroll"&&Z("scroll",e):o!=null&&ka(e,i,o,s))}switch(n){case"input":al(e),Ro(e,r,!1);break;case"textarea":al(e),Co(e);break;case"option":r.value!=null&&e.setAttribute("value",""+nn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Gn(e,!!r.multiple,i,!1):r.defaultValue!=null&&Gn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Kl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Me(t),null;case 6:if(e&&t.stateNode!=null)Ld(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(E(166));if(n=pn(qr.current),pn(wt.current),gl(t)){if(r=t.stateNode,n=t.memoizedProps,r[yt]=t,(i=r.nodeValue!==n)&&(e=Ge,e!==null))switch(e.tag){case 3:hl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hl(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yt]=t,t.stateNode=r}return Me(t),null;case 13:if(ee(ie),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(le&&He!==null&&t.mode&1&&!(t.flags&128))Kc(),er(),t.flags|=98560,i=!1;else if(i=gl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(E(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(E(317));i[yt]=t}else er(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Me(t),i=!1}else at!==null&&(ca(at),at=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ie.current&1?me===0&&(me=3):lo())),t.updateQueue!==null&&(t.flags|=4),Me(t),null);case 4:return nr(),na(e,t),e===null&&Ur(t.stateNode.containerInfo),Me(t),null;case 10:return Ba(t.type._context),Me(t),null;case 17:return Be(t.type)&&Xl(),Me(t),null;case 19:if(ee(ie),i=t.memoizedState,i===null)return Me(t),null;if(r=(t.flags&128)!==0,s=i.rendering,s===null)if(r)hr(i,!1);else{if(me!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=li(e),s!==null){for(t.flags|=128,hr(i,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return X(ie,ie.current&1|2),t.child}e=e.sibling}i.tail!==null&&ue()>lr&&(t.flags|=128,r=!0,hr(i,!1),t.lanes=4194304)}else{if(!r)if(e=li(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),hr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!le)return Me(t),null}else 2*ue()-i.renderingStartTime>lr&&n!==1073741824&&(t.flags|=128,r=!0,hr(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,n!==null?n.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ue(),t.sibling=null,n=ie.current,X(ie,r?n&1|2:n&1),t):(Me(t),null);case 22:case 23:return ro(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ue&1073741824&&(Me(t),t.subtreeFlags&6&&(t.flags|=8192)):Me(t),null;case 24:return null;case 25:return null}throw Error(E(156,t.tag))}function Rm(e,t){switch(_a(t),t.tag){case 1:return Be(t.type)&&Xl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return nr(),ee(ze),ee(Ne),Va(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ga(t),null;case 13:if(ee(ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(E(340));er()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ee(ie),null;case 4:return nr(),null;case 10:return Ba(t.type._context),null;case 22:case 23:return ro(),null;case 24:return null;default:return null}}var xl=!1,Ce=!1,Mm=typeof WeakSet=="function"?WeakSet:Set,$=null;function Bn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){oe(e,t,r)}else n.current=null}function ra(e,t,n){try{n()}catch(r){oe(e,t,r)}}var mu=!1;function Cm(e,t){if(zs=ql,e=_c(),Da(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,a=-1,o=-1,c=0,f=0,p=e,d=null;t:for(;;){for(var g;p!==n||l!==0&&p.nodeType!==3||(a=s+l),p!==i||r!==0&&p.nodeType!==3||(o=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(g=p.firstChild)!==null;)d=p,p=g;for(;;){if(p===e)break t;if(d===n&&++c===l&&(a=s),d===i&&++f===r&&(o=s),(g=p.nextSibling)!==null)break;p=d,d=p.parentNode}p=g}n=a===-1||o===-1?null:{start:a,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bs={focusedElem:e,selectionRange:n},ql=!1,$=t;$!==null;)if(t=$,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$=e;else for(;$!==null;){t=$;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,k=x.memoizedState,h=t.stateNode,m=h.getSnapshotBeforeUpdate(t.elementType===t.type?y:it(t.type,y),k);h.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(S){oe(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,$=e;break}$=t.return}return x=mu,mu=!1,x}function Fr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var i=l.destroy;l.destroy=void 0,i!==void 0&&ra(t,n,i)}l=l.next}while(l!==r)}}function bi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function la(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Pd(e){var t=e.alternate;t!==null&&(e.alternate=null,Pd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[yt],delete t[Gr],delete t[Hs],delete t[am],delete t[om])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $d(e){return e.tag===5||e.tag===3||e.tag===4}function hu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$d(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ia(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Kl));else if(r!==4&&(e=e.child,e!==null))for(ia(e,t,n),e=e.sibling;e!==null;)ia(e,t,n),e=e.sibling}function sa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(sa(e,t,n),e=e.sibling;e!==null;)sa(e,t,n),e=e.sibling}var xe=null,st=!1;function It(e,t,n){for(n=n.child;n!==null;)Dd(e,t,n),n=n.sibling}function Dd(e,t,n){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(Si,n)}catch{}switch(n.tag){case 5:Ce||Bn(n,t);case 6:var r=xe,l=st;xe=null,It(e,t,n),xe=r,st=l,xe!==null&&(st?(e=xe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):xe.removeChild(n.stateNode));break;case 18:xe!==null&&(st?(e=xe,n=n.stateNode,e.nodeType===8?ns(e.parentNode,n):e.nodeType===1&&ns(e,n),zr(e)):ns(xe,n.stateNode));break;case 4:r=xe,l=st,xe=n.stateNode.containerInfo,st=!0,It(e,t,n),xe=r,st=l;break;case 0:case 11:case 14:case 15:if(!Ce&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var i=l,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&ra(n,t,s),l=l.next}while(l!==r)}It(e,t,n);break;case 1:if(!Ce&&(Bn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){oe(n,t,a)}It(e,t,n);break;case 21:It(e,t,n);break;case 22:n.mode&1?(Ce=(r=Ce)||n.memoizedState!==null,It(e,t,n),Ce=r):It(e,t,n);break;default:It(e,t,n)}}function gu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Mm),t.forEach(function(r){var l=$m.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function rt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var i=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:xe=a.stateNode,st=!1;break e;case 3:xe=a.stateNode.containerInfo,st=!0;break e;case 4:xe=a.stateNode.containerInfo,st=!0;break e}a=a.return}if(xe===null)throw Error(E(160));Dd(i,s,l),xe=null,st=!1;var o=l.alternate;o!==null&&(o.return=null),l.return=null}catch(c){oe(l,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Id(t,e),t=t.sibling}function Id(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(rt(t,e),pt(e),r&4){try{Fr(3,e,e.return),bi(3,e)}catch(y){oe(e,e.return,y)}try{Fr(5,e,e.return)}catch(y){oe(e,e.return,y)}}break;case 1:rt(t,e),pt(e),r&512&&n!==null&&Bn(n,n.return);break;case 5:if(rt(t,e),pt(e),r&512&&n!==null&&Bn(n,n.return),e.flags&32){var l=e.stateNode;try{Ir(l,"")}catch(y){oe(e,e.return,y)}}if(r&4&&(l=e.stateNode,l!=null)){var i=e.memoizedProps,s=n!==null?n.memoizedProps:i,a=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&lc(l,i),Ts(a,s);var c=Ts(a,i);for(s=0;s<o.length;s+=2){var f=o[s],p=o[s+1];f==="style"?uc(l,p):f==="dangerouslySetInnerHTML"?ac(l,p):f==="children"?Ir(l,p):ka(l,f,p,c)}switch(a){case"input":Cs(l,i);break;case"textarea":ic(l,i);break;case"select":var d=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Gn(l,!!i.multiple,g,!1):d!==!!i.multiple&&(i.defaultValue!=null?Gn(l,!!i.multiple,i.defaultValue,!0):Gn(l,!!i.multiple,i.multiple?[]:"",!1))}l[Gr]=i}catch(y){oe(e,e.return,y)}}break;case 6:if(rt(t,e),pt(e),r&4){if(e.stateNode===null)throw Error(E(162));l=e.stateNode,i=e.memoizedProps;try{l.nodeValue=i}catch(y){oe(e,e.return,y)}}break;case 3:if(rt(t,e),pt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zr(t.containerInfo)}catch(y){oe(e,e.return,y)}break;case 4:rt(t,e),pt(e);break;case 13:rt(t,e),pt(e),l=e.child,l.flags&8192&&(i=l.memoizedState!==null,l.stateNode.isHidden=i,!i||l.alternate!==null&&l.alternate.memoizedState!==null||(to=ue())),r&4&&gu(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Ce=(c=Ce)||f,rt(t,e),Ce=c):rt(t,e),pt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for($=e,f=e.child;f!==null;){for(p=$=f;$!==null;){switch(d=$,g=d.child,d.tag){case 0:case 11:case 14:case 15:Fr(4,d,d.return);break;case 1:Bn(d,d.return);var x=d.stateNode;if(typeof x.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(y){oe(r,n,y)}}break;case 5:Bn(d,d.return);break;case 22:if(d.memoizedState!==null){yu(p);continue}}g!==null?(g.return=d,$=g):yu(p)}f=f.sibling}e:for(f=null,p=e;;){if(p.tag===5){if(f===null){f=p;try{l=p.stateNode,c?(i=l.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=p.stateNode,o=p.memoizedProps.style,s=o!=null&&o.hasOwnProperty("display")?o.display:null,a.style.display=oc("display",s))}catch(y){oe(e,e.return,y)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(y){oe(e,e.return,y)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:rt(t,e),pt(e),r&4&&gu(e);break;case 21:break;default:rt(t,e),pt(e)}}function pt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if($d(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(Ir(l,""),r.flags&=-33);var i=hu(e);sa(e,i,l);break;case 3:case 4:var s=r.stateNode.containerInfo,a=hu(e);ia(e,a,s);break;default:throw Error(E(161))}}catch(o){oe(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Nm(e,t,n){$=e,_d(e)}function _d(e,t,n){for(var r=(e.mode&1)!==0;$!==null;){var l=$,i=l.child;if(l.tag===22&&r){var s=l.memoizedState!==null||xl;if(!s){var a=l.alternate,o=a!==null&&a.memoizedState!==null||Ce;a=xl;var c=Ce;if(xl=s,(Ce=o)&&!c)for($=l;$!==null;)s=$,o=s.child,s.tag===22&&s.memoizedState!==null?xu(l):o!==null?(o.return=s,$=o):xu(l);for(;i!==null;)$=i,_d(i),i=i.sibling;$=l,xl=a,Ce=c}vu(e)}else l.subtreeFlags&8772&&i!==null?(i.return=l,$=i):vu(e)}}function vu(e){for(;$!==null;){var t=$;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ce||bi(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ce)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:it(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&tu(t,i,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}tu(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&n.focus();break;case"img":o.src&&(n.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&zr(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Ce||t.flags&512&&la(t)}catch(d){oe(t,t.return,d)}}if(t===e){$=null;break}if(n=t.sibling,n!==null){n.return=t.return,$=n;break}$=t.return}}function yu(e){for(;$!==null;){var t=$;if(t===e){$=null;break}var n=t.sibling;if(n!==null){n.return=t.return,$=n;break}$=t.return}}function xu(e){for(;$!==null;){var t=$;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{bi(4,t)}catch(o){oe(t,n,o)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(o){oe(t,l,o)}}var i=t.return;try{la(t)}catch(o){oe(t,i,o)}break;case 5:var s=t.return;try{la(t)}catch(o){oe(t,s,o)}}}catch(o){oe(t,t.return,o)}if(t===e){$=null;break}var a=t.sibling;if(a!==null){a.return=t.return,$=a;break}$=t.return}}var jm=Math.ceil,ai=$t.ReactCurrentDispatcher,Ja=$t.ReactCurrentOwner,et=$t.ReactCurrentBatchConfig,W=0,ve=null,de=null,we=0,Ue=0,Wn=sn(0),me=0,Xr=null,wn=0,Ti=0,eo=0,Lr=null,Oe=null,to=0,lr=1/0,Rt=null,oi=!1,aa=null,Zt=null,wl=!1,Vt=null,ui=0,Pr=0,oa=null,_l=-1,Ol=0;function Le(){return W&6?ue():_l!==-1?_l:_l=ue()}function Jt(e){return e.mode&1?W&2&&we!==0?we&-we:cm.transition!==null?(Ol===0&&(Ol=Sc()),Ol):(e=U,e!==0||(e=window.event,e=e===void 0?16:Ec(e.type)),e):1}function ut(e,t,n,r){if(50<Pr)throw Pr=0,oa=null,Error(E(185));tl(e,n,r),(!(W&2)||e!==ve)&&(e===ve&&(!(W&2)&&(Ti|=n),me===4&&Ht(e,we)),We(e,r),n===1&&W===0&&!(t.mode&1)&&(lr=ue()+500,Ni&&an()))}function We(e,t){var n=e.callbackNode;cp(e,t);var r=Vl(e,e===ve?we:0);if(r===0)n!==null&&Eo(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Eo(n),t===1)e.tag===0?um(wu.bind(null,e)):qc(wu.bind(null,e)),im(function(){!(W&6)&&an()}),n=null;else{switch(kc(r)){case 1:n=ja;break;case 4:n=xc;break;case 16:n=Gl;break;case 536870912:n=wc;break;default:n=Gl}n=Gd(n,Od.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Od(e,t){if(_l=-1,Ol=0,W&6)throw Error(E(327));var n=e.callbackNode;if(Kn()&&e.callbackNode!==n)return null;var r=Vl(e,e===ve?we:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ci(e,r);else{t=r;var l=W;W|=2;var i=zd();(ve!==e||we!==t)&&(Rt=null,lr=ue()+500,mn(e,t));do try{Tm();break}catch(a){Ad(e,a)}while(!0);za(),ai.current=i,W=l,de!==null?t=0:(ve=null,we=0,t=me)}if(t!==0){if(t===2&&(l=Ds(e),l!==0&&(r=l,t=ua(e,l))),t===1)throw n=Xr,mn(e,0),Ht(e,r),We(e,ue()),n;if(t===6)Ht(e,r);else{if(l=e.current.alternate,!(r&30)&&!Em(l)&&(t=ci(e,r),t===2&&(i=Ds(e),i!==0&&(r=i,t=ua(e,i))),t===1))throw n=Xr,mn(e,0),Ht(e,r),We(e,ue()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(E(345));case 2:cn(e,Oe,Rt);break;case 3:if(Ht(e,r),(r&130023424)===r&&(t=to+500-ue(),10<t)){if(Vl(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){Le(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Us(cn.bind(null,e,Oe,Rt),t);break}cn(e,Oe,Rt);break;case 4:if(Ht(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var s=31-ot(r);i=1<<s,s=t[s],s>l&&(l=s),r&=~i}if(r=l,r=ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jm(r/1960))-r,10<r){e.timeoutHandle=Us(cn.bind(null,e,Oe,Rt),r);break}cn(e,Oe,Rt);break;case 5:cn(e,Oe,Rt);break;default:throw Error(E(329))}}}return We(e,ue()),e.callbackNode===n?Od.bind(null,e):null}function ua(e,t){var n=Lr;return e.current.memoizedState.isDehydrated&&(mn(e,t).flags|=256),e=ci(e,t),e!==2&&(t=Oe,Oe=n,t!==null&&ca(t)),e}function ca(e){Oe===null?Oe=e:Oe.push.apply(Oe,e)}function Em(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],i=l.getSnapshot;l=l.value;try{if(!ct(i(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ht(e,t){for(t&=~eo,t&=~Ti,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function wu(e){if(W&6)throw Error(E(327));Kn();var t=Vl(e,0);if(!(t&1))return We(e,ue()),null;var n=ci(e,t);if(e.tag!==0&&n===2){var r=Ds(e);r!==0&&(t=r,n=ua(e,r))}if(n===1)throw n=Xr,mn(e,0),Ht(e,t),We(e,ue()),n;if(n===6)throw Error(E(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,cn(e,Oe,Rt),We(e,ue()),null}function no(e,t){var n=W;W|=1;try{return e(t)}finally{W=n,W===0&&(lr=ue()+500,Ni&&an())}}function Sn(e){Vt!==null&&Vt.tag===0&&!(W&6)&&Kn();var t=W;W|=1;var n=et.transition,r=U;try{if(et.transition=null,U=1,e)return e()}finally{U=r,et.transition=n,W=t,!(W&6)&&an()}}function ro(){Ue=Wn.current,ee(Wn)}function mn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,lm(n)),de!==null)for(n=de.return;n!==null;){var r=n;switch(_a(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xl();break;case 3:nr(),ee(ze),ee(Ne),Va();break;case 5:Ga(r);break;case 4:nr();break;case 13:ee(ie);break;case 19:ee(ie);break;case 10:Ba(r.type._context);break;case 22:case 23:ro()}n=n.return}if(ve=e,de=e=en(e.current,null),we=Ue=t,me=0,Xr=null,eo=Ti=wn=0,Oe=Lr=null,fn!==null){for(t=0;t<fn.length;t++)if(n=fn[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=l,r.next=s}n.pending=r}fn=null}return e}function Ad(e,t){do{var n=de;try{if(za(),$l.current=si,ii){for(var r=se.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}ii=!1}if(xn=0,ge=pe=se=null,Tr=!1,Qr=0,Ja.current=null,n===null||n.return===null){me=1,Xr=t,de=null;break}e:{var i=e,s=n.return,a=n,o=t;if(t=we,a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var c=o,f=a,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=au(s);if(g!==null){g.flags&=-257,ou(g,s,a,i,t),g.mode&1&&su(i,c,t),t=g,o=c;var x=t.updateQueue;if(x===null){var y=new Set;y.add(o),t.updateQueue=y}else x.add(o);break e}else{if(!(t&1)){su(i,c,t),lo();break e}o=Error(E(426))}}else if(le&&a.mode&1){var k=au(s);if(k!==null){!(k.flags&65536)&&(k.flags|=256),ou(k,s,a,i,t),Oa(rr(o,a));break e}}i=o=rr(o,a),me!==4&&(me=2),Lr===null?Lr=[i]:Lr.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var h=kd(i,o,t);eu(i,h);break e;case 1:a=o;var m=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Zt===null||!Zt.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=Rd(i,a,t);eu(i,S);break e}}i=i.return}while(i!==null)}Wd(n)}catch(N){t=N,de===n&&n!==null&&(de=n=n.return);continue}break}while(!0)}function zd(){var e=ai.current;return ai.current=si,e===null?si:e}function lo(){(me===0||me===3||me===2)&&(me=4),ve===null||!(wn&268435455)&&!(Ti&268435455)||Ht(ve,we)}function ci(e,t){var n=W;W|=2;var r=zd();(ve!==e||we!==t)&&(Rt=null,mn(e,t));do try{bm();break}catch(l){Ad(e,l)}while(!0);if(za(),W=n,ai.current=r,de!==null)throw Error(E(261));return ve=null,we=0,me}function bm(){for(;de!==null;)Bd(de)}function Tm(){for(;de!==null&&!tp();)Bd(de)}function Bd(e){var t=Hd(e.alternate,e,Ue);e.memoizedProps=e.pendingProps,t===null?Wd(e):de=t,Ja.current=null}function Wd(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Rm(n,t),n!==null){n.flags&=32767,de=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{me=6,de=null;return}}else if(n=km(n,t,Ue),n!==null){de=n;return}if(t=t.sibling,t!==null){de=t;return}de=t=e}while(t!==null);me===0&&(me=5)}function cn(e,t,n){var r=U,l=et.transition;try{et.transition=null,U=1,Fm(e,t,n,r)}finally{et.transition=l,U=r}return null}function Fm(e,t,n,r){do Kn();while(Vt!==null);if(W&6)throw Error(E(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(E(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(dp(e,i),e===ve&&(de=ve=null,we=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wl||(wl=!0,Gd(Gl,function(){return Kn(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=et.transition,et.transition=null;var s=U;U=1;var a=W;W|=4,Ja.current=null,Cm(e,n),Id(n,e),Xp(Bs),ql=!!zs,Bs=zs=null,e.current=n,Nm(n),np(),W=a,U=s,et.transition=i}else e.current=n;if(wl&&(wl=!1,Vt=e,ui=l),i=e.pendingLanes,i===0&&(Zt=null),ip(n.stateNode),We(e,ue()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(oi)throw oi=!1,e=aa,aa=null,e;return ui&1&&e.tag!==0&&Kn(),i=e.pendingLanes,i&1?e===oa?Pr++:(Pr=0,oa=e):Pr=0,an(),null}function Kn(){if(Vt!==null){var e=kc(ui),t=et.transition,n=U;try{if(et.transition=null,U=16>e?16:e,Vt===null)var r=!1;else{if(e=Vt,Vt=null,ui=0,W&6)throw Error(E(331));var l=W;for(W|=4,$=e.current;$!==null;){var i=$,s=i.child;if($.flags&16){var a=i.deletions;if(a!==null){for(var o=0;o<a.length;o++){var c=a[o];for($=c;$!==null;){var f=$;switch(f.tag){case 0:case 11:case 15:Fr(8,f,i)}var p=f.child;if(p!==null)p.return=f,$=p;else for(;$!==null;){f=$;var d=f.sibling,g=f.return;if(Pd(f),f===c){$=null;break}if(d!==null){d.return=g,$=d;break}$=g}}}var x=i.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var k=y.sibling;y.sibling=null,y=k}while(y!==null)}}$=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,$=s;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fr(9,i,i.return)}var h=i.sibling;if(h!==null){h.return=i.return,$=h;break e}$=i.return}}var m=e.current;for($=m;$!==null;){s=$;var v=s.child;if(s.subtreeFlags&2064&&v!==null)v.return=s,$=v;else e:for(s=m;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bi(9,a)}}catch(N){oe(a,a.return,N)}if(a===s){$=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,$=S;break e}$=a.return}}if(W=l,an(),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(Si,e)}catch{}r=!0}return r}finally{U=n,et.transition=t}}return!1}function Su(e,t,n){t=rr(n,t),t=kd(e,t,1),e=Xt(e,t,1),t=Le(),e!==null&&(tl(e,1,t),We(e,t))}function oe(e,t,n){if(e.tag===3)Su(e,e,n);else for(;t!==null;){if(t.tag===3){Su(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zt===null||!Zt.has(r))){e=rr(n,e),e=Rd(t,e,1),t=Xt(t,e,1),e=Le(),t!==null&&(tl(t,1,e),We(t,e));break}}t=t.return}}function Lm(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Le(),e.pingedLanes|=e.suspendedLanes&n,ve===e&&(we&n)===n&&(me===4||me===3&&(we&130023424)===we&&500>ue()-to?mn(e,0):eo|=n),We(e,t)}function Ud(e,t){t===0&&(e.mode&1?(t=cl,cl<<=1,!(cl&130023424)&&(cl=4194304)):t=1);var n=Le();e=Lt(e,t),e!==null&&(tl(e,t,n),We(e,n))}function Pm(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ud(e,n)}function $m(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(t),Ud(e,n)}var Hd;Hd=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ze.current)Ae=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ae=!1,Sm(e,t,n);Ae=!!(e.flags&131072)}else Ae=!1,le&&t.flags&1048576&&Qc(t,ei,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Il(e,t),e=t.pendingProps;var l=Jn(t,Ne.current);Yn(t,n),l=Qa(null,t,r,e,l,n);var i=Ya();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Be(r)?(i=!0,Zl(t)):i=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Ua(t),l.updater=Ei,t.stateNode=l,l._reactInternals=t,Ks(t,r,e,n),t=Js(null,t,r,!0,i,n)):(t.tag=0,le&&i&&Ia(t),Fe(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Il(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=Im(r),e=it(r,e),l){case 0:t=Zs(null,t,r,e,n);break e;case 1:t=du(null,t,r,e,n);break e;case 11:t=uu(null,t,r,e,n);break e;case 14:t=cu(null,t,r,it(r.type,e),n);break e}throw Error(E(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:it(r,l),Zs(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:it(r,l),du(e,t,r,l,n);case 3:e:{if(jd(t),e===null)throw Error(E(387));r=t.pendingProps,i=t.memoizedState,l=i.element,ed(e,t),ri(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){l=rr(Error(E(423)),t),t=fu(e,t,r,n,l);break e}else if(r!==l){l=rr(Error(E(424)),t),t=fu(e,t,r,n,l);break e}else for(He=Kt(t.stateNode.containerInfo.firstChild),Ge=t,le=!0,at=null,n=Zc(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(er(),r===l){t=Pt(e,t,n);break e}Fe(e,t,r,n)}t=t.child}return t;case 5:return td(t),e===null&&qs(t),r=t.type,l=t.pendingProps,i=e!==null?e.memoizedProps:null,s=l.children,Ws(r,l)?s=null:i!==null&&Ws(r,i)&&(t.flags|=32),Nd(e,t),Fe(e,t,s,n),t.child;case 6:return e===null&&qs(t),null;case 13:return Ed(e,t,n);case 4:return Ha(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=tr(t,null,r,n):Fe(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:it(r,l),uu(e,t,r,l,n);case 7:return Fe(e,t,t.pendingProps,n),t.child;case 8:return Fe(e,t,t.pendingProps.children,n),t.child;case 12:return Fe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,i=t.memoizedProps,s=l.value,X(ti,r._currentValue),r._currentValue=s,i!==null)if(ct(i.value,s)){if(i.children===l.children&&!ze.current){t=Pt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){s=i.child;for(var o=a.firstContext;o!==null;){if(o.context===r){if(i.tag===1){o=bt(-1,n&-n),o.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?o.next=o:(o.next=f.next,f.next=o),c.pending=o}}i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Qs(i.return,n,t),a.lanes|=n;break}o=o.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(E(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Qs(s,n,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Fe(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,Yn(t,n),l=tt(l),r=r(l),t.flags|=1,Fe(e,t,r,n),t.child;case 14:return r=t.type,l=it(r,t.pendingProps),l=it(r.type,l),cu(e,t,r,l,n);case 15:return Md(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:it(r,l),Il(e,t),t.tag=1,Be(r)?(e=!0,Zl(t)):e=!1,Yn(t,n),Sd(t,r,l),Ks(t,r,l,n),Js(null,t,r,!0,e,n);case 19:return bd(e,t,n);case 22:return Cd(e,t,n)}throw Error(E(156,t.tag))};function Gd(e,t){return yc(e,t)}function Dm(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Je(e,t,n,r){return new Dm(e,t,n,r)}function io(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Im(e){if(typeof e=="function")return io(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ma)return 11;if(e===Ca)return 14}return 2}function en(e,t){var n=e.alternate;return n===null?(n=Je(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Al(e,t,n,r,l,i){var s=2;if(r=e,typeof e=="function")io(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Ln:return hn(n.children,l,i,t);case Ra:s=8,l|=8;break;case ws:return e=Je(12,n,t,l|2),e.elementType=ws,e.lanes=i,e;case Ss:return e=Je(13,n,t,l),e.elementType=Ss,e.lanes=i,e;case ks:return e=Je(19,n,t,l),e.elementType=ks,e.lanes=i,e;case tc:return Fi(n,l,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ju:s=10;break e;case ec:s=9;break e;case Ma:s=11;break e;case Ca:s=14;break e;case Bt:s=16,r=null;break e}throw Error(E(130,e==null?e:typeof e,""))}return t=Je(s,n,t,l),t.elementType=e,t.type=r,t.lanes=i,t}function hn(e,t,n,r){return e=Je(7,e,r,t),e.lanes=n,e}function Fi(e,t,n,r){return e=Je(22,e,r,t),e.elementType=tc,e.lanes=n,e.stateNode={isHidden:!1},e}function cs(e,t,n){return e=Je(6,e,null,t),e.lanes=n,e}function ds(e,t,n){return t=Je(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _m(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gi(0),this.expirationTimes=Gi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gi(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function so(e,t,n,r,l,i,s,a,o){return e=new _m(e,t,n,a,o),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Je(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ua(i),e}function Om(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Vd(e){if(!e)return rn;e=e._reactInternals;e:{if(Rn(e)!==e||e.tag!==1)throw Error(E(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Be(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(E(171))}if(e.tag===1){var n=e.type;if(Be(n))return Vc(e,n,t)}return t}function qd(e,t,n,r,l,i,s,a,o){return e=so(n,r,!0,e,l,i,s,a,o),e.context=Vd(null),n=e.current,r=Le(),l=Jt(n),i=bt(r,l),i.callback=t??null,Xt(n,i,l),e.current.lanes=l,tl(e,l,r),We(e,r),e}function Li(e,t,n,r){var l=t.current,i=Le(),s=Jt(l);return n=Vd(n),t.context===null?t.context=n:t.pendingContext=n,t=bt(i,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Xt(l,t,s),e!==null&&(ut(e,l,s,i),Pl(e,l,s)),s}function di(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ku(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ao(e,t){ku(e,t),(e=e.alternate)&&ku(e,t)}function Am(){return null}var Qd=typeof reportError=="function"?reportError:function(e){console.error(e)};function oo(e){this._internalRoot=e}Pi.prototype.render=oo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(E(409));Li(e,t,null,null)};Pi.prototype.unmount=oo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Sn(function(){Li(null,e,null,null)}),t[Ft]=null}};function Pi(e){this._internalRoot=e}Pi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cc();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ut.length&&t!==0&&t<Ut[n].priority;n++);Ut.splice(n,0,e),n===0&&jc(e)}};function uo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $i(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ru(){}function zm(e,t,n,r,l){if(l){if(typeof r=="function"){var i=r;r=function(){var c=di(s);i.call(c)}}var s=qd(t,r,e,0,null,!1,!1,"",Ru);return e._reactRootContainer=s,e[Ft]=s.current,Ur(e.nodeType===8?e.parentNode:e),Sn(),s}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var a=r;r=function(){var c=di(o);a.call(c)}}var o=so(e,0,!1,null,null,!1,!1,"",Ru);return e._reactRootContainer=o,e[Ft]=o.current,Ur(e.nodeType===8?e.parentNode:e),Sn(function(){Li(t,o,n,r)}),o}function Di(e,t,n,r,l){var i=n._reactRootContainer;if(i){var s=i;if(typeof l=="function"){var a=l;l=function(){var o=di(s);a.call(o)}}Li(t,s,e,l)}else s=zm(n,t,e,l,r);return di(s)}Rc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Rr(t.pendingLanes);n!==0&&(Ea(t,n|1),We(t,ue()),!(W&6)&&(lr=ue()+500,an()))}break;case 13:Sn(function(){var r=Lt(e,1);if(r!==null){var l=Le();ut(r,e,1,l)}}),ao(e,1)}};ba=function(e){if(e.tag===13){var t=Lt(e,134217728);if(t!==null){var n=Le();ut(t,e,134217728,n)}ao(e,134217728)}};Mc=function(e){if(e.tag===13){var t=Jt(e),n=Lt(e,t);if(n!==null){var r=Le();ut(n,e,t,r)}ao(e,t)}};Cc=function(){return U};Nc=function(e,t){var n=U;try{return U=e,t()}finally{U=n}};Ls=function(e,t,n){switch(t){case"input":if(Cs(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=Ci(r);if(!l)throw Error(E(90));rc(r),Cs(r,l)}}}break;case"textarea":ic(e,n);break;case"select":t=n.value,t!=null&&Gn(e,!!n.multiple,t,!1)}};fc=no;pc=Sn;var Bm={usingClientEntryPoint:!1,Events:[rl,In,Ci,cc,dc,no]},gr={findFiberByHostInstance:dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wm={bundleType:gr.bundleType,version:gr.version,rendererPackageName:gr.rendererPackageName,rendererConfig:gr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$t.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gc(e),e===null?null:e.stateNode},findFiberByHostInstance:gr.findFiberByHostInstance||Am,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sl.isDisabled&&Sl.supportsFiber)try{Si=Sl.inject(Wm),xt=Sl}catch{}}qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bm;qe.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uo(t))throw Error(E(200));return Om(e,t,null,n)};qe.createRoot=function(e,t){if(!uo(e))throw Error(E(299));var n=!1,r="",l=Qd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=so(e,1,!1,null,null,n,!1,r,l),e[Ft]=t.current,Ur(e.nodeType===8?e.parentNode:e),new oo(t)};qe.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(E(188)):(e=Object.keys(e).join(","),Error(E(268,e)));return e=gc(t),e=e===null?null:e.stateNode,e};qe.flushSync=function(e){return Sn(e)};qe.hydrate=function(e,t,n){if(!$i(t))throw Error(E(200));return Di(null,e,t,!0,n)};qe.hydrateRoot=function(e,t,n){if(!uo(e))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,l=!1,i="",s=Qd;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=qd(t,null,e,1,n??null,l,!1,i,s),e[Ft]=t.current,Ur(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new Pi(t)};qe.render=function(e,t,n){if(!$i(t))throw Error(E(200));return Di(null,e,t,!1,n)};qe.unmountComponentAtNode=function(e){if(!$i(e))throw Error(E(40));return e._reactRootContainer?(Sn(function(){Di(null,null,e,!1,function(){e._reactRootContainer=null,e[Ft]=null})}),!0):!1};qe.unstable_batchedUpdates=no;qe.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$i(n))throw Error(E(200));if(e==null||e._reactInternals===void 0)throw Error(E(38));return Di(e,t,n,!1,r)};qe.version="18.3.1-next-f1338f8080-20240426";function Yd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yd)}catch(e){console.error(e)}}Yd(),Yu.exports=qe;var Um=Yu.exports,Mu=Um;ys.createRoot=Mu.createRoot,ys.hydrateRoot=Mu.hydrateRoot;var co=(e=>(e.GBP="GBP",e))(co||{}),A=(e=>(e.Asset="Asset",e.Liability="Liability",e))(A||{}),j=(e=>(e.CashReserves="CashReserves",e.Gilts="Gilts",e.Mortgages="Mortgages",e.CorporateLoans="CorporateLoans",e.ReverseRepo="ReverseRepo",e))(j||{}),b=(e=>(e.RetailDeposits="RetailDeposits",e.CorporateDeposits="CorporateDeposits",e.WholesaleFundingST="WholesaleFundingST",e.WholesaleFundingLT="WholesaleFundingLT",e.RepurchaseAgreements="RepurchaseAgreements",e))(b||{}),Ye=(e=>(e.Overnight="Overnight",e.LessThan1Y="LessThan1Y",e.OneToThreeY="OneToThreeY",e.ThreeToFiveY="ThreeToFiveY",e.GreaterThan5Y="GreaterThan5Y",e.Perpetual="Perpetual",e))(Ye||{}),Te=(e=>(e.Level1="Level1",e.Level2A="Level2A",e.Level2B="Level2B",e.None="None",e))(Te||{});const Hm={[j.CashReserves]:{productType:j.CashReserves,riskWeight:0,baseDefaultRate:0,lossGivenDefault:0,volumeElasticityToRate:0},[j.Gilts]:{productType:j.Gilts,riskWeight:0,baseDefaultRate:5e-4,lossGivenDefault:.1,volumeElasticityToRate:0},[j.Mortgages]:{productType:j.Mortgages,riskWeight:.35,baseDefaultRate:.004,lossGivenDefault:.25,volumeElasticityToRate:-4,loan:{defaultTermMonths:360,maxTermMonths:420,initialSeasoningEnabled:!0,initialCouponDispersionBps:50,initialPdMultiplierRange:{min:.8,max:1.25},initialLgdMultiplierRange:{min:.9,max:1.1},initialMinBucketOutstanding:1e6}},[j.CorporateLoans]:{productType:j.CorporateLoans,riskWeight:1,baseDefaultRate:.015,lossGivenDefault:.45,volumeElasticityToRate:-3,loan:{defaultTermMonths:60,maxTermMonths:420,initialSeasoningEnabled:!0,initialCouponDispersionBps:75,initialPdMultiplierRange:{min:.85,max:1.4},initialLgdMultiplierRange:{min:.9,max:1.15},initialMinBucketOutstanding:1e6}},[j.ReverseRepo]:{productType:j.ReverseRepo,riskWeight:0,baseDefaultRate:0,lossGivenDefault:0,volumeElasticityToRate:0},[b.RetailDeposits]:{productType:b.RetailDeposits,riskWeight:0,baseDefaultRate:0,lossGivenDefault:0,volumeElasticityToRate:5},[b.CorporateDeposits]:{productType:b.CorporateDeposits,riskWeight:0,baseDefaultRate:0,lossGivenDefault:0,volumeElasticityToRate:8},[b.WholesaleFundingST]:{productType:b.WholesaleFundingST,riskWeight:0,baseDefaultRate:0,lossGivenDefault:0,volumeElasticityToRate:0},[b.WholesaleFundingLT]:{productType:b.WholesaleFundingLT,riskWeight:0,baseDefaultRate:0,lossGivenDefault:0,volumeElasticityToRate:0},[b.RepurchaseAgreements]:{productType:b.RepurchaseAgreements,riskWeight:0,baseDefaultRate:0,lossGivenDefault:0,volumeElasticityToRate:0}},Gm={[j.CashReserves]:{productType:j.CashReserves,hqlaLevel:Te.Level1,lcrInflowRate:0,nsfrRsfFactor:0},[j.Gilts]:{productType:j.Gilts,hqlaLevel:Te.Level1,lcrInflowRate:0,nsfrRsfFactor:.05},[j.Mortgages]:{productType:j.Mortgages,hqlaLevel:Te.None,lcrInflowRate:.05,nsfrRsfFactor:.85},[j.CorporateLoans]:{productType:j.CorporateLoans,hqlaLevel:Te.None,lcrInflowRate:.05,nsfrRsfFactor:1},[j.ReverseRepo]:{productType:j.ReverseRepo,hqlaLevel:Te.None,lcrInflowRate:1,nsfrRsfFactor:.1},[b.RetailDeposits]:{productType:b.RetailDeposits,hqlaLevel:Te.None,lcrOutflowRate:.05,nsfrAsfFactor:.95},[b.CorporateDeposits]:{productType:b.CorporateDeposits,hqlaLevel:Te.None,lcrOutflowRate:.4,nsfrAsfFactor:.5},[b.WholesaleFundingST]:{productType:b.WholesaleFundingST,hqlaLevel:Te.None,lcrOutflowRate:1,nsfrAsfFactor:0},[b.WholesaleFundingLT]:{productType:b.WholesaleFundingLT,hqlaLevel:Te.None,lcrOutflowRate:0,nsfrAsfFactor:1},[b.RepurchaseAgreements]:{productType:b.RepurchaseAgreements,hqlaLevel:Te.None,lcrOutflowRate:1,nsfrAsfFactor:0}},Vm={taxRate:.25,operatingCostRatio:.02,maxDepositGrowthPerStep:.08,maxLoanGrowthPerStep:.05,fixedOperatingCostPerMonth:5e7,initialPortfolioSeed:123456789},qm={minCet1Ratio:.105,minLeverageRatio:.035,minLcr:1,minNsfr:1},dt={version:"v1",productParameters:Hm,liquidityTags:Gm,global:Vm,riskLimits:qm},Qm={[Te.Level1]:1,[Te.Level2A]:.85,[Te.Level2B]:.5,[Te.None]:0},Ym=e=>e.reduce((t,n)=>{var s;if(!n.liquidityTag)return t;const r=Qm[n.liquidityTag.hqlaLevel]??0,l=((s=n.encumbrance)==null?void 0:s.encumberedAmount)??0,i=Math.max(0,n.balance-l);return t+i*r},0),Km=(e,t,n)=>{let r=0,l=0;e.forEach(o=>{const c=o.liquidityTag;if(c){if(c.lcrOutflowRate!==void 0){const f=o.productType===b.RetailDeposits||o.productType===b.CorporateDeposits?n:1;r+=o.balance*c.lcrOutflowRate*f}c.lcrInflowRate!==void 0&&(l+=o.balance*c.lcrInflowRate)}});const i=Math.min(l,.75*r),s=Math.max(0,r-i);return{lcr:s>0?t/s:1/0,netOutflows:s}},Xm=(e,t,n)=>{let r=t+n,l=0;e.forEach(s=>{const a=s.liquidityTag;a&&(a.nsfrAsfFactor!==void 0&&(r+=s.balance*a.nsfrAsfFactor),a.nsfrRsfFactor!==void 0&&(l+=s.balance*a.nsfrRsfFactor))});const i=l>0?r/l:1/0;return{asf:r,rsf:l,nsfr:i}},Ii=({state:e,config:t,lcrOutflowMultiplier:n=1})=>{const r=e.balanceSheet.items.filter(x=>x.side===A.Asset),l=r.reduce((x,y)=>x+y.balance,0),i=r.reduce((x,y)=>{const k=t.productParameters[y.productType];return x+y.balance*((k==null?void 0:k.riskWeight)??0)},0),s=l,a=i>0?e.capital.cet1/i:1/0,o=s>0?(e.capital.cet1+e.capital.at1)/s:1/0,c=Ym(r),{lcr:f}=Km(e.balanceSheet.items,c,n),{asf:p,rsf:d,nsfr:g}=Xm(e.balanceSheet.items,e.capital.cet1,e.capital.at1);return{rwa:i,leverageExposure:s,cet1Ratio:a,leverageRatio:o,hqla:c,lcr:f,lcrOutflowMultiplier:n,asf:p,rsf:d,nsfr:g}},_i=(e,t)=>({cet1Breached:e.cet1Ratio<t.minCet1Ratio,leverageBreached:e.leverageRatio<t.minLeverageRatio,lcrBreached:e.lcr<t.minLcr,nsfrBreached:e.nsfr<t.minNsfr}),De=(e,t,n)=>Math.max(t,Math.min(n,e)),Zm=e=>{if(e>=0)return 1/(1+Math.exp(-e));const t=Math.exp(e);return t/(1+t)},Jm=e=>Math.log(e/(1-e)),$r=(e,t)=>(1-Math.exp(-e*t))/(e*t),zl=(e,t)=>$r(e,t)-Math.exp(-e*t),eh=(e,t,n=1e-12)=>{const r=[[e[0][0],e[0][1],e[0][2],t[0]],[e[1][0],e[1][1],e[1][2],t[1]],[e[2][0],e[2][1],e[2][2],t[2]]];for(let a=0;a<3;a++){let o=a,c=Math.abs(r[a][a]);for(let p=a+1;p<3;p++){const d=Math.abs(r[p][a]);d>c&&(c=d,o=p)}if(!Number.isFinite(c)||c<n)return null;if(o!==a){const p=r[a];r[a]=r[o],r[o]=p}const f=r[a][a];if(!Number.isFinite(f)||Math.abs(f)<n)return null;for(let p=a+1;p<3;p++){const d=r[p][a]/f;if(!Number.isFinite(d))return null;for(let g=a;g<4;g++)r[p][g]-=d*r[a][g]}}if(Math.abs(r[2][2])<n||Math.abs(r[1][1])<n||Math.abs(r[0][0])<n)return null;const l=r[2][3]/r[2][2],i=(r[1][3]-r[1][2]*l)/r[1][1],s=(r[0][3]-r[0][2]*l-r[0][1]*i)/r[0][0];return!Number.isFinite(s)||!Number.isFinite(i)||!Number.isFinite(l)?null:[s,i,l]},Kd=(e,t,n)=>{if(t.length!==3)throw new Error("fitNelsonSiegelFrom3Points requires exactly 3 points");const r=n&&Number.isFinite(n.level)&&Number.isFinite(n.slope)&&Number.isFinite(n.curvature)?n:void 0,l=()=>{const v=t.map(N=>N.y).filter(N=>Number.isFinite(N));return{level:v.length===0?0:v.reduce((N,R)=>N+R,0)/v.length,slope:0,curvature:0}};if(!Number.isFinite(e)||e<=0||!t.every(({mYears:v,y:S})=>Number.isFinite(v)&&Number.isFinite(S)))return r??l();const i=t.map(({mYears:v})=>[1,$r(e,v),zl(e,v)]),s=t.map(({y:v})=>v),a=eh(i,s);if(a){const[v,S,N]=a;if(Number.isFinite(v)&&Number.isFinite(S)&&Number.isFinite(N))return{level:v,slope:S,curvature:N}}if(r)return r;const o=t[0].mYears>=t[1].mYears?t[0].mYears>=t[2].mYears?0:2:t[1].mYears>=t[2].mYears?1:2,c=t[o],f=t.filter((v,S)=>S!==o),[p,d]=f,g=c.y,x=$r(e,p.mYears),y=zl(e,p.mYears),k=$r(e,d.mYears),h=zl(e,d.mYears),m=x*h-y*k;if(Number.isFinite(m)&&Math.abs(m)>1e-12){const v=p.y-g,S=d.y-g,N=(v*h-y*S)/m,R=(x*S-v*k)/m;if(Number.isFinite(g)&&Number.isFinite(N)&&Number.isFinite(R))return{level:g,slope:N,curvature:R}}return l()},on=(e,t)=>e.level+e.slope*$r(e.lambda,t)+e.curvature*zl(e.lambda,t),th=e=>{let t=e|0;t===0&&(t=1831565813);const n=()=>(t^=t<<13,t^=t>>>17,t^=t<<5,t>>>0),r=()=>n()/4294967296;return{get seed(){return t>>>0},set seed(i){t=i|0,t===0&&(t=1831565813)},uniform:r,normal:()=>{let i=0;for(;i<=0;)i=r();const s=r();return Math.sqrt(-2*Math.log(i))*Math.cos(2*Math.PI*s)}}},nh=(e,t)=>{var l;const n=e.length;for(let i=0;i<n;i++)if(((l=e[i])==null?void 0:l.length)!==n)throw new Error("Cholesky decomposition requires a square matrix");const r=Array.from({length:n},()=>Array(n).fill(0));for(let i=0;i<n;i++)for(let s=0;s<=i;s++){let a=e[i][s];for(let o=0;o<s;o++)a-=r[i][o]*r[s][o];if(!Number.isFinite(a))throw new Error("Cholesky decomposition failed: non-finite intermediate value");if(i===s){if(a<=t)throw new Error(`Cholesky decomposition failed: matrix not SPD (diag ${i} = ${a})`);r[i][s]=Math.sqrt(a)}else{const o=r[s][s];if(o<=t)throw new Error(`Cholesky decomposition failed: near-zero diagonal at ${s} (${o})`);r[i][s]=a/o}}return r},rh=e=>{let r;for(let l=0;l<8;l++){const i=l===0?0:1e-12*10**(l-1),s=i===0?e:e.map((a,o)=>a.map((c,f)=>o===f?c+i:c));try{return nh(s,1e-12)}catch(a){r=a}}throw r instanceof Error?r:new Error("Cholesky decomposition failed")},lh=(e,t)=>{const n=e.length,r=Array(n).fill(0);for(let l=0;l<n;l++){let i=0;for(let s=0;s<=l;s++)i+=e[l][s]*t[s];r[l]=i}return r},ih=(e,t)=>{const n=e.length,r=Array.from({length:n},()=>Array(n).fill(0));for(let l=0;l<n;l++)for(let i=0;i<n;i++)r[l][i]=t[l][i]*e[l]*e[i];return r},L={factors:{A:[.85,.7,.8,.97],sds:[.25,.22,.28,.08],corr:[[1,-.2,-.4,.1],[-.2,1,.2,.1],[-.4,.2,1,-.1],[.1,.1,-.1,1]]},gdp:{trendMoM:.001,alphaD:.0018,alphaS:.0012,alphaF:.002,regime:{normal:{mean:0,sd:.0035},recession:{mean:-.0035,sd:.0075},enterProb:.03,stayProb:.9}},unemployment:{uMin:.02,uMax:.12,uBar:.046,meanReversion:.08,okun:2.5,stress:.08,latentNoiseSd:.02},inflation:{piStar:.02,kappa:.85,bS:.004,bD:.0015,noiseSd:.0012,min:-.02,max:.15},policy:{rho:.9,rNeutralRealMean:.0125,rNeutralRealStd:.0045,phiPi:1.5,phiD:.003,noiseSd:7e-4,min:0,max:.12},termPremium:{mean:.0185,rho:.97,fLoading:.0025,piLoading:.08,noiseSd:.0012,min:0,max:.06,scale5y:.27},curve:{lambda:.7,y1Reversion:.3,y1InflationLoading:.15,y5PolicyWeight:.35,y1NoiseSd:6e-4,y5NoiseSd:8e-4,y20NoiseSd:.001},credit:{mean:.011,rho:.88,fLoading:.004,uLoading:.15,gLoading:.25,noiseSd:.0015,min:0,max:.05},marketPassThrough:{speed:.7,noiseSd:3e-4}},sh=rh(ih(L.factors.sds,L.factors.corr)),ah=(e,t)=>{const n=[t.normal(),t.normal(),t.normal(),t.normal()],r=lh(sh,n),[l,i,s,a]=L.factors.A;return{D:l*e.D+r[0],S:i*e.S+r[1],F:s*e.F+r[2],R:a*e.R+r[3]}},oh=(e,t)=>{const{enterProb:n,stayProb:r}=L.gdp.regime;return e==="recession"?t.uniform()<r?"recession":"normal":t.uniform()<n?"recession":"normal"},kt=(e,t,n)=>e+n*(t-e),uh=()=>{const{uMin:e,uMax:t,uBar:n}=L.unemployment,r=De((n-e)/(t-e),1e-9,1-1e-9);return Jm(r)},ch=(e,t)=>{var i;const n=Math.max(1,Math.round(t)),r=th(e.macroModel.rngSeed),l=uh();for(let s=0;s<n;s++){const a=ah(e.macroModel.factors,r),o=oh(e.macroModel.gdpRegime,r),c=L.gdp.regime[o],f=L.gdp.trendMoM+c.mean+L.gdp.alphaD*a.D-L.gdp.alphaS*a.S-L.gdp.alphaF*a.F+r.normal()*c.sd,p=f-L.gdp.trendMoM,d=e.inflationRate,g=(1-L.inflation.kappa)*L.inflation.piStar+L.inflation.kappa*d+L.inflation.bS*a.S+L.inflation.bD*a.D+r.normal()*L.inflation.noiseSd,x=De(g,L.inflation.min,L.inflation.max),y=e.macroModel.unemploymentLatent,k=y+L.unemployment.meanReversion*(l-y)-L.unemployment.okun*12*p+L.unemployment.stress*a.F+r.normal()*L.unemployment.latentNoiseSd,h=L.unemployment.uMin+(L.unemployment.uMax-L.unemployment.uMin)*Zm(k),m=L.policy.rNeutralRealMean+L.policy.rNeutralRealStd*a.R,v=m+x+L.policy.phiPi*(x-L.inflation.piStar)+L.policy.phiD*a.D,S=e.baseRate,N=L.policy.rho*S+(1-L.policy.rho)*v+r.normal()*L.policy.noiseSd,R=De(N,L.policy.min,L.policy.max),C=e.macroModel.termPremium,w=L.termPremium.mean+L.termPremium.rho*(C-L.termPremium.mean)+L.termPremium.fLoading*a.F+L.termPremium.piLoading*(x-L.inflation.piStar)+r.normal()*L.termPremium.noiseSd,F=De(w,L.termPremium.min,L.termPremium.max),T=m+L.inflation.piStar,I=R+L.curve.y1Reversion*(T-R)+L.curve.y1InflationLoading*(x-L.inflation.piStar)+r.normal()*L.curve.y1NoiseSd,V=T+L.curve.y5PolicyWeight*(R-T)+L.termPremium.scale5y*F+r.normal()*L.curve.y5NoiseSd,H=T+F+r.normal()*L.curve.y20NoiseSd,ce=(i=e.giltCurve)==null?void 0:i.nelsonSiegel,je=(ce==null?void 0:ce.lambda)??L.curve.lambda,ft=Number.isFinite(je)&&je>1e-6?je:L.curve.lambda,M=ce&&Number.isFinite(ce.level)&&Number.isFinite(ce.slope)&&Number.isFinite(ce.curvature)?{level:ce.level,slope:ce.slope,curvature:ce.curvature}:void 0,_={...Kd(ft,[{mYears:1,y:I},{mYears:5,y:V},{mYears:20,y:H}],M),lambda:ft},z={y1:on(_,1),y2:on(_,2),y3:on(_,3),y5:on(_,5),y10:on(_,10),y20:on(_,20),y30:on(_,30)},G=e.creditSpread,he=L.credit.mean+L.credit.rho*(G-L.credit.mean)+L.credit.fLoading*a.F+L.credit.uLoading*(h-L.unemployment.uBar)-L.credit.gLoading*p+r.normal()*L.credit.noiseSd,K=De(he,L.credit.min,L.credit.max);e.gdpGrowthMoM=f,e.inflationRate=x,e.unemploymentRate=h,e.baseRate=R,e.giltCurve={nelsonSiegel:_,yields:z},e.riskFreeShort=z.y1,e.riskFreeLong=z.y30,e.creditSpread=K;const te=L.marketPassThrough.speed,ne=L.marketPassThrough.noiseSd,St=.003+.7*K,Ai=.004+.8*K,Dt=.017+1*K,ff=.012+.4*K;e.wholesaleFundingSpread=De(kt(e.wholesaleFundingSpread,St,te)+r.normal()*ne,0,.08),e.seniorDebtSpread=De(kt(e.seniorDebtSpread,Ai,te)+r.normal()*ne,0,.1),e.corporateLoanSpread=De(kt(e.corporateLoanSpread,Dt,te)+r.normal()*ne,0,.12),e.mortgageSpread=De(kt(e.mortgageSpread,ff,te)+r.normal()*ne,0,.12);const pf=.02+.015*Math.max(0,a.F)+.2*K,mf=.05+.05*Math.max(0,a.F)+.5*K;e.giltRepoHaircut=De(kt(e.giltRepoHaircut,pf,.25),.005,.2),e.corpBondRepoHaircut=De(kt(e.corpBondRepoHaircut,mf,.25),.02,.4);const ho=Math.max(0,R-.025);e.competitorRetailDepositRate=De(kt(e.competitorRetailDepositRate,ho,.25)+r.normal()*ne,0,R),e.competitorCorporateDepositRate!==void 0&&(e.competitorCorporateDepositRate=De(kt(e.competitorCorporateDepositRate,ho+.005,.5)+r.normal()*ne,0,R));const hf=z.y5+e.mortgageSpread-.005;e.competitorMortgageRate=De(kt(e.competitorMortgageRate,hf,.2)+r.normal()*ne,0,.2),e.macroModel={...e.macroModel,factors:a,gdpRegime:o,unemploymentLatent:k,termPremium:F}}e.macroModel.rngSeed=r.seed},Ze={[j.CashReserves]:{productType:j.CashReserves,label:"Cash & Reserves",side:A.Asset,behaviour:{}},[j.Gilts]:{productType:j.Gilts,label:"Gilts",side:A.Asset,behaviour:{}},[j.Mortgages]:{productType:j.Mortgages,label:"Retail mortgages",side:A.Asset,behaviour:{isLoan:!0,affectsBehaviouralLoanFlow:!0,loanBenchmark:"mortgage"}},[j.CorporateLoans]:{productType:j.CorporateLoans,label:"Corporate loans",side:A.Asset,behaviour:{isLoan:!0,affectsBehaviouralLoanFlow:!0,loanBenchmark:"corporate"}},[j.ReverseRepo]:{productType:j.ReverseRepo,label:"Reverse repo",side:A.Asset,behaviour:{}},[b.RetailDeposits]:{productType:b.RetailDeposits,label:"Retail deposits",side:A.Liability,behaviour:{isCustomerDeposit:!0,depositSegment:"retail",affectsBehaviouralDepositFlow:!0}},[b.CorporateDeposits]:{productType:b.CorporateDeposits,label:"Corporate deposits",side:A.Liability,behaviour:{isCustomerDeposit:!0,depositSegment:"corporate",affectsBehaviouralDepositFlow:!0}},[b.WholesaleFundingST]:{productType:b.WholesaleFundingST,label:"Wholesale funding ST",side:A.Liability,behaviour:{}},[b.WholesaleFundingLT]:{productType:b.WholesaleFundingLT,label:"Wholesale funding LT",side:A.Liability,behaviour:{}},[b.RepurchaseAgreements]:{productType:b.RepurchaseAgreements,label:"Repo borrowing",side:A.Liability,behaviour:{}}},fi=12,pi=420,Ie=(e,t,n)=>Math.min(n,Math.max(t,e)),dh=(e,t)=>e.balanceSheet.items.find(n=>n.productType===t),fo=e=>e.balanceSheet.items.find(t=>t.productType===j.CashReserves),ir=e=>{var t,n;return!!((n=(t=Ze[e])==null?void 0:t.behaviour)!=null&&n.isLoan)},fh=e=>{let t=e|0;t===0&&(t=1831565813);const n=()=>(t^=t<<13,t^=t>>>17,t^=t<<5,t>>>0),r=()=>n()/4294967296;return{get seed(){return t>>>0},set seed(i){t=i|0,t===0&&(t=1831565813)},uniform:r,normal:()=>{let i=0;for(;i<=0;)i=r();const s=r();return Math.sqrt(-2*Math.log(i))*Math.cos(2*Math.PI*s)}}},ph=(e,t,n,r)=>{if(e<=0)return 0;if(!Number.isFinite(e))throw new Error("Outstanding principal must be finite");if(!Number.isFinite(t))throw new Error("Interest rate must be finite");if(!Number.isFinite(n)||n<=0)throw new Error("termMonths must be a positive integer");if(!Number.isFinite(r)||r<0)throw new Error("ageMonths must be a non-negative integer");if(r>=n)throw new Error(`Cannot infer original principal when ageMonths (${r}) >= termMonths (${n})`);const l=t/fi,i=n,s=r;if(Math.abs(l)<1e-12){const f=i-s;if(f<=0)throw new Error(`Invalid remaining months (${f})`);return e*i/f}const a=Math.pow(1+l,i),o=Math.pow(1+l,s),c=a-o;if(!Number.isFinite(a)||!Number.isFinite(o)||!Number.isFinite(c)||c<=0)throw new Error("Failed to infer original principal (invalid amortisation factors)");return e*((a-1)/c)},mi=(e,t)=>{e.loanCohorts||(e.loanCohorts={});const n=e.loanCohorts[t];if(n)return n;const r=[];return e.loanCohorts[t]=r,r},tn=e=>(e??[]).reduce((t,n)=>t+(n.outstandingPrincipal??0),0),Oi=e=>{Object.entries(e.loanCohorts??{}).forEach(([n,r])=>{if(!ir(n))return;const l=dh(e,n);l&&(l.balance=tn(r))})},hi=e=>{for(let n=e.length-1;n>=0;n--){const r=e[n];(r.outstandingPrincipal<=.01||r.ageMonths>=r.termMonths)&&e.splice(n,1)}},Xd=(e,t)=>{if(!Number.isFinite(e.outstandingPrincipal)||e.outstandingPrincipal<0)throw new Error(`Invalid outstandingPrincipal for cohort ${e.productType}/${e.cohortId}`);if(!Number.isFinite(e.originalPrincipal)||e.originalPrincipal<0)throw new Error(`Invalid originalPrincipal for cohort ${e.productType}/${e.cohortId}`);if(!Number.isFinite(e.annualInterestRate)||e.annualInterestRate<0)throw new Error(`Invalid annualInterestRate for cohort ${e.productType}/${e.cohortId}`);if(!Number.isFinite(e.termMonths)||!Number.isInteger(e.termMonths)||e.termMonths<=0)throw new Error(`Invalid termMonths for cohort ${e.productType}/${e.cohortId}`);if(e.termMonths>t||e.termMonths>pi)throw new Error(`Cohort termMonths (${e.termMonths}) exceeds max (${Math.min(t,pi)}) for ${e.productType}/${e.cohortId}`);if(!Number.isFinite(e.ageMonths)||!Number.isInteger(e.ageMonths)||e.ageMonths<0)throw new Error(`Invalid ageMonths for cohort ${e.productType}/${e.cohortId}`);if(e.ageMonths>=e.termMonths)throw new Error(`Cohort ageMonths (${e.ageMonths}) >= termMonths (${e.termMonths}) for ${e.productType}/${e.cohortId}`);if(!Number.isFinite(e.annualPd)||e.annualPd<0)throw new Error(`Invalid annualPd for cohort ${e.productType}/${e.cohortId}`);if(!Number.isFinite(e.lgd)||e.lgd<0||e.lgd>1)throw new Error(`Invalid lgd for cohort ${e.productType}/${e.cohortId}`)},po=(e,t)=>{var l;const n=e.productParameters[t],r=((l=n==null?void 0:n.loan)==null?void 0:l.maxTermMonths)??pi;return Math.min(pi,r)},da=(e,t)=>{var l;const n=e.productParameters[t],r=(l=n==null?void 0:n.loan)==null?void 0:l.defaultTermMonths;if(!r)throw new Error(`Missing loan.defaultTermMonths for ${t}`);return r},Zd=e=>{const{state:t,config:n,productType:r,cohortId:l}=e;if(!ir(r))return 0;const i=Math.max(0,e.principal);if(i<=0)return 0;const s=fo(t),a=Math.max(0,(s==null?void 0:s.balance)??0),o=Math.min(i,a);if(o<=0)return 0;const c=po(n,r),f=Math.min(c,e.termMonths??da(n,r));if(f<=0)throw new Error(`Invalid termMonths for origination: ${f}`);const p=mi(t,r),d=p.find(g=>g.cohortId===l);if(!s)throw new Error("Missing cash line item; cannot originate loans");if(s.balance-=o,d){const g=Math.max(0,d.outstandingPrincipal),x=o,y=g+x;d.outstandingPrincipal+=o,d.originalPrincipal+=o,d.annualInterestRate=y>0?(d.annualInterestRate*g+e.annualInterestRate*x)/y:e.annualInterestRate,d.annualPd=y>0?(d.annualPd*g+e.annualPd*x)/y:e.annualPd,d.lgd=y>0?(d.lgd*g+e.lgd*x)/y:e.lgd,d.termMonths=Math.max(d.termMonths,f),d.ageMonths=Math.min(d.ageMonths,0)}else p.push({productType:r,cohortId:l,originalPrincipal:o,outstandingPrincipal:o,annualInterestRate:Math.max(0,e.annualInterestRate),termMonths:f,ageMonths:0,annualPd:Math.max(0,e.annualPd),lgd:Ie(e.lgd,0,1)});return hi(p),Oi(t),o},Jd=e=>{const{state:t,productType:n}=e;if(!ir(n))return 0;const r=mi(t,n),l=tn(r),i=Math.max(0,e.amount),s=Math.min(i,l);if(s<=0)return 0;let a=s;const o=1e-9;for(let f=0;f<r.length;f++){const p=r[f];if(a<=o)break;const d=f===r.length-1?a:s*p.outstandingPrincipal/l,g=Math.min(p.outstandingPrincipal,Math.max(0,d));p.outstandingPrincipal-=g,a-=g}const c=fo(t);if(!c)throw new Error("Missing cash line item; cannot apply prepayment");return c.balance+=s,hi(r),Oi(t),s},mh=(e,t,n)=>{if(n<=0)return e;const r=t/fi;if(Math.abs(r)<1e-12)return e/n;const l=1-Math.pow(1+r,-n);return!Number.isFinite(l)||Math.abs(l)<1e-12?e:e*r/l},hh=e=>{const{state:t,config:n}=e,r=Math.max(0,Math.floor(e.dtMonths));if(r===0)return{loanInterestIncome:0,recognizedLoanLosses:{}};const l=fo(t);if(!l)throw new Error("Missing cash line item; cannot step loan cohorts");const i={};let s=0;const a=Object.keys(t.loanCohorts??{});for(let f=0;f<r;f++)a.forEach(p=>{if(!ir(p))return;const d=mi(t,p),g=po(n,p);d.forEach(x=>{if(x.outstandingPrincipal<=0||x.ageMonths>=x.termMonths)return;Xd(x,g);const y=x.termMonths-x.ageMonths,k=mh(x.outstandingPrincipal,x.annualInterestRate,y),h=x.annualInterestRate/fi,m=x.outstandingPrincipal*h,v=Math.min(x.outstandingPrincipal,Math.max(0,k-m));x.outstandingPrincipal-=v,l.balance+=m+v,s+=m;const S=Ie(x.annualPd*e.pdMultiplier,0,.999999),N=1-Math.pow(1-S,1/fi),R=Math.max(0,x.outstandingPrincipal*N);if(R>0){const C=Ie(x.lgd*e.lgdMultiplier,0,1),w=R*C,F=R-w;x.outstandingPrincipal-=R,l.balance+=F,i[p]=(i[p]??0)+w}x.ageMonths+=1}),hi(d)});const o=e.extraLossesByProduct??{};return Object.entries(o).forEach(([f,p])=>{if(!ir(f)||p<=0)return;const d=mi(t,f),g=tn(d);if(g<=0)return;const x=Math.min(p,g);let y=x;for(let k=0;k<d.length&&!(y<=1e-9);k++){const h=d[k],m=k===d.length-1?y:x*h.outstandingPrincipal/g,v=Math.min(h.outstandingPrincipal,Math.max(0,m));h.outstandingPrincipal-=v,y-=v,i[f]=(i[f]??0)+v}hi(d)}),Oi(t),{loanInterestIncome:s,recognizedLoanLosses:i}},Cu=e=>{const t=e.tolerance??Math.max(1e6,e.targetOutstanding*1e-6);if(e.targetOutstanding>0&&e.cohorts.length===0)throw new Error(`Seeded cohort array empty for ${e.productType} while target outstanding is non-zero`);e.cohorts.forEach(l=>Xd(l,e.maxTermMonths));const n=tn(e.cohorts),r=n-e.targetOutstanding;if(Math.abs(r)>t)throw new Error(`Seeded cohort outstanding mismatch for ${e.productType}: sum ${n.toFixed(2)} vs target ${e.targetOutstanding.toFixed(2)} (diff ${r.toFixed(2)})`)},Nu=e=>{if(e.length<=2)return e.slice();const t=e.slice();for(let n=0;n<e.length;n++){const r=e[n-1]??e[n],l=e[n],i=e[n+1]??e[n];t[n]=(r+l+i)/3}return t},gh=e=>{const t=e.reduce((n,r)=>n+r,0);return t<=0?e.map(()=>0):e.map(n=>n/t)},vh=(e,t)=>{const n=Math.max(0,t),r=e===j.Mortgages?140:36;return(n+1)*Math.exp(-n/r)},yh=e=>{const{productType:t,ageMonths:n,maxTermMonths:r,rng:l}=e,i=Math.min(r,n+1),s=r,a=l.uniform();if(t===j.Mortgages){const o=Math.min(s,240),c=Math.pow(a,.35),f=Math.round(o+(s-o)*c);return Ie(f,i,s)}if(t===j.CorporateLoans){const o=Math.min(s,12),c=Math.min(s,120),f=Math.pow(a,1.4),p=Math.round(o+(c-o)*f);return Ie(Math.max(p,i),i,s)}return Ie(i,i,s)},ef=e=>{var k;if(!ir(e.productType))return[];if(e.targetOutstanding<=0)return[];const t=(k=e.config.productParameters[e.productType])==null?void 0:k.loan;if(!(t!=null&&t.initialSeasoningEnabled))return[{productType:e.productType,cohortId:0,originalPrincipal:e.targetOutstanding,outstandingPrincipal:e.targetOutstanding,annualInterestRate:Math.max(0,e.baseAnnualInterestRate),termMonths:da(e.config,e.productType),ageMonths:0,annualPd:Math.max(0,e.baseAnnualPd),lgd:Ie(e.baseLgd,0,1)}];const n=po(e.config,e.productType),r=n;if(r<=1)throw new Error("maxTermMonths too small for seasoning");const l=fh(e.seed),i=.35;let s=Array.from({length:r},(h,m)=>{const v=vh(e.productType,m),S=Math.exp(l.normal()*i);return Math.max(0,v*S)});s=Nu(Nu(s)),s=gh(s);const a=t.initialMinBucketOutstanding??1e6,c=(t.initialCouponDispersionBps??50)/1e4,f=t.initialPdMultiplierRange??{min:.9,max:1.1},p=t.initialLgdMultiplierRange??{min:.95,max:1.05},d=[],g=s.map((h,m)=>({w:h,ageMonths:m,outstanding:e.targetOutstanding*h})).filter(h=>h.outstanding>=a);if(g.length===0){const h=Ie(da(e.config,e.productType),1,n),m={productType:e.productType,cohortId:0,originalPrincipal:e.targetOutstanding,outstandingPrincipal:e.targetOutstanding,annualInterestRate:Math.max(0,e.baseAnnualInterestRate),termMonths:h,ageMonths:0,annualPd:Math.max(0,e.baseAnnualPd),lgd:Ie(e.baseLgd,0,1)};return Cu({productType:e.productType,targetOutstanding:e.targetOutstanding,cohorts:[m],maxTermMonths:n}),[m]}const x=g.reduce((h,m)=>h+m.w,0);return new Map(g.map(h=>[h.ageMonths,h.w/x])).forEach((h,m)=>{const v=e.targetOutstanding*h,S=yh({productType:e.productType,ageMonths:m,maxTermMonths:n,rng:l});if(m>=S)return;const N=Ie(e.baseAnnualInterestRate+l.normal()*c,1e-4,.25),R=Ie(f.min+(f.max-f.min)*l.uniform(),0,10),C=Ie(p.min+(p.max-p.min)*l.uniform(),0,10),w=Ie(e.baseAnnualPd*R,0,.999999),F=Ie(e.baseLgd*C,0,1),T=ph(v,N,S,m);d.push({productType:e.productType,cohortId:-m,originalPrincipal:T,outstandingPrincipal:v,annualInterestRate:N,termMonths:S,ageMonths:m,annualPd:w,lgd:F})}),d.sort((h,m)=>h.cohortId-m.cohortId),Cu({productType:e.productType,targetOutstanding:e.targetOutstanding,cohorts:d,maxTermMonths:n}),d},xh=e=>Math.max(0,Math.min(1,e)),wh=e=>Math.log(e/(1-e)),Sh=(e,t,n)=>{const r=xh((e-t)/(n-t)),l=Math.min(1-1e-9,Math.max(1e-9,r));return wh(l)},mt=(e,t,n,r,l,i)=>({side:e,productType:t,label:n,currency:co.GBP,balance:r,interestRate:l,maturityBucket:i,liquidityTag:dt.liquidityTags[t],encumbrance:{encumberedAmount:0}}),kh={items:[mt(A.Asset,j.CashReserves,"Cash & Reserves",3e10,.045,Ye.Overnight),mt(A.Asset,j.Gilts,"Gilts",6e10,.04,Ye.GreaterThan5Y),mt(A.Asset,j.Mortgages,"Mortgages",25e10,.055,Ye.GreaterThan5Y),mt(A.Asset,j.CorporateLoans,"Corporate Loans",16e10,.065,Ye.ThreeToFiveY),mt(A.Asset,j.ReverseRepo,"Reverse Repo",0,.04,Ye.LessThan1Y),mt(A.Liability,b.RetailDeposits,"Retail Deposits",26e10,.02,Ye.LessThan1Y),mt(A.Liability,b.CorporateDeposits,"Corporate Deposits",9e10,.03,Ye.LessThan1Y),mt(A.Liability,b.WholesaleFundingST,"Wholesale Funding ST",3e10,.055,Ye.LessThan1Y),mt(A.Liability,b.WholesaleFundingLT,"Wholesale Funding LT",7e10,.06,Ye.GreaterThan5Y),mt(A.Liability,b.RepurchaseAgreements,"Repo Borrowing",0,.05,Ye.LessThan1Y)]},Rh={cet1:4e10,at1:1e10},Mh={interestIncome:0,interestExpense:0,netInterestIncome:0,feeIncome:0,creditLosses:0,operatingExpenses:0,preTaxProfit:0,tax:0,netIncome:0},Ch={cashStart:0,cashEnd:0,netChange:0,operatingCashFlow:0,investingCashFlow:0,financingCashFlow:0},Nh={rwa:0,leverageExposure:0,cet1Ratio:0,leverageRatio:0,hqla:0,lcr:0,lcrOutflowMultiplier:1,asf:0,rsf:0,nsfr:0},jh={cet1Breached:!1,leverageBreached:!1,lcrBreached:!1,nsfrBreached:!1},Eh=.02,bh=.12,tf=.7,Xn={y1:.0378,y2:.0378,y3:.0382,y5:.0397,y10:.0449,y20:.0511,y30:.0521},Th=Kd(tf,[{mYears:1,y:Xn.y1},{mYears:5,y:Xn.y5},{mYears:20,y:Xn.y20}]),Fh={baseRate:.04,riskFreeShort:Xn.y1,riskFreeLong:Xn.y5,mortgageSpread:.015,corporateLoanSpread:.025,wholesaleFundingSpread:.01,seniorDebtSpread:.01,giltRepoHaircut:.02,corpBondRepoHaircut:.05,competitorRetailDepositRate:.015,competitorMortgageRate:.05,competitorCorporateDepositRate:.02,gdpGrowthMoM:.001,unemploymentRate:.051,inflationRate:.038,creditSpread:.011,giltCurve:{nelsonSiegel:{...Th,lambda:tf},yields:Xn},macroModel:{factors:{D:0,S:0,F:0,R:0},gdpRegime:"normal",unemploymentLatent:Sh(.051,Eh,bh),termPremium:.0185,rngSeed:123456789}},Lh={depositFranchiseStrength:.7,reputation:.8,ratingNotchOffset:0},Ph={step:0,date:new Date("2024-01-01T00:00:00Z"),stepLengthMonths:1},Zr={version:"v1",time:Ph,balanceSheet:kh,capital:Rh,incomeStatement:Mh,cashFlowStatement:Ch,riskMetrics:Nh,compliance:jh,market:Fh,behaviour:Lh,loanCohorts:{},isInResolution:!1,hasFailed:!1},$h=dt.global.initialPortfolioSeed??Zr.market.macroModel.rngSeed,nf=e=>{const t=Zr.balanceSheet.items.find(l=>l.productType===e);if(!t)throw new Error(`Missing balance sheet item for ${e} while seeding loan cohorts`);if(t.balance<=0)return;const n=dt.productParameters[e],r=ef({productType:e,targetOutstanding:t.balance,baseAnnualInterestRate:t.interestRate,baseAnnualPd:n.baseDefaultRate,baseLgd:n.lossGivenDefault,config:dt,seed:$h+(e===j.Mortgages?0:1)});Zr.loanCohorts[e]=r,t.balance=tn(r)};nf(j.Mortgages);nf(j.CorporateLoans);const rf=Ii({state:Zr,config:dt}),Dh=_i(rf,dt.riskLimits),gi={...Zr,riskMetrics:rf,compliance:Dh},Cn=e=>Number.isFinite(e)?`${(e*100).toFixed(2)}%`:"N/A",Ih=({riskMetrics:e,equity:t,assets:n,roe:r,nim:l})=>u.jsxs("div",{className:"grid-metrics",children:[u.jsx(_t,{label:"CET1 Ratio",value:Cn(e.cet1Ratio),helper:"CET1 capital divided by risk-weighted assets (>= limit to avoid breach)."}),u.jsx(_t,{label:"Leverage Ratio",value:Cn(e.leverageRatio),helper:"Tier 1 capital over total exposure; backstop against model risk."}),u.jsx(_t,{label:"LCR",value:Cn(e.lcr),helper:"High-quality liquid assets over 30-day stressed net outflows."}),u.jsx(_t,{label:"NSFR",value:Cn(e.nsfr),helper:"Available stable funding over required stable funding (1-year view)."}),u.jsx(_t,{label:"ROE (annualised)",value:Cn(r),helper:"Net income annualised over common equity."}),u.jsx(_t,{label:"NIM (annualised)",value:Cn(l),helper:"Net interest income over average assets."}),u.jsx(_t,{label:"Equity",value:`${(t/1e9).toFixed(1)}bn`,helper:"CET1 + AT1 capital."}),u.jsx(_t,{label:"Total Assets",value:`${(n/1e9).toFixed(1)}bn`,helper:"Balance sheet size."})]}),_t=({label:e,value:t,helper:n})=>u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-label",children:e}),u.jsx("div",{className:"metric-value",children:t}),n&&u.jsx("div",{className:"metric-helper",children:n})]}),_h=({state:e,onChange:t,onSubmit:n,disabled:r})=>{const l=i=>s=>{t({...e,[i]:s.target.value})};return u.jsxs("div",{className:"stack",children:[u.jsx("div",{className:"muted",children:"Enter decimal rates (e.g. 0.025 for 2.5%). Amounts in GBP."}),r&&u.jsx("div",{className:"alert danger",children:"Scenario ended due to failure. Actions are disabled."}),u.jsxs("div",{className:"form-row",children:[u.jsx(Nn,{label:"Retail deposit rate",value:e.retailDepositRate,onChange:l("retailDepositRate"),placeholder:"0.020",disabled:r}),u.jsx(Nn,{label:"Corporate deposit rate",value:e.corporateDepositRate,onChange:l("corporateDepositRate"),placeholder:"0.030",disabled:r}),u.jsx(Nn,{label:"Mortgage rate",value:e.mortgageRate,onChange:l("mortgageRate"),placeholder:"0.055",disabled:r}),u.jsx(Nn,{label:"Corporate loan rate",value:e.corporateLoanRate,onChange:l("corporateLoanRate"),placeholder:"0.065",disabled:r}),u.jsx(Nn,{label:"Issue long-term wholesale debt (GBP)",value:e.issueLTDebtAmount,onChange:l("issueLTDebtAmount"),placeholder:"1000000000",disabled:r}),u.jsx(Nn,{label:"Issue equity (GBP)",value:e.issueEquityAmount,onChange:l("issueEquityAmount"),placeholder:"500000000",disabled:r})]}),u.jsx("button",{className:"button primary",onClick:n,disabled:r,children:"Run next month"})]})},Nn=({label:e,value:t,onChange:n,placeholder:r,disabled:l})=>u.jsxs("label",{className:"field",children:[u.jsx("span",{children:e}),u.jsx("input",{value:t,onChange:n,placeholder:r,disabled:l,inputMode:"decimal"})]}),Oh=({events:e})=>u.jsxs("div",{className:"card stack",children:[u.jsx("h3",{children:"Event Log"}),e.length===0?u.jsx("div",{className:"muted",children:"No events yet."}):u.jsx("ul",{className:"event-log",children:e.map((t,n)=>u.jsxs("li",{className:`event ${t.severity}`,children:["[",t.severity.toUpperCase(),"] ",t.message]},n))})]}),Ah=({scenarios:e,selectedId:t,onSelect:n,onStart:r,description:l})=>u.jsxs("div",{className:"card scenario-card",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:"Scenario"}),u.jsx("h3",{children:"Guide the bank through different worlds"})]}),u.jsxs("div",{className:"form-row",style:{alignItems:"flex-end"},children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{htmlFor:"scenario",children:"Choose a scenario"}),u.jsxs("select",{id:"scenario",value:t??"",onChange:i=>n(i.target.value),children:[u.jsx("option",{value:"",disabled:!0,children:"Select scenario..."}),e.map(i=>u.jsx("option",{value:i.id,children:i.name},i.id))]})]}),u.jsx("button",{className:"button primary",onClick:r,disabled:!t,children:"Start scenario"})]}),l&&u.jsx("p",{className:"muted",children:l})]}),zh=e=>({...e,time:{...e.time,date:new Date(e.time.date.getTime())},balanceSheet:{items:e.balanceSheet.items.map(t=>({...t,encumbrance:t.encumbrance?{...t.encumbrance}:{encumberedAmount:0},liquidityTag:t.liquidityTag?{...t.liquidityTag}:void 0}))},capital:{...e.capital},incomeStatement:{...e.incomeStatement},riskMetrics:{...e.riskMetrics},compliance:{...e.compliance},market:{...e.market,giltCurve:{...e.market.giltCurve,nelsonSiegel:{...e.market.giltCurve.nelsonSiegel},yields:{...e.market.giltCurve.yields}},macroModel:{...e.market.macroModel,factors:{...e.market.macroModel.factors}}},behaviour:{...e.behaviour},loanCohorts:Object.fromEntries(Object.entries(e.loanCohorts??{}).map(([t,n])=>[t,n.map(r=>({...r}))]))}),Bh=(e,t)=>{var i;const n=zh(gi);(i=e==null?void 0:e.balanceSheet)!=null&&i.items&&(n.balanceSheet.items=n.balanceSheet.items.map(s=>{var o,c;const a=(c=(o=e.balanceSheet)==null?void 0:o.items)==null?void 0:c.find(f=>f.productType===s.productType);return a?{...s,...a,encumbrance:a.encumbrance?{...a.encumbrance}:s.encumbrance}:s})),e!=null&&e.capital&&(n.capital={...n.capital,...e.capital}),e!=null&&e.market&&(n.market={...n.market,...e.market}),e!=null&&e.behaviour&&(n.behaviour={...n.behaviour,...e.behaviour});const r=t.global.initialPortfolioSeed??n.market.macroModel.rngSeed;return[j.Mortgages,j.CorporateLoans].forEach((s,a)=>{const o=n.balanceSheet.items.find(g=>g.productType===s);if(!o)return;if(o.balance<=0){n.loanCohorts[s]=[];return}const c=n.loanCohorts[s]??[],f=tn(c);if(f>0){const g=o.balance/f;c.forEach(x=>{x.outstandingPrincipal*=g,x.originalPrincipal*=g}),n.loanCohorts[s]=c,o.balance=tn(c);return}const p=t.productParameters[s],d=ef({productType:s,targetOutstanding:o.balance,baseAnnualInterestRate:o.interestRate,baseAnnualPd:p.baseDefaultRate,baseLgd:p.lossGivenDefault,config:t,seed:r+a});n.loanCohorts[s]=d,o.balance=tn(d)}),n.riskMetrics=Ii({state:n,config:t}),n.compliance=_i(n.riskMetrics,t.riskLimits),n},Jr=[{id:"wholesale-funding-reliance",name:"Wholesale Funding Reliance",description:"Bank leans on short-term wholesale funding with weaker deposits. Early market spread shock and liquidity run stress funding resilience.",initialStateOverride:{balanceSheet:{items:[{productType:b.WholesaleFundingST,balance:8e10},{productType:b.RetailDeposits,balance:2e11}]}},scheduledShocks:[{stepNumber:0,shock:{type:"marketSpreadShock",wholesaleSpreadBps:120,loanSpreadBps:40,repoHaircutIncreasePct:.02}},{stepNumber:0,shock:{type:"idiosyncraticRun",outflowRateMultiplier:1.8}}]},{id:"corporate-credit-boom",name:"Corporate Credit Boom",description:"Aggressive growth in corporate lending sets the stage for a downturn that hits PD/LGD hard.",initialStateOverride:{balanceSheet:{items:[{productType:j.CorporateLoans,balance:24e10},{productType:j.Mortgages,balance:17e10}]}},scheduledShocks:[{stepNumber:3,shock:{type:"macroDownturn",pdMultiplier:3.5,lgdMultiplier:2}}]}],Wh=(e,t)=>{const n=Jr.find(l=>l.id===t);if(!(n!=null&&n.configOverrides))return e;const r=n.configOverrides;return{version:r.version??e.version,productParameters:{...e.productParameters,...r.productParameters??{}},liquidityTags:{...e.liquidityTags,...r.liquidityTags??{}},global:{...e.global,...r.global??{}},riskLimits:{...e.riskLimits,...r.riskLimits??{}}}},Uh=(e,t=dt)=>{const n=Jr.find(r=>r.id===e);return Bh(n==null?void 0:n.initialStateOverride,t)},Hh=(e,t)=>{const n=Jr.find(r=>r.id===e);return n?n.scheduledShocks.filter(r=>r.stepNumber===t).map(r=>r.shock):[]},lf={Level1:1,Level2A:.85,Level2B:.5,None:0},zt=e=>Number.isFinite(e)?`${(e/1e9).toFixed(2)}bn`:"N/A",Tn=e=>Number.isFinite(e)?`${(e*100).toFixed(2)}%`:"N/A",ju=e=>e===void 0||!Number.isFinite(e)?"":`${(e*100).toFixed(0)}%`,Eu=e=>{if(e===null||!Number.isFinite(e))return"";const t=Math.abs(e)>=100?e.toFixed(0):e.toFixed(1);return`${e>0?"+":""}${t}%`},Gh=(e,t,n=4)=>{let r=e,l=t;if(r===l){const x=Math.max(Math.abs(r)*.25,1);r-=x,l+=x}const s=(l-r)/Math.max(n,1);if(!Number.isFinite(s)||s===0)return[r,l];const a=10**Math.floor(Math.log10(Math.abs(s))),o=s/a;let c=1;o>5?c=10:o>2?c=5:o>1&&(c=2);const f=c*a,p=Math.floor(r/f)*f,d=Math.ceil(l/f)*f,g=[];for(let x=p;x<=d+f/2;x+=f){const y=Number(x.toFixed(10));g.includes(y)||g.push(y)}return g.length<2&&g.push(Number((p+f).toFixed(10))),g},Vh=(e,t)=>{if(((t==null?void 0:t.toLowerCase())??"").includes("%")){const l=e*100;return`${l.toFixed(Math.abs(l)>=10?0:1)}%`}const r=Math.abs(e);return r>=1e9?`${(e/1e9).toFixed(r>=1e10?0:1)}bn`:r>=1e6?`${(e/1e6).toFixed(r>=1e8?0:1)}m`:r>=1e3?`${(e/1e3).toFixed(r>=1e4?0:1)}k`:r>=1?e.toFixed(r>=10?0:1):e.toFixed(2)},q=(e,t)=>e.map(n=>({step:n.time.step,value:t(n)})),Q=e=>{if(e.length<2)return null;const t=[...e].sort((l,i)=>l.step-i.step),n=t[t.length-1],r=t.find(l=>l.step===n.step-1);return!r||r.value===0||!Number.isFinite(n.value)||!Number.isFinite(r.value)?null:(n.value-r.value)/Math.abs(r.value)*100},gn=(e,t)=>e.balanceSheet.items.find(n=>n.productType===t),fa=e=>e===b.RetailDeposits||e===b.CorporateDeposits,qh=(e,t,n)=>{const r=e.balanceSheet.items.filter(s=>s.side===A.Asset),l=r.map(s=>{var c;const a=((c=n.productParameters[s.productType])==null?void 0:c.riskWeight)??0,o=q(t,f=>{const p=gn(f,s.productType);return((p==null?void 0:p.balance)??0)*a});return{id:s.productType,label:s.label,value:s.balance*a,changePct:Q(o),series:o,meta:{exposure:s.balance,riskWeight:a}}}),i=q(t,s=>s.riskMetrics.rwa);return l.push({id:"rwa-total",label:"Total RWA",value:e.riskMetrics.rwa,changePct:Q(i),series:i,meta:{exposure:r.reduce((s,a)=>s+a.balance,0)}}),l},Qh=(e,t)=>{const r=e.balanceSheet.items.filter(a=>a.side===A.Asset).map(a=>{const o=q(t,c=>{var f;return((f=gn(c,a.productType))==null?void 0:f.balance)??0});return{id:`lev-${a.productType}`,label:a.label,value:a.balance,changePct:Q(o),series:o,meta:{category:"Exposure"}}}),l=q(t,a=>a.riskMetrics.leverageExposure);r.push({id:"lev-total-exposure",label:"Total exposure",value:e.riskMetrics.leverageExposure,changePct:Q(l),series:l,meta:{category:"Exposure"}});const i=q(t,a=>a.capital.cet1+a.capital.at1);r.push({id:"lev-tier1",label:"Tier 1 capital",value:e.capital.cet1+e.capital.at1,changePct:Q(i),series:i,meta:{category:"Capital"}});const s=q(t,a=>a.riskMetrics.leverageRatio);return r.push({id:"lev-ratio",label:"Leverage ratio",value:e.riskMetrics.leverageRatio,changePct:Q(s),series:s,display:"percent",meta:{category:"Ratio"}}),r},Yh=(e,t,n)=>{const r=[];e.balanceSheet.items.filter(f=>f.side===A.Asset).forEach(f=>{var g,x;const p=((g=f.liquidityTag)==null?void 0:g.nsfrRsfFactor)??((x=n.liquidityTags[f.productType])==null?void 0:x.nsfrRsfFactor)??0,d=q(t,y=>{const k=gn(y,f.productType);return((k==null?void 0:k.balance)??0)*p});r.push({id:`nsfr-rsf-${f.productType}`,label:f.label,value:f.balance*p,changePct:Q(d),series:d,meta:{leg:"RSF",base:f.balance,factor:p}})}),e.balanceSheet.items.filter(f=>f.side===A.Liability).forEach(f=>{var g,x;const p=((g=f.liquidityTag)==null?void 0:g.nsfrAsfFactor)??((x=n.liquidityTags[f.productType])==null?void 0:x.nsfrAsfFactor)??0,d=q(t,y=>{const k=gn(y,f.productType);return((k==null?void 0:k.balance)??0)*p});r.push({id:`nsfr-asf-${f.productType}`,label:f.label,value:f.balance*p,changePct:Q(d),series:d,meta:{leg:"ASF",base:f.balance,factor:p}})}),[{id:"cet1",label:"CET1 capital",base:e.capital.cet1},{id:"at1",label:"AT1 capital",base:e.capital.at1}].forEach(f=>{const p=q(t,d=>f.id==="cet1"?d.capital.cet1:d.capital.at1);r.push({id:`nsfr-asf-${f.id}`,label:f.label,value:f.base,changePct:Q(p),series:p,meta:{leg:"ASF",base:f.base,factor:1}})});const a=q(t,f=>f.riskMetrics.asf),o=q(t,f=>f.riskMetrics.rsf),c=q(t,f=>f.riskMetrics.nsfr);return r.push({id:"nsfr-total-asf",label:"Total ASF",value:e.riskMetrics.asf,changePct:Q(a),series:a,meta:{leg:"ASF total",factor:void 0,base:void 0}},{id:"nsfr-total-rsf",label:"Total RSF",value:e.riskMetrics.rsf,changePct:Q(o),series:o,meta:{leg:"RSF total",factor:void 0,base:void 0}},{id:"nsfr-ratio",label:"NSFR",value:e.riskMetrics.nsfr,changePct:Q(c),series:c,display:"percent",meta:{leg:"Ratio",factor:void 0,base:void 0}}),r},jn=e=>{let t=0,n=0,r=0;const l=e.riskMetrics.lcrOutflowMultiplier??1;e.balanceSheet.items.forEach(a=>{var d;const o=a.liquidityTag,c=((d=a.encumbrance)==null?void 0:d.encumberedAmount)??0,f=Math.max(0,a.balance-c);if((o==null?void 0:o.lcrOutflowRate)!==void 0){const g=fa(a.productType)?o.lcrOutflowRate*l:o.lcrOutflowRate;t+=a.balance*g}(o==null?void 0:o.lcrInflowRate)!==void 0&&(n+=a.balance*o.lcrInflowRate);const p=lf[(o==null?void 0:o.hqlaLevel)??"None"]??0;p>0&&(r+=f*p)});const i=Math.min(n,.75*t),s=Math.max(0,t-i);return{outflows:t,inflows:n,inflowsCapped:i,netOutflows:s,hqla:r}},Kh=(e,t)=>{const n=[];e.balanceSheet.items.forEach(f=>{var k;const p=f.liquidityTag,d=lf[(p==null?void 0:p.hqlaLevel)??"None"]??0;if(d<=0)return;const g=((k=f.encumbrance)==null?void 0:k.encumberedAmount)??0,x=Math.max(0,f.balance-g),y=q(t,h=>{var N;const m=gn(h,f.productType),v=((N=m==null?void 0:m.encumbrance)==null?void 0:N.encumberedAmount)??0;return Math.max(0,((m==null?void 0:m.balance)??0)-v)*d});n.push({id:`lcr-hqla-${f.productType}`,label:`${f.label} (HQLA)`,value:x*d,changePct:Q(y),series:y,meta:{leg:"HQLA",base:x,factor:d}})}),e.balanceSheet.items.forEach(f=>{var x;const p=(x=f.liquidityTag)==null?void 0:x.lcrOutflowRate;if(p===void 0)return;const d=fa(f.productType)?p*(e.riskMetrics.lcrOutflowMultiplier??1):p,g=q(t,y=>{var m;const k=y.riskMetrics.lcrOutflowMultiplier??1,h=fa(f.productType)?p*k:p;return(((m=gn(y,f.productType))==null?void 0:m.balance)??0)*h});n.push({id:`lcr-out-${f.productType}`,label:`${f.label} outflow`,value:f.balance*d,changePct:Q(g),series:g,meta:{leg:"Outflow",base:f.balance,factor:d}})}),e.balanceSheet.items.forEach(f=>{var g;const p=(g=f.liquidityTag)==null?void 0:g.lcrInflowRate;if(p===void 0)return;const d=q(t,x=>{var y;return(((y=gn(x,f.productType))==null?void 0:y.balance)??0)*p});n.push({id:`lcr-in-${f.productType}`,label:`${f.label} inflow`,value:f.balance*p,changePct:Q(d),series:d,meta:{leg:"Inflow",base:f.balance,factor:p}})});const r=jn(e),l=q(t,f=>jn(f).outflows),i=q(t,f=>jn(f).inflows),s=q(t,f=>jn(f).inflowsCapped),a=q(t,f=>jn(f).netOutflows),o=q(t,f=>jn(f).hqla),c=q(t,f=>f.riskMetrics.lcr);return n.push({id:"lcr-total-hqla",label:"Total HQLA",value:r.hqla,changePct:Q(o),series:o,meta:{leg:"HQLA total"}},{id:"lcr-total-outflows",label:"Total outflows",value:r.outflows,changePct:Q(l),series:l,meta:{leg:"Outflow total"}},{id:"lcr-total-inflows",label:"Total inflows",value:r.inflows,changePct:Q(i),series:i,meta:{leg:"Inflow total"}},{id:"lcr-cap-inflows",label:"Inflows capped (75% of outflows)",value:r.inflowsCapped,changePct:Q(s),series:s,meta:{leg:"Cap"}},{id:"lcr-net-outflows",label:"Net outflows",value:r.netOutflows,changePct:Q(a),series:a,meta:{leg:"Net outflow"}},{id:"lcr-ratio",label:"LCR",value:e.riskMetrics.lcr,changePct:Q(c),series:c,display:"percent",meta:{leg:"Ratio"}}),n},Xh=(e,t)=>{const n=q(t,o=>o.capital.cet1),r=q(t,o=>o.capital.at1),l=q(t,o=>o.capital.cet1+o.capital.at1),i=q(t,o=>o.riskMetrics.rwa),s=q(t,o=>o.riskMetrics.cet1Ratio),a=q(t,o=>o.riskMetrics.leverageRatio);return[{id:"cap-cet1",label:"CET1 capital",value:e.capital.cet1,changePct:Q(n),series:n,meta:{type:"Capital"}},{id:"cap-at1",label:"AT1 capital",value:e.capital.at1,changePct:Q(r),series:r,meta:{type:"Capital"}},{id:"cap-tier1",label:"Tier 1 capital",value:e.capital.cet1+e.capital.at1,changePct:Q(l),series:l,meta:{type:"Capital"}},{id:"cap-rwa",label:"Risk weighted assets",value:e.riskMetrics.rwa,changePct:Q(i),series:i,meta:{type:"Buffer"}},{id:"cap-cet1-ratio",label:"CET1 ratio",value:e.riskMetrics.cet1Ratio,changePct:Q(s),series:s,display:"percent",meta:{type:"Ratio"}},{id:"cap-lev-ratio",label:"Leverage ratio",value:e.riskMetrics.leverageRatio,changePct:Q(a),series:a,display:"percent",meta:{type:"Ratio"}}]},Zh=({data:e,xLabel:t="Simulation step",yLabel:n="Value",xTickInterval:r=12})=>{const l=e.filter(C=>Number.isFinite(C.value));if(!l.length)return u.jsx("div",{className:"series-chart empty",children:u.jsx("div",{className:"muted",children:"No history yet  run the simulation to build a trend."})});const i=l.map(C=>C.value),s=Math.max(...i),a=Math.min(...i),o=Gh(a,s,5),c=o.length?Math.min(a,...o):a,f=o.length?Math.max(s,...o):s,p=f-c,d=p===0?Math.max(Math.abs(f),1):p,g=c<0&&f>0,x=100-(0-c)/d*100,y=l.map(C=>C.step),k=Math.min(...y),h=Math.max(...y),m=Math.max(1,h-k),v=l.map(C=>{const w=(C.step-k)/m*100,F=100-(C.value-c)/d*100;return`${w.toFixed(2)},${F.toFixed(2)}`}),S=`${v.join(" ")} 100,100 0,100`,N=[],R=Math.max(1,r);N.push(k);for(let C=Math.ceil(k/R)*R;C<h;C+=R)C>k&&C<h&&N.push(C);return h!==k&&N.push(h),u.jsx("div",{className:"series-chart",children:u.jsxs("div",{className:"series-plot",children:[u.jsx("div",{className:"axis-label y-axis-label",children:n}),u.jsx("div",{className:"axis-ticks y-axis-ticks",children:o.map(C=>{const w=(C-c)/d*100;return u.jsx("span",{style:{bottom:`${w}%`},children:Vh(C,n)},C)})}),u.jsxs("div",{className:"plot-body",children:[u.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",role:"img","aria-label":"Time series",children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"series-fill",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"var(--accent)",stopOpacity:"0.2"}),u.jsx("stop",{offset:"100%",stopColor:"var(--accent)",stopOpacity:"0"})]})}),g&&u.jsx("line",{x1:"0",y1:x,x2:"100",y2:x,className:"series-zero"}),u.jsx("polygon",{className:"series-area",points:S,fill:"url(#series-fill)"}),u.jsx("polyline",{className:"series-line",points:v.join(" "),fill:"none",stroke:"var(--accent)",strokeWidth:"2"})]}),u.jsx("div",{className:"axis-ticks x-axis-ticks",children:N.map(C=>{const w=(C-k)/m*100;return u.jsx("span",{style:{left:`${w}%`},children:C},C)})}),u.jsx("div",{className:"axis-label x-axis-label",children:t})]})]})})},vr=({title:e,subtitle:t,rows:n,columns:r,selectedId:l,onSelect:i,isOpen:s,onToggle:a,valueHeader:o="Value",valueFormatter:c,yLabelForRow:f})=>{const p=n.find(y=>y.id===l)??n[0],d=y=>y===null?"muted":y>0?"positive":y<0?"negative":"muted",g=f?f(p):"Value",x=y=>c?c(y):y.display==="percent"?Tn(y.value):zt(y.value);return u.jsxs("div",{className:"card statement-card",children:[u.jsxs("div",{className:"statement-header",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:t}),u.jsx("h3",{children:e})]}),u.jsx("div",{className:"statement-header-actions",children:u.jsx("button",{className:"button ghost small",type:"button",onClick:a,children:s?"Collapse":"Expand"})})]}),s&&u.jsxs("div",{className:"statement-body",children:[u.jsx("div",{className:"statement-table",children:u.jsxs("table",{className:"data-table clickable",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Line item"}),r==null?void 0:r.map(y=>u.jsx("th",{className:y.align==="right"?"numeric":void 0,children:y.label},y.id)),u.jsx("th",{className:"numeric",children:o}),u.jsx("th",{className:"numeric",children:"MoM"})]})}),u.jsx("tbody",{children:n.map(y=>u.jsxs("tr",{className:y.id===(p==null?void 0:p.id)?"active":"",onClick:()=>i(y.id),onKeyDown:k=>{(k.key==="Enter"||k.key===" ")&&(k.preventDefault(),i(y.id))},tabIndex:0,"aria-selected":y.id===(p==null?void 0:p.id),style:{cursor:"pointer"},children:[u.jsx("td",{children:y.label}),r==null?void 0:r.map(k=>u.jsx("td",{className:k.align==="right"?"numeric":void 0,children:k.render(y)},k.id)),u.jsx("td",{className:"numeric",children:x(y)}),u.jsx("td",{className:`numeric ${d(y.changePct)}`,children:Eu(y.changePct)})]},y.id))})]})}),u.jsx("div",{className:"statement-chart",children:p?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"chart-meta",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:"Time series"}),u.jsx("div",{className:"chart-title",children:p.label})]}),u.jsxs("div",{className:"chart-pills",children:[u.jsxs("span",{className:"pill",children:["Now ",x(p)]}),u.jsxs("span",{className:`pill ${d(p.changePct)}`,children:["MoM ",Eu(p.changePct)]})]})]}),u.jsx(Zh,{data:p.series,yLabel:g,xTickInterval:12})]}):u.jsx("div",{className:"muted",children:"Select a line item to plot."})})]})]})},yr=(e,t,n)=>{if(!e.length)return;const r=e.some(l=>l.id===t);(!t||!r)&&n(e[0].id)},Jh=({state:e,history:t,config:n})=>{const r=D.useMemo(()=>qh(e,t,n),[e,t,n]),l=D.useMemo(()=>Qh(e,t),[e,t]),i=D.useMemo(()=>Yh(e,t,n),[e,t,n]),s=D.useMemo(()=>Kh(e,t),[e,t]),a=D.useMemo(()=>Xh(e,t),[e,t]),[o,c]=D.useState({}),[f,p]=D.useState({rwa:!0,leverage:!0,nsfr:!0,lcr:!0,capital:!0});return D.useEffect(()=>{yr(r,o.rwa,d=>c(g=>({...g,rwa:d})))},[r,o.rwa]),D.useEffect(()=>{yr(l,o.leverage,d=>c(g=>({...g,leverage:d})))},[l,o.leverage]),D.useEffect(()=>{yr(i,o.nsfr,d=>c(g=>({...g,nsfr:d})))},[i,o.nsfr]),D.useEffect(()=>{yr(s,o.lcr,d=>c(g=>({...g,lcr:d})))},[s,o.lcr]),D.useEffect(()=>{yr(a,o.capital,d=>c(g=>({...g,capital:d})))},[a,o.capital]),u.jsxs("div",{className:"stack",children:[u.jsx(vr,{title:"Risk-weighted assets",subtitle:"RWA stack by product",rows:r,columns:[{id:"exposure",label:"Exposure",align:"right",render:d=>{var g;return zt(Number(((g=d.meta)==null?void 0:g.exposure)??0))}},{id:"rw",label:"RW",align:"right",render:d=>{var g;return Tn(Number(((g=d.meta)==null?void 0:g.riskWeight)??0))}}],valueHeader:"RWA",selectedId:o.rwa,onSelect:d=>c(g=>({...g,rwa:d})),isOpen:f.rwa,onToggle:()=>p(d=>({...d,rwa:!d.rwa})),yLabelForRow:d=>(d==null?void 0:d.display)==="percent"?"Ratio (%)":" (bn)"}),u.jsx(vr,{title:"Leverage ratio",subtitle:"Exposure vs Tier 1 capital",rows:l,columns:[{id:"category",label:"Category",align:"left",render:d=>{var g;return((g=d.meta)==null?void 0:g.category)??""}}],valueHeader:"Value",valueFormatter:d=>d.display==="percent"?Tn(d.value):zt(d.value),selectedId:o.leverage,onSelect:d=>c(g=>({...g,leverage:d})),isOpen:f.leverage,onToggle:()=>p(d=>({...d,leverage:!d.leverage})),yLabelForRow:d=>(d==null?void 0:d.display)==="percent"?"Ratio (%)":" (bn)"}),u.jsx(vr,{title:"NSFR",subtitle:"Available vs required stable funding",rows:i,columns:[{id:"leg",label:"Leg",render:d=>{var g;return((g=d.meta)==null?void 0:g.leg)??""}},{id:"base",label:"Base",align:"right",render:d=>{var g;return((g=d.meta)==null?void 0:g.base)!==void 0?zt(Number(d.meta.base)):""}},{id:"factor",label:"Factor",align:"right",render:d=>{var g;return ju(Number((g=d.meta)==null?void 0:g.factor))}}],valueHeader:"Required / available",valueFormatter:d=>d.display==="percent"?Tn(d.value):zt(d.value),selectedId:o.nsfr,onSelect:d=>c(g=>({...g,nsfr:d})),isOpen:f.nsfr,onToggle:()=>p(d=>({...d,nsfr:!d.nsfr})),yLabelForRow:d=>(d==null?void 0:d.display)==="percent"?"Ratio (%)":" (bn)"}),u.jsx(vr,{title:"LCR",subtitle:"Liquidity coverage components",rows:s,columns:[{id:"leg",label:"Leg",render:d=>{var g;return((g=d.meta)==null?void 0:g.leg)??""}},{id:"base",label:"Base",align:"right",render:d=>{var g;return((g=d.meta)==null?void 0:g.base)!==void 0?zt(Number(d.meta.base)):""}},{id:"factor",label:"Factor",align:"right",render:d=>{var g;return ju(Number((g=d.meta)==null?void 0:g.factor))}}],valueHeader:"Amount",valueFormatter:d=>d.display==="percent"?Tn(d.value):zt(d.value),selectedId:o.lcr,onSelect:d=>c(g=>({...g,lcr:d})),isOpen:f.lcr,onToggle:()=>p(d=>({...d,lcr:!d.lcr})),yLabelForRow:d=>(d==null?void 0:d.display)==="percent"?"Ratio (%)":" (bn)"}),u.jsx(vr,{title:"Capital stack",subtitle:"CET1, AT1, and ratios",rows:a,columns:[{id:"type",label:"Type",render:d=>{var g;return((g=d.meta)==null?void 0:g.type)??""}}],valueHeader:"Value",valueFormatter:d=>d.display==="percent"?Tn(d.value):zt(d.value),selectedId:o.capital,onSelect:d=>c(g=>({...g,capital:d})),isOpen:f.capital,onToggle:()=>p(d=>({...d,capital:!d.capital})),yLabelForRow:d=>(d==null?void 0:d.display)==="percent"?"Ratio (%)":" (bn)"})]})};j.Mortgages,j.CorporateLoans;const fs={[j.Mortgages]:"Mortgages",[j.CorporateLoans]:"Corporate Loans"},eg={greenMax:.005,amberMax:.02},tg={greenMax:.25,amberMax:.45},ng={greenMax:.002,amberMax:.008},rg={greenMax:120,amberMax:300},Un=e=>Number.isFinite(e)?`${(e/1e9).toFixed(2)}bn`:"",_e=e=>Number.isFinite(e)?`${(e*100).toFixed(2)}%`:"",En=e=>Number.isFinite(e)?`${Math.round(e)}`:"",kl=(e,t)=>Number.isFinite(e)?e<=t.greenMax?"rag-green":e<=t.amberMax?"rag-amber":"rag-red":"rag-amber",ps=e=>Math.max(0,Math.floor(e.termMonths-e.ageMonths)),Rl=(e,t)=>{let n=0,r=0;return e.forEach(l=>{const i=Math.max(0,l.outstandingPrincipal??0),s=t(l);!Number.isFinite(i)||i<=0||Number.isFinite(s)&&(n+=i,r+=i*s)}),n>0?r/n:Number.NaN},ms=(e,t)=>{const n=e.trim().toLowerCase().replace(/,/g,"");if(!n)return null;const r=n.match(/^(.*?)(%|bn|m|k)$/);let l=n,i=1;if(r){l=r[1];const a=r[2];a==="%"&&(i=.01),a==="bn"&&(i=1e9),a==="m"&&(i=1e6),a==="k"&&(i=1e3)}else t==="percent"&&(i=.01),t==="billions"&&(i=1e9);const s=Number(l);return Number.isFinite(s)?s*i:null},hs=(e,t)=>{const n=e.trim();if(!n)return null;if(n.includes("..")){const[l,i]=n.split("..",2),s=ms(l,t),a=ms(i,t);return s===null||a===null?null:{kind:"range",min:Math.min(s,a),max:Math.max(s,a)}}const r=n.match(/^(<=|>=|<|>|=)\s*(.+)$/);if(r){const l=ms(r[2],t);return l===null?null:{kind:"cmp",op:r[1],value:l}}return null},gs=(e,t)=>Number.isFinite(e)?t.kind==="range"?e>=t.min&&e<=t.max:t.op===">"?e>t.value:t.op===">="?e>=t.value:t.op==="<"?e<t.value:t.op==="<="?e<=t.value:e===t.value:!1,Ml=(e,t)=>{const n=Number.isFinite(e),r=Number.isFinite(t);return!n&&!r?0:n?r?e-t:-1:1},bu=(e,t)=>e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"}),Tu={product:"",balance:"",rate:"",maturity:""},Fu={cohortId:"",ageMonths:"",remainingTermMonths:"",outstandingPrincipal:"",annualInterestRate:"",annualPd:"",lgd:"",pdxlgd:""},bn=[{key:"cohortId",label:"Cohort ID",filterUnit:"raw",placeholder:"e.g. >= 0",value:e=>e.cohortId,display:e=>En(e.cohortId),cell:e=>En(e.cohortId)},{key:"ageMonths",label:"Age (m)",filterUnit:"raw",placeholder:"e.g. > 12",value:e=>e.ageMonths,display:e=>En(e.ageMonths),cell:e=>En(e.ageMonths)},{key:"remainingTermMonths",label:"Remaining term (m)",filterUnit:"raw",placeholder:"e.g. < 60",value:e=>ps(e),display:e=>En(ps(e)),cell:e=>{const t=ps(e);return u.jsx("span",{className:`rag-badge ${kl(t,rg)}`,children:En(t)})}},{key:"outstandingPrincipal",label:"Outstanding",filterUnit:"billions",placeholder:"bn (e.g. > 10)",value:e=>e.outstandingPrincipal,display:e=>Un(e.outstandingPrincipal),cell:e=>Un(e.outstandingPrincipal)},{key:"annualInterestRate",label:"Coupon",filterUnit:"percent",placeholder:"% (e.g. < 5)",value:e=>e.annualInterestRate,display:e=>_e(e.annualInterestRate),cell:e=>_e(e.annualInterestRate)},{key:"annualPd",label:"PD",filterUnit:"percent",placeholder:"% (e.g. > 2)",value:e=>e.annualPd,display:e=>_e(e.annualPd),cell:e=>u.jsx("span",{className:`rag-badge ${kl(e.annualPd,eg)}`,children:_e(e.annualPd)})},{key:"lgd",label:"LGD",filterUnit:"percent",placeholder:"% (e.g. > 45)",value:e=>e.lgd,display:e=>_e(e.lgd),cell:e=>u.jsx("span",{className:`rag-badge ${kl(e.lgd,tg)}`,children:_e(e.lgd)})},{key:"pdxlgd",label:"PDLGD",filterUnit:"percent",placeholder:"% (e.g. > 0.8)",value:e=>e.annualPd*e.lgd,display:e=>_e(e.annualPd*e.lgd),cell:e=>{const t=e.annualPd*e.lgd;return u.jsx("span",{className:`rag-badge ${kl(t,ng)}`,children:_e(t)})}}],vi=(e,t,n)=>{var i;const r=e.some(s=>s.productType===n),l=((i=t==null?void 0:t[n])==null?void 0:i.length)??0;return r||l>0},Lu=(e,t)=>vi(e,t,j.Mortgages)?j.Mortgages:vi(e,t,j.CorporateLoans)?j.CorporateLoans:j.Mortgages,lg=e=>e.productType===j.Mortgages||e.productType===j.CorporateLoans,ig=({items:e,loanCohorts:t})=>{const n=D.useMemo(()=>e.filter(lg),[e]),r=D.useMemo(()=>n.reduce((w,F)=>w+F.balance,0),[n]),[l,i]=D.useState(()=>Lu(e,t)),s=D.useMemo(()=>vi(e,t,j.Mortgages),[e,t]),a=D.useMemo(()=>vi(e,t,j.CorporateLoans),[e,t]);D.useEffect(()=>{(l===j.Mortgages?s:a)||i(Lu(e,t))},[a,e,t,s,l]);const[o,c]=D.useState(null),[f,p]=D.useState(()=>({...Tu})),d=D.useMemo(()=>Object.values(f).some(w=>w.trim()!==""),[f]),g=D.useMemo(()=>{const w=f.product.trim().toLowerCase(),F=f.maturity.trim().toLowerCase(),T=f.balance.trim(),I=f.rate.trim(),Y=T?hs(T,"billions"):null,V=I?hs(I,"percent"):null;return n.filter(H=>{if(w&&!H.label.toLowerCase().includes(w)||F&&!String(H.maturityBucket??"").toLowerCase().includes(F))return!1;if(T){if(Y){if(!gs(H.balance,Y))return!1}else if(!Un(H.balance).toLowerCase().includes(T.toLowerCase()))return!1}if(I){if(V){if(!gs(H.interestRate,V))return!1}else if(!_e(H.interestRate).toLowerCase().includes(I.toLowerCase()))return!1}return!0})},[f,n]),x=D.useMemo(()=>{if(!o)return g;const w=o.direction==="asc"?1:-1,F=g.slice();return F.sort((T,I)=>o.key==="product"?bu(T.label,I.label)*w:o.key==="maturity"?bu(String(T.maturityBucket??""),String(I.maturityBucket??""))*w:o.key==="balance"?Ml(T.balance,I.balance)*w:o.key==="rate"?Ml(T.interestRate,I.interestRate)*w:0),F},[g,o]),[y,k]=D.useState(()=>({key:"cohortId",direction:"asc"})),[h,m]=D.useState(()=>({...Fu})),v=D.useMemo(()=>Object.values(h).some(w=>w.trim()!==""),[h]),S=D.useMemo(()=>((t==null?void 0:t[l])??[]).filter(w=>w.productType===l),[t,l]),N=D.useMemo(()=>v?S.filter(w=>{var F;for(const T of bn){const I=((F=h[T.key])==null?void 0:F.trim())??"";if(!I)continue;const Y=hs(I,T.filterUnit);if(Y){if(!gs(T.value(w),Y))return!1;continue}if(!T.display(w).toLowerCase().includes(I.toLowerCase()))return!1}return!0}):S,[h,v,S]),R=D.useMemo(()=>{const w=bn.find(I=>I.key===y.key);if(!w)return N;const F=y.direction==="asc"?1:-1,T=N.slice();return T.sort((I,Y)=>{const V=Ml(w.value(I),w.value(Y));return V!==0?V*F:Ml(I.cohortId,Y.cohortId)}),T},[y,N]),C=D.useMemo(()=>{const w=R.length,F=R.reduce((H,ce)=>H+(ce.outstandingPrincipal??0),0),T=Rl(R,H=>H.annualInterestRate),I=Rl(R,H=>H.annualPd),Y=Rl(R,H=>H.lgd),V=Rl(R,H=>H.annualPd*H.lgd);return{cohortCount:w,totalOutstanding:F,weightedCoupon:T,weightedPd:I,weightedLgd:Y,weightedRisk:V}},[R]);return u.jsxs("div",{className:"card stack",children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,flexWrap:"wrap"},children:[u.jsx("h3",{children:"Loan Portfolio"}),u.jsxs("div",{className:"tabs",role:"tablist","aria-label":"Loan portfolio selector",children:[u.jsx("button",{type:"button",className:`tab-button ${l===j.Mortgages?"active":""}`,onClick:()=>i(j.Mortgages),role:"tab","aria-selected":l===j.Mortgages,disabled:!s,children:fs[j.Mortgages]}),u.jsx("button",{type:"button",className:`tab-button ${l===j.CorporateLoans?"active":""}`,onClick:()=>i(j.CorporateLoans),role:"tab","aria-selected":l===j.CorporateLoans,disabled:!a,children:fs[j.CorporateLoans]})]})]}),u.jsxs("div",{className:"muted",children:["Total loans: ",u.jsx("strong",{children:Un(r)})]}),u.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:10,flexWrap:"wrap"},children:u.jsx("button",{type:"button",className:"button small",onClick:()=>p({...Tu}),disabled:!d,children:"Clear product filters"})}),u.jsxs("table",{className:"data-table clickable",children:[u.jsxs("thead",{children:[u.jsxs("tr",{children:[u.jsx("th",{children:u.jsxs("button",{type:"button",className:"table-sort-button",onClick:()=>c(w=>!w||w.key!=="product"?{key:"product",direction:"asc"}:{key:"product",direction:w.direction==="asc"?"desc":"asc"}),children:["Product",(o==null?void 0:o.key)==="product"&&u.jsx("span",{className:"table-sort-indicator",children:o.direction==="asc"?"":""})]})}),u.jsx("th",{className:"numeric",children:u.jsxs("button",{type:"button",className:"table-sort-button",onClick:()=>c(w=>!w||w.key!=="balance"?{key:"balance",direction:"asc"}:{key:"balance",direction:w.direction==="asc"?"desc":"asc"}),children:["Balance",(o==null?void 0:o.key)==="balance"&&u.jsx("span",{className:"table-sort-indicator",children:o.direction==="asc"?"":""})]})}),u.jsx("th",{className:"numeric",children:u.jsxs("button",{type:"button",className:"table-sort-button",onClick:()=>c(w=>!w||w.key!=="rate"?{key:"rate",direction:"asc"}:{key:"rate",direction:w.direction==="asc"?"desc":"asc"}),children:["Rate",(o==null?void 0:o.key)==="rate"&&u.jsx("span",{className:"table-sort-indicator",children:o.direction==="asc"?"":""})]})}),u.jsx("th",{children:u.jsxs("button",{type:"button",className:"table-sort-button",onClick:()=>c(w=>!w||w.key!=="maturity"?{key:"maturity",direction:"asc"}:{key:"maturity",direction:w.direction==="asc"?"desc":"asc"}),children:["Maturity",(o==null?void 0:o.key)==="maturity"&&u.jsx("span",{className:"table-sort-indicator",children:o.direction==="asc"?"":""})]})})]}),u.jsxs("tr",{className:"table-filter-row",children:[u.jsx("th",{children:u.jsx("input",{className:"table-filter-input",value:f.product,onChange:w=>p(F=>({...F,product:w.target.value})),placeholder:"Filter product","aria-label":"Filter loan products"})}),u.jsx("th",{className:"numeric",children:u.jsx("input",{className:"table-filter-input",value:f.balance,onChange:w=>p(F=>({...F,balance:w.target.value})),placeholder:"bn (e.g. > 10)","aria-label":"Filter balance (billions)"})}),u.jsx("th",{className:"numeric",children:u.jsx("input",{className:"table-filter-input",value:f.rate,onChange:w=>p(F=>({...F,rate:w.target.value})),placeholder:"% (e.g. < 5)","aria-label":"Filter rate (percent)"})}),u.jsx("th",{children:u.jsx("input",{className:"table-filter-input",value:f.maturity,onChange:w=>p(F=>({...F,maturity:w.target.value})),placeholder:"Filter maturity","aria-label":"Filter maturity bucket"})})]})]}),u.jsx("tbody",{children:x.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:4,children:u.jsx("span",{className:"muted",children:"No products match the current filters."})})}):x.map(w=>u.jsxs("tr",{className:w.productType===l?"active":void 0,onClick:()=>i(w.productType),children:[u.jsx("td",{children:w.label}),u.jsx("td",{className:"numeric",children:Un(w.balance)}),u.jsx("td",{className:"numeric",children:_e(w.interestRate)}),u.jsx("td",{children:w.maturityBucket})]},w.productType))})]}),u.jsxs("div",{className:"stack",style:{marginTop:10},children:[u.jsxs("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"space-between",gap:12,flexWrap:"wrap"},children:[u.jsxs("h3",{style:{margin:0},children:["Cohort breakdown  ",fs[l]]}),u.jsxs("div",{className:"muted",style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[u.jsx("span",{className:"rag-badge rag-green",children:"Green safer"}),u.jsx("span",{className:"rag-badge rag-amber",children:"Amber middle"}),u.jsx("span",{className:"rag-badge rag-red",children:"Red riskier"})]})]}),S.length===0?u.jsx("div",{className:"muted",children:"No cohort data available for this portfolio."}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid-metrics",children:[u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-label",children:"Cohorts"}),u.jsx("div",{className:"metric-value",children:C.cohortCount}),v&&u.jsxs("div",{className:"metric-helper",children:["Showing ",C.cohortCount,"/",S.length]})]}),u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-label",children:"Outstanding"}),u.jsx("div",{className:"metric-value",children:Un(C.totalOutstanding)})]}),u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-label",children:"WA coupon"}),u.jsx("div",{className:"metric-value",children:_e(C.weightedCoupon)})]}),u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-label",children:"WA PD"}),u.jsx("div",{className:"metric-value",children:_e(C.weightedPd)})]}),u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-label",children:"WA LGD"}),u.jsx("div",{className:"metric-value",children:_e(C.weightedLgd)})]}),u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-label",children:"WA PDLGD"}),u.jsx("div",{className:"metric-value",children:_e(C.weightedRisk)})]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,flexWrap:"wrap"},children:[u.jsxs("div",{className:"muted",children:["Click column headers to sort. Filters support ",u.jsx("code",{children:">"}),", ",u.jsx("code",{children:"<"}),", and ranges (",u.jsx("code",{children:".."}),"); rates in %, outstanding in bn."]}),u.jsx("button",{type:"button",className:"button small",onClick:()=>m({...Fu}),disabled:!v,children:"Clear cohort filters"})]}),u.jsxs("table",{className:"data-table",children:[u.jsxs("thead",{children:[u.jsx("tr",{children:bn.map(w=>u.jsx("th",{className:"numeric",children:u.jsxs("button",{type:"button",className:"table-sort-button",onClick:()=>k(F=>F.key!==w.key?{key:w.key,direction:"asc"}:{key:w.key,direction:F.direction==="asc"?"desc":"asc"}),children:[w.label,y.key===w.key&&u.jsx("span",{className:"table-sort-indicator",children:y.direction==="asc"?"":""})]})},w.key))}),u.jsx("tr",{className:"table-filter-row",children:bn.map(w=>u.jsx("th",{className:"numeric",children:u.jsx("input",{className:"table-filter-input",value:h[w.key],onChange:F=>m(T=>({...T,[w.key]:F.target.value})),placeholder:w.placeholder,"aria-label":`Filter ${w.label}`})},w.key))})]}),u.jsx("tbody",{children:R.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:bn.length,children:u.jsx("span",{className:"muted",children:"No cohorts match the current filters."})})}):R.map(w=>u.jsx("tr",{children:bn.map(F=>u.jsx("td",{className:"numeric",children:F.cell(w)},F.key))},`${w.productType}-${w.cohortId}`))})]})]})]})]})},Ot=e=>`${(e/1e9).toFixed(2)}bn`,sg=({income:e})=>u.jsxs("div",{className:"card stack",children:[u.jsx("h3",{children:"Costs & P&L (Monthly)"}),u.jsx("table",{className:"data-table",children:u.jsxs("tbody",{children:[u.jsx(At,{label:"Interest Income",value:Ot(e.interestIncome)}),u.jsx(At,{label:"Interest Expense",value:Ot(e.interestExpense)}),u.jsx(At,{label:"Net Interest Income",value:Ot(e.netInterestIncome),bold:!0}),u.jsx(At,{label:"Fees",value:Ot(e.feeIncome)}),u.jsx(At,{label:"Credit Losses",value:Ot(e.creditLosses)}),u.jsx(At,{label:"Operating Expenses",value:Ot(e.operatingExpenses)}),u.jsx(At,{label:"Tax",value:Ot(e.tax)}),u.jsx(At,{label:"Net Income",value:Ot(e.netIncome),bold:!0})]})})]}),At=({label:e,value:t,bold:n})=>u.jsxs("tr",{children:[u.jsx("td",{children:e}),u.jsx("td",{className:"numeric",style:{fontWeight:n?700:500},children:t})]}),ag=e=>({items:e.items.map(t=>({...t,liquidityTag:{...t.liquidityTag},encumbrance:t.encumbrance?{...t.encumbrance}:{encumberedAmount:0}}))}),og=e=>({...e}),ug=e=>({...e}),cg=e=>({...e}),dg=e=>({...e}),fg=e=>({...e}),pg=e=>({...e,giltCurve:{...e.giltCurve,nelsonSiegel:{...e.giltCurve.nelsonSiegel},yields:{...e.giltCurve.yields}},macroModel:{...e.macroModel,factors:{...e.macroModel.factors}}}),mg=e=>{const t={};return Object.entries(e??{}).forEach(([r,l])=>{t[r]=(l??[]).map(i=>({...i}))}),t},hg=e=>e instanceof Date?new Date(e.getTime()):new Date(e),yi=e=>({...e,version:e.version??"v1",time:{...e.time,date:hg(e.time.date)},balanceSheet:ag(e.balanceSheet),capital:{...e.capital},incomeStatement:og(e.incomeStatement),cashFlowStatement:ug(e.cashFlowStatement),riskMetrics:cg(e.riskMetrics),compliance:dg(e.compliance),market:pg(e.market),behaviour:fg(e.behaviour),loanCohorts:mg(e.loanCohorts)});function sf(e){const t=[],n=e.balanceSheet.items.filter(o=>o.side===A.Asset).reduce((o,c)=>o+c.balance,0),r=e.balanceSheet.items.filter(o=>o.side===A.Liability).reduce((o,c)=>o+c.balance,0),l=e.capital.cet1+e.capital.at1,i=n-(r+l);return Math.abs(i)>1&&t.push(`Balance sheet not balanced by ${i}`),e.balanceSheet.items.filter(o=>o.balance<-1e-6).forEach(o=>{t.push(`Negative balance on ${o.productType}: ${o.balance}`)}),[{name:"CET1",value:e.riskMetrics.cet1Ratio},{name:"Leverage",value:e.riskMetrics.leverageRatio},{name:"LCR",value:e.riskMetrics.lcr},{name:"NSFR",value:e.riskMetrics.nsfr}].forEach(o=>{(Number.isNaN(o.value)||o.value===-1/0)&&t.push(`${o.name} ratio is invalid (${o.value})`)}),t}const xr={adjustRate:(e,t,n,r)=>{xg(ke(e.balanceSheet,n.productType),n.newRate),r.push({severity:"info",message:`Adjusted rate for ${n.productType} to ${n.newRate.toFixed(4)}`})},issueEquity:(e,t,n,r)=>{wg(e,n.amount,r)},issueDebt:(e,t,n,r)=>{Sg(e,t,n.productType,n.amount,n.rate,r)},buySellAsset:(e,t,n,r)=>{kg(e,t,n.productType,n.amountDelta,r)},enterRepo:(e,t,n,r)=>{Rg(e,t,n.direction,n.collateralProduct,n.amount,n.haircut,n.rate??e.market.baseRate,r)}},gg=(e,t,n,r)=>{switch(n.type){case"adjustRate":xr.adjustRate(e,t,n,r);break;case"issueEquity":xr.issueEquity(e,t,n,r);break;case"issueDebt":xr.issueDebt(e,t,n,r);break;case"buySellAsset":xr.buySellAsset(e,t,n,r);break;case"enterRepo":xr.enterRepo(e,t,n,r);break;default:r.push({severity:"warning",message:`No handler for action type ${n.type}`})}},wr={depositCompetition:(e,t)=>{t.state.market.competitorRetailDepositRate+=e.retailRateIncrease,e.corporateRateIncrease!==void 0&&(t.state.market.competitorCorporateDepositRate=(t.state.market.competitorCorporateDepositRate??t.state.market.competitorRetailDepositRate)+e.corporateRateIncrease),t.events.push({severity:"info",message:`Shock: deposit competition +${e.retailRateIncrease}`})},marketSpreadShock:(e,t)=>{const n=e.wholesaleSpreadBps/1e4;t.state.market.wholesaleFundingSpread+=n,t.state.market.seniorDebtSpread+=n,t.state.market.corporateLoanSpread+=e.loanSpreadBps/1e4,t.state.market.creditSpread+=n,t.state.market.giltRepoHaircut+=e.repoHaircutIncreasePct,t.events.push({severity:"warning",message:`Shock: market spread widen +${e.wholesaleSpreadBps}bps`})},idiosyncraticRun:(e,t)=>{t.lcrOutflowMultiplier.value*=e.outflowRateMultiplier;const n=ke(t.state.balanceSheet,b.RetailDeposits),r=ke(t.state.balanceSheet,b.CorporateDeposits),l=.1,i=Math.max(0,e.outflowRateMultiplier-1)*.1,s=Math.min(.5,l+i),a=n?n.balance*s:0,o=r?r.balance*s:0,c=a+o,f=af(t.state,c,t.events),p=c>0?c:1,d=n?f*a/p:0,g=Math.min(f,Math.max(0,d)),x=r?Math.max(0,f-g):0;n&&(n.balance-=g,t.events.push({severity:"warning",message:`Idiosyncratic run reduced retail deposits by ${g.toFixed(2)} (${(s*100).toFixed(1)}%)`}),g<a&&t.events.push({severity:"error",message:`Unmet retail withdrawal demand: ${(a-g).toFixed(2)}`})),r&&(r.balance-=x,t.events.push({severity:"warning",message:`Idiosyncratic run reduced corporate deposits by ${x.toFixed(2)} (${(s*100).toFixed(1)}%)`}),x<o&&t.events.push({severity:"error",message:`Unmet corporate withdrawal demand: ${(o-x).toFixed(2)}`})),t.events.push({severity:"warning",message:`Shock: idiosyncratic run multiplier ${e.outflowRateMultiplier}`})},macroDownturn:(e,t)=>{t.pdMultiplier.value*=e.pdMultiplier,t.lgdMultiplier.value*=e.lgdMultiplier,t.events.push({severity:"warning",message:`Shock: macro downturn PDx${e.pdMultiplier} LGDx${e.lgdMultiplier}`})},counterpartyDefault:(e,t)=>{Mg(e,t.extraLosses,t.events)}},vg=(e,t)=>{switch(e.type){case"depositCompetition":wr.depositCompetition(e,t);break;case"marketSpreadShock":wr.marketSpreadShock(e,t);break;case"idiosyncraticRun":wr.idiosyncraticRun(e,t);break;case"macroDownturn":wr.macroDownturn(e,t);break;case"counterpartyDefault":wr.counterpartyDefault(e,t);break;default:t.events.push({severity:"warning",message:`No handler for shock type ${e.type}`})}},yg=12,pa=(e,t,n)=>Math.min(Math.max(e,t),n),ke=(e,t)=>e.items.find(n=>n.productType===t),mo=(e,t,n)=>{const r=ke(e.balanceSheet,j.CashReserves);if(!r||(r.balance+=t,r.balance>=0))return;const l=-r.balance;r.balance=0,e.hasFailed=!0,n.push({severity:"error",message:`Cash balance breached: short by ${l.toFixed(2)} after flow`})},af=(e,t,n)=>{if(t<=0)return 0;const r=ke(e.balanceSheet,j.CashReserves);if(!r)return 0;const l=Math.max(0,Math.min(t,r.balance));r.balance-=l;const i=t-l;return i<=0||(e.hasFailed=!0,n.push({severity:"error",message:`Cash balance breached: short by ${i.toFixed(2)} after outflow`})),l},xg=(e,t)=>{e&&(e.interestRate=t)},wg=(e,t,n)=>{e.capital.cet1+=t;const r=ke(e.balanceSheet,j.CashReserves);r&&(r.balance+=t),n.push({severity:"info",message:`Issued equity: +${t.toFixed(2)} CET1 and cash`})},ma=(e,t,n,r)=>e+n===0?r:(e*t+n*r)/(e+n),Sg=(e,t,n,r,l,i)=>{const s=ke(e.balanceSheet,j.CashReserves);if(!s)return;const a=l??(n===b.WholesaleFundingST?e.market.riskFreeShort+e.market.wholesaleFundingSpread:e.market.riskFreeLong+e.market.seniorDebtSpread),o=n===b.WholesaleFundingST?"Wholesale Funding ST":"Wholesale Funding LT",c=ha(e,A.Liability,n,o,a,t);c.interestRate=ma(c.balance,c.interestRate,r,a),c.balance+=r,s.balance+=r,i.push({severity:"info",message:`Issued debt ${n}: +${r.toFixed(2)} balance at rate ${c.interestRate.toFixed(4)}`})},kg=(e,t,n,r,l)=>{var a,o;const i=ke(e.balanceSheet,n),s=ke(e.balanceSheet,j.CashReserves);if(!(!i||!s)){if((o=(a=Ze[n])==null?void 0:a.behaviour)!=null&&o.isLoan){const c=t.productParameters[n];if(r>=0){const f=r,p=Zd({state:e,config:t,productType:n,cohortId:e.time.step,principal:f,annualInterestRate:i.interestRate,annualPd:c.baseDefaultRate,lgd:c.lossGivenDefault});p+1e-6<f&&l.push({severity:"warning",message:`Insufficient cash to buy ${n}: requested ${f.toFixed(2)}, executed ${p.toFixed(2)}`}),l.push({severity:"info",message:`Bought ${n}: +${p.toFixed(2)}, cash -${p.toFixed(2)}`})}else{const f=Math.abs(r),p=Jd({state:e,productType:n,amount:f});l.push({severity:"info",message:`Sold ${n}: -${p.toFixed(2)}, cash +${p.toFixed(2)}`})}return}if(r>=0){const c=Math.min(r,Math.max(0,s.balance));i.balance+=c,s.balance-=c,c<r&&l.push({severity:"warning",message:`Insufficient cash to buy ${n}: requested ${r.toFixed(2)}, executed ${c.toFixed(2)}`}),l.push({severity:"info",message:`Bought ${n}: +${c.toFixed(2)}, cash -${c.toFixed(2)}`})}else{const c=Math.min(i.balance,Math.abs(r));i.balance-=c,mo(e,c,l),l.push({severity:"info",message:`Sold ${n}: -${c.toFixed(2)}, cash +${c.toFixed(2)}`})}}},ha=(e,t,n,r,l,i)=>{const s=ke(e.balanceSheet,n);if(s)return s;const a={side:t,productType:n,label:r,currency:co.GBP,balance:0,interestRate:l,maturityBucket:Ye.LessThan1Y,liquidityTag:i.liquidityTags[n],encumbrance:{encumberedAmount:0}};return e.balanceSheet.items.push(a),a},Rg=(e,t,n,r,l,i,s,a)=>{var c;const o=ke(e.balanceSheet,j.CashReserves);if(o)if(n==="borrow"){const f=ke(e.balanceSheet,r),d=1+Math.max(0,i??0),g=f?Math.max(0,f.balance-(((c=f.encumbrance)==null?void 0:c.encumberedAmount)??0)):0,x=d>0?g/d:0,y=Math.min(l,x);if(y<=0){a.push({severity:"warning",message:`Repo borrow failed: insufficient unencumbered ${r}`});return}const k=ha(e,A.Liability,b.RepurchaseAgreements,"Repo Borrowing",s,t);if(k.interestRate=ma(k.balance,k.interestRate,y,s),k.balance+=y,o.balance+=y,f){const v=Math.min(f.balance,y*d);f.encumbrance||(f.encumbrance={encumberedAmount:0}),f.encumbrance.encumberedAmount=pa((f.encumbrance.encumberedAmount??0)+v,0,f.balance)}const m=y+1e-9<l?`+${y.toFixed(2)} funding (requested ${l.toFixed(2)})`:`+${y.toFixed(2)} funding`;a.push({severity:"info",message:`Repo borrow: ${m}, collateral ${r} encumbered`})}else{const f=ha(e,A.Asset,j.ReverseRepo,"Reverse Repo",s,t),p=Math.min(o.balance,l);f.interestRate=ma(f.balance,f.interestRate,p,s),f.balance+=p,o.balance-=p,a.push({severity:"info",message:`Repo lend: -${p.toFixed(2)} cash, +reverse repo asset`})}},Mg=(e,t,n)=>{const r=t[e.productType]??0,l=Math.max(0,e.lossAmount);t[e.productType]=r+l,n.push({severity:"warning",message:`Counterparty default on ${e.productType}: loss ${l.toFixed(2)}`})},Cg=(e,t,n,r)=>{const l={},i={value:1},s={value:1},a={value:1},o={state:e,config:t,events:r,pdMultiplier:i,lgdMultiplier:s,lcrOutflowMultiplier:a,extraLosses:l};return n.forEach(c=>vg(c,o)),{pdMultiplier:i.value,lgdMultiplier:s.value,lcrOutflowMultiplier:a.value,extraLosses:l}},Ng=(e,t,n,r)=>{n.forEach(l=>gg(e,t,l,r))},jg=(e,t,n,r)=>{e.balanceSheet.items.filter(s=>{var a,o,c,f;return((o=(a=Ze[s.productType])==null?void 0:a.behaviour)==null?void 0:o.affectsBehaviouralDepositFlow)&&((f=(c=Ze[s.productType])==null?void 0:c.behaviour)==null?void 0:f.isCustomerDeposit)}).forEach(s=>{const a=Ze[s.productType],o=a.behaviour.depositSegment==="corporate"?e.market.competitorCorporateDepositRate??e.market.competitorRetailDepositRate:e.market.competitorRetailDepositRate,c=s.interestRate-o;let p=.002+t.productParameters[s.productType].volumeElasticityToRate*c;p=pa(p,-.1,t.global.maxDepositGrowthPerStep);const d=Math.max(0,1+p*n),g=s.balance,x=g*d,y=x-g;if(y>=0)s.balance=x,mo(e,y,r);else{const k=-y,h=af(e,k,r);s.balance=g-h,h<k&&r.push({severity:"error",message:`Unmet deposit withdrawal demand for ${a.label}: ${(k-h).toFixed(2)}`})}r.push({severity:"info",message:`Behaviour: ${a.label} growth ${(d-1).toFixed(4)} this step`})}),e.balanceSheet.items.filter(s=>{var a,o,c,f;return((o=(a=Ze[s.productType])==null?void 0:a.behaviour)==null?void 0:o.affectsBehaviouralLoanFlow)&&((f=(c=Ze[s.productType])==null?void 0:c.behaviour)==null?void 0:f.isLoan)}).forEach(s=>{const a=Ze[s.productType],o=a.behaviour.loanBenchmark==="mortgage"?e.market.competitorMortgageRate:e.market.riskFreeLong+e.market.corporateLoanSpread,c=s.interestRate-o;let p=0+t.productParameters[s.productType].volumeElasticityToRate*c;p=pa(p,-.02,t.global.maxLoanGrowthPerStep);const d=Math.max(0,1+p*n),g=s.balance;let y=g*d-g;const k=t.productParameters[s.productType];if(y>0){const h=ke(e.balanceSheet,j.CashReserves),m=Math.max(0,(h==null?void 0:h.balance)??0),v=Math.min(y,m),S=Zd({state:e,config:t,productType:s.productType,cohortId:e.time.step,principal:v,annualInterestRate:s.interestRate,annualPd:k.baseDefaultRate,lgd:k.lossGivenDefault});S+1e-6<v&&r.push({severity:"warning",message:`Insufficient cash to originate ${a.label}: requested ${v.toFixed(2)}, executed ${S.toFixed(2)}`})}else y<0&&Jd({state:e,productType:s.productType,amount:Math.abs(y)});r.push({severity:"info",message:`Behaviour: ${a.label} growth ${(d-1).toFixed(4)} this step`})})},Eg=(e,t)=>{const n=e.balanceSheet.items.filter(s=>s.side===A.Asset),r=e.balanceSheet.items.filter(s=>s.side===A.Liability),l=n.filter(s=>{var a,o;return!((o=(a=Ze[s.productType])==null?void 0:a.behaviour)!=null&&o.isLoan)}).reduce((s,a)=>s+a.balance*a.interestRate*t,0),i=r.reduce((s,a)=>s+a.balance*a.interestRate*t,0);return{assets:n,liabilities:r,interestIncome:l,interestExpense:i}},bg=(e,t,n,r)=>{const l=e.balanceSheet.items.filter(o=>{var c,f;return(f=(c=Ze[o.productType])==null?void 0:c.behaviour)==null?void 0:f.isLoan}),i={},s={...r};let a=Object.values(s).reduce((o,c)=>o+(c??0),0);return Object.entries(n.extraLosses).forEach(([o,c])=>{var g;const f=Ze[o];if((g=f==null?void 0:f.behaviour)!=null&&g.isLoan)return;const p=ke(e.balanceSheet,o),d=p?Math.min(p.balance,c):0;d>0&&(i[o]=d),a+=d}),Object.entries(n.extraLosses).forEach(([o])=>{var p;const c=Ze[o];if((p=c==null?void 0:c.behaviour)!=null&&p.isLoan)return;const f=ke(e.balanceSheet,o);if(f){const d=i[o]??0;f.balance=Math.max(0,f.balance-d)}}),{loanItems:l,recognizedLoanLosses:s,recognizedNonLoanLosses:i,creditLosses:a}},Tg=(e,t,n,r,l,i,s,a)=>{const c=i.loanItems.reduce((S,N)=>S+N.balance,0),f=l.assets.reduce((S,N)=>S+N.balance,0),p=.001*n*c,d=t.global.operatingCostRatio*f*r+(t.global.fixedOperatingCostPerMonth??0)*n,g=l.interestIncome+s,x=g-l.interestExpense,y=x+p-i.creditLosses-d,k=y>0?y*t.global.taxRate:0,h=y-k;e.incomeStatement={interestIncome:g,interestExpense:l.interestExpense,netInterestIncome:x,feeIncome:p,creditLosses:i.creditLosses,operatingExpenses:d,preTaxProfit:y,tax:k,netIncome:h},e.capital.cet1+=h;const m=g-l.interestExpense+p-d-k,v=m-s;return mo(e,v,a),{feeIncome:p,operatingExpenses:d,tax:k,netIncome:h,operatingCashDelta:m,operatingCashDeltaApplied:v,loanInterestIncome:s}},Fg=(e,t,n,r)=>{const l=Ii({state:e,config:t,lcrOutflowMultiplier:n});e.riskMetrics=l,e.compliance=_i(l,t.riskLimits),e.hasFailed=e.hasFailed||e.compliance.cet1Breached||e.compliance.leverageBreached||e.compliance.lcrBreached||e.compliance.nsfrBreached,e.hasFailed&&r.push({severity:"error",message:"Regulatory breach: your bank has failed!"})},Lg=(e,t,n,r,l)=>{var T;t.time={step:t.time.step+1,stepLengthMonths:t.time.stepLengthMonths,date:new Date(t.time.date.getTime()+t.time.stepLengthMonths*30*24*60*60*1e3)};const i=((T=ke(t.balanceSheet,j.CashReserves))==null?void 0:T.balance)??0,s=i-n,a={},o={};e.balanceSheet.items.forEach(I=>{a[I.productType]=I.balance,o[I.productType]=I.side});const c={},f={};t.balanceSheet.items.forEach(I=>{c[I.productType]=I.balance,f[I.productType]=I.side});const p=new Set([...Object.keys(a),...Object.keys(c)]),d={};Object.entries(l.recognizedLoanLosses).forEach(([I,Y])=>{const V=I;d[V]=(d[V]??0)+(Y??0)}),Object.entries(l.recognizedNonLoanLosses).forEach(([I,Y])=>{const V=I;d[V]=(d[V]??0)+(Y??0)});const g=new Set([b.RetailDeposits,b.CorporateDeposits,b.WholesaleFundingST,b.RepurchaseAgreements]),x=new Set([j.Gilts]);let y=0,k=0,h=0;p.forEach(I=>{const Y=f[I]??o[I];if(!Y)return;const V=c[I]??0,H=a[I]??0;if(Y===A.Asset){if(I===j.CashReserves)return;const ce=V-H,je=d[I]??0,M=-(ce+je);x.has(I)?k+=M:y+=M}else{const je=V-H;g.has(I)?y+=je:h+=je}});const m=k,S=t.capital.cet1+t.capital.at1-(e.capital.cet1+e.capital.at1)-r.netIncome,N=h+S;let R=r.operatingCashDelta+y,C=R+m+N-s;Math.abs(C)<=.01&&(R-=C,C=0);const F={cashStart:n,cashEnd:i,netChange:s,operatingCashFlow:R,investingCashFlow:m,financingCashFlow:N};return t.cashFlowStatement=F,{cashFlowStatement:F,cfMismatch:C}},Pg=(e,t,n)=>{sf(e).forEach(l=>{t.push({severity:"error",message:`Invariant violated: ${l}`}),e.hasFailed=!0}),Math.abs(n.cfMismatch)>1&&(t.push({severity:"error",message:`Cash flow statement mismatch: operating ${n.cashFlowStatement.operatingCashFlow.toFixed(2)} + investing ${n.cashFlowStatement.investingCashFlow.toFixed(2)} + financing ${n.cashFlowStatement.financingCashFlow.toFixed(2)} != net change ${n.cashFlowStatement.netChange.toFixed(2)} (diff ${n.cfMismatch.toFixed(6)})`}),e.hasFailed=!0)},of=()=>({step:t=>{var h;const{state:n,config:r,actions:l,shocks:i}=t,s=yi(n),a=[],o=s.time.stepLengthMonths,c=o/yg,f=((h=ke(n.balanceSheet,j.CashReserves))==null?void 0:h.balance)??0;Oi(s);const p=Cg(s,r,i,a);Ng(s,r,l,a),jg(s,r,o,a);const d=hh({state:s,config:r,dtMonths:o,pdMultiplier:p.pdMultiplier,lgdMultiplier:p.lgdMultiplier,extraLossesByProduct:p.extraLosses}),g=Eg(s,c),x=bg(s,r,p,d.recognizedLoanLosses),y=Tg(s,r,o,c,g,x,d.loanInterestIncome,a);Fg(s,r,p.lcrOutflowMultiplier,a);const k=Lg(n,s,f,y,x);return Pg(s,a,k),ch(s.market,o),{nextState:s,events:a}}}),uf=(e={})=>({engine:e.engine??of(),config:e.config??dt,createState:e.createState??(()=>yi(gi))}),O=e=>`${(e/1e9).toFixed(2)}bn`,fe=e=>`${(e*100).toFixed(2)}%`,Bl=(e,t)=>{const n=e.balanceSheet.items.find(r=>r.productType===t);if(!n)throw new Error(`Missing balance sheet line for ${t}`);return n},Ee=(e,t)=>Bl(e,t).balance,be=(e,t,n=[],r=[])=>e.engine.step({state:t,config:e.config,actions:n,shocks:r}).nextState,ye=(e,t)=>{const n=sf(e);if(n.length>0)throw new Error(`Invariant violations (${t}): ${n.join("; ")}`);const r=.001,l=e.cashFlowStatement,i=l.cashStart+l.netChange-l.cashEnd;if(Math.abs(i)>r)throw new Error(`Cash rollforward mismatch (${t}): start ${l.cashStart.toFixed(2)} + net change ${l.netChange.toFixed(2)} != end ${l.cashEnd.toFixed(2)} (diff ${i.toFixed(6)})`);const s=l.operatingCashFlow+l.investingCashFlow+l.financingCashFlow-l.netChange;if(Math.abs(s)>r)throw new Error(`Cash flow statement mismatch (${t}): operating ${l.operatingCashFlow.toFixed(2)} + investing ${l.investingCashFlow.toFixed(2)} + financing ${l.financingCashFlow.toFixed(2)} != net change ${l.netChange.toFixed(2)} (diff ${s.toFixed(6)})`)},xi=[{id:"retail-rate-advantage",group:"Simulation engine",name:"increasing retail deposit rate above competitor increases retail balances vs equal rate",run:e=>{const t=e.createState();Bl(t,b.RetailDeposits).interestRate=t.market.competitorRetailDepositRate;const n=be(e,t);ye(n,"baseline");const r=e.createState(),l=be(e,r,[{type:"adjustRate",productType:b.RetailDeposits,newRate:r.market.competitorRetailDepositRate+.01}]);ye(l,"advantaged");const i=Ee(n,b.RetailDeposits),s=Ee(l,b.RetailDeposits);if(s<=i)throw new Error(`Retail balances did not improve with higher rate (${O(s)} <= ${O(i)})`);return`Retail deposits baseline ${O(i)} vs advantaged ${O(s)}`}},{id:"sell-gilts-lower-lcr",group:"Simulation engine",name:"selling gilts increases cash but leaves HQLA/LCR roughly unchanged (cash is also HQLA)",run:e=>{const t=be(e,e.createState());ye(t,"baseline");const n=be(e,e.createState(),[{type:"buySellAsset",productType:j.Gilts,amountDelta:-1e10}]);ye(n,"after sale");const r=Ee(t,j.CashReserves),l=Ee(n,j.CashReserves);if(l<=r)throw new Error(`Cash did not rise after selling gilts (${O(l)} <= ${O(r)})`);const i=Math.abs(n.riskMetrics.hqla-t.riskMetrics.hqla),s=Math.abs(n.riskMetrics.lcr-t.riskMetrics.lcr),a=Math.max(t.riskMetrics.hqla*.001,1e6),o=1e-4;if(i>a)throw new Error(`HQLA changed after selling gilts (${O(n.riskMetrics.hqla)} vs ${O(t.riskMetrics.hqla)})`);if(s>o)throw new Error(`LCR moved after selling gilts (${fe(n.riskMetrics.lcr)} vs ${fe(t.riskMetrics.lcr)})`);return`Cash ${O(r)} -> ${O(l)}, HQLA unchanged ${O(t.riskMetrics.hqla)}, LCR ${fe(t.riskMetrics.lcr)}`}},{id:"macro-downturn-capital-hit",group:"Simulation engine",name:"macro downturn shock with high PD/LGD multipliers reduces CET1 and CET1 ratio",run:e=>{const t=be(e,e.createState());ye(t,"baseline");const n=be(e,e.createState(),[],[{type:"macroDownturn",pdMultiplier:3,lgdMultiplier:2}]);if(ye(n,"stressed"),n.capital.cet1>=t.capital.cet1)throw new Error(`CET1 did not fall under downturn (${O(n.capital.cet1)} >= ${O(t.capital.cet1)})`);if(n.riskMetrics.cet1Ratio>=t.riskMetrics.cet1Ratio)throw new Error(`CET1 ratio did not fall (${fe(n.riskMetrics.cet1Ratio)} >= ${fe(t.riskMetrics.cet1Ratio)})`);return`CET1 ${O(t.capital.cet1)} -> ${O(n.capital.cet1)}, ratio ${fe(t.riskMetrics.cet1Ratio)} -> ${fe(n.riskMetrics.cet1Ratio)}`}},{id:"random-rate-tweaks-balanced",group:"Targeted invariants and behaviours",name:"balance sheet stays balanced after 30 random rate tweaks",run:e=>{let t=e.createState();const n=[];let r=42;const l=()=>(r=r*48271%2147483647,r/2147483647),i=.001,s=30;for(let a=0;a<s;a++){n.length=0,n.push({type:"adjustRate",productType:b.RetailDeposits,newRate:t.market.competitorRetailDepositRate+(l()-.5)*i}),n.push({type:"adjustRate",productType:j.Mortgages,newRate:Bl(t,j.Mortgages).interestRate+(l()-.5)*i});const o=be(e,t,n);ye(o,`step ${a+1}`),t=o}return`${s} random rate iterations kept invariants satisfied`}},{id:"wholesale-funding-lowers-liquidity",group:"Targeted invariants and behaviours",name:"raising ST wholesale funding and buying mortgages reduces LCR and NSFR",run:e=>{const t=be(e,e.createState());ye(t,"baseline");const n=be(e,e.createState(),[{type:"issueDebt",productType:b.WholesaleFundingST,amount:2e10,rate:.055},{type:"buySellAsset",productType:j.Mortgages,amountDelta:2e10}]);if(ye(n,"stressed"),n.riskMetrics.lcr>=t.riskMetrics.lcr||n.riskMetrics.nsfr>=t.riskMetrics.nsfr)throw new Error(`Liquidity ratios not lower (LCR ${fe(n.riskMetrics.lcr)} vs ${fe(t.riskMetrics.lcr)}, NSFR ${fe(n.riskMetrics.nsfr)} vs ${fe(t.riskMetrics.nsfr)})`);return`LCR ${fe(t.riskMetrics.lcr)} -> ${fe(n.riskMetrics.lcr)}, NSFR ${fe(t.riskMetrics.nsfr)} -> ${fe(n.riskMetrics.nsfr)}`}},{id:"mortgage-rate-elasticity",group:"Targeted invariants and behaviours",name:"raising mortgage rate 100bps above reference reduces mortgage volume vs baseline",run:e=>{const t=e.createState(),n=be(e,t,[{type:"adjustRate",productType:j.Mortgages,newRate:t.market.competitorMortgageRate}]);ye(n,"baseline");const r=e.createState(),l=be(e,r,[{type:"adjustRate",productType:j.Mortgages,newRate:r.market.competitorMortgageRate+.01}]);ye(l,"adjusted");const i=Ee(n,j.Mortgages),s=Ee(l,j.Mortgages);if(s>=i)throw new Error(`Mortgage volume did not fall (${O(s)} >= ${O(i)})`);return`Mortgage balance ${O(i)} -> ${O(s)}`}},{id:"idiosyncratic-run-lcr",group:"Targeted invariants and behaviours",name:"idiosyncratic run reduces deposits and worsens LCR",run:e=>{const t=be(e,e.createState());ye(t,"baseline");const n=be(e,e.createState(),[],[{type:"idiosyncraticRun",outflowRateMultiplier:1.5}]);ye(n,"run");const r=Ee(t,b.RetailDeposits),l=Ee(n,b.RetailDeposits),i=Ee(t,b.CorporateDeposits),s=Ee(n,b.CorporateDeposits);if(l>=r||s>=i)throw new Error(`Deposits did not fall in run (retail ${O(l)} vs ${O(r)}, corporate ${O(s)} vs ${O(i)})`);if(n.riskMetrics.lcr>=t.riskMetrics.lcr)throw new Error(`LCR did not worsen (${fe(n.riskMetrics.lcr)} >= ${fe(t.riskMetrics.lcr)})`);return`Retail ${O(r)} -> ${O(l)}, Corporate ${O(i)} -> ${O(s)}, LCR ${fe(t.riskMetrics.lcr)} -> ${fe(n.riskMetrics.lcr)}`}},{id:"repo-borrow-encumbrance",group:"Targeted invariants and behaviours",name:"repo borrow creates repo line, increases cash, and encumbers collateral",run:e=>{const t=e.createState(),n=5e9,r=t.balanceSheet.items.find(c=>c.productType===j.Gilts);if(!r)throw new Error("Missing gilts line for repo test");const{nextState:l}=e.engine.step({state:t,config:e.config,actions:[{type:"enterRepo",direction:"borrow",collateralProduct:j.Gilts,amount:n,rate:.03}],shocks:[]});ye(l,"after repo");const i=Ee(t,j.CashReserves),s=Ee(l,j.CashReserves),a=l.balanceSheet.items.find(c=>c.productType===b.RepurchaseAgreements),o=l.balanceSheet.items.find(c=>c.productType===j.Gilts);if(!a)throw new Error("Repo liability line missing after trade");if(!o)throw new Error("Gilts line missing after repo");if(s<=i)throw new Error(`Cash did not increase (${O(s)} <= ${O(i)})`);if(a.balance<n)throw new Error(`Repo line smaller than expected (${O(a.balance)} < ${O(n)})`);if(o.encumbrance.encumberedAmount<=r.encumbrance.encumberedAmount)throw new Error("Collateral encumbrance did not rise after repo");return`Cash ${O(i)} -> ${O(s)}, encumbrance ${O(r.encumbrance.encumberedAmount)} -> ${O(o.encumbrance.encumberedAmount)}`}},{id:"counterparty-default-loss",group:"Targeted invariants and behaviours",name:"counterparty default reduces corporate loans roughly by the loss once (no double count)",run:e=>{const t=e.createState(),n=1e10,r={type:"counterpartyDefault",productType:j.CorporateLoans,lossAmount:n},l=be(e,yi(t));ye(l,"baseline");const i=be(e,yi(t),[],[r]);ye(i,"after default");const s=Ee(l,j.CorporateLoans),a=Ee(i,j.CorporateLoans),o=s-a;if(o<=n*.8||o>=n*1.2)throw new Error(`Loss recognition out of bounds (${O(o)} vs expected ~${O(n)})`);return`Corporate loans incremental reduction ${O(o)} (expected ~${O(n)})`}},{id:"baseline-deposit-growth",group:"Targeted invariants and behaviours",name:"baseline deposit growth is positive when matching competitor rates",run:e=>{const t=e.createState(),n=Bl(t,b.RetailDeposits);n.interestRate=t.market.competitorRetailDepositRate;const{nextState:r}=e.engine.step({state:t,config:e.config,actions:[],shocks:[]});ye(r,"after step");const l=Ee(r,b.RetailDeposits);if(l<=n.balance)throw new Error(`Deposit growth was not positive (${O(l)} <= ${O(n.balance)})`);return`Retail deposits ${O(n.balance)} -> ${O(l)}`}}],$g=(e={})=>{const t=e.filter??(()=>!0);return xi.filter(t).map(n=>{const r=uf(e);try{const l=n.run(r);return{...n,passed:!0,detail:l}}catch(l){return{...n,passed:!1,detail:(l==null?void 0:l.message)??String(l)}}})};if(import.meta.vitest){const{describe:e,expect:t,it:n}=import.meta.vitest;e("Simulation test suite metadata",()=>{n("simulation test ids are unique",()=>{const l=new Set,i=new Set;xi.forEach(s=>{l.has(s.id)&&i.add(s.id),l.add(s.id)}),t([...i]).toEqual([])})});const r=xi.reduce((l,i)=>(l[i.group]||(l[i.group]=[]),l[i.group].push(i),l),{});Object.entries(r).forEach(([l,i])=>{e(l,()=>{i.forEach(s=>{n(`${s.id}: ${s.name}`,()=>{const a=uf(),o=s.run(a);t(o).toBeTypeOf("string"),t(o.length).toBeGreaterThan(0)})})})})}const ht=e=>`${(e/1e9).toFixed(2)}bn`,Dg=({state:e})=>{const t=D.useMemo(()=>{const a=[],o=e.balanceSheet.items.filter(k=>k.side==="Asset").reduce((k,h)=>k+h.balance,0),c=e.balanceSheet.items.filter(k=>k.side==="Liability").reduce((k,h)=>k+h.balance,0),f=e.capital.cet1+e.capital.at1,p=o-(c+f);a.push({name:"Balance sheet balances",passed:Math.abs(p)<1,detail:`Assets ${ht(o)} vs Liabilities+Equity ${ht(c+f)} (gap ${p.toFixed(2)})`});const d=e.cashFlowStatement,g=Math.abs(d.cashStart+d.netChange-d.cashEnd)<1;a.push({name:"Cash rollforward",passed:g,detail:`Start ${ht(d.cashStart)} + net change ${ht(d.netChange)} = end ${ht(d.cashEnd)}`});const x=d.operatingCashFlow+d.investingCashFlow+d.financingCashFlow,y=Math.abs(x-d.netChange)<1;return a.push({name:"Cash flow components sum",passed:y,detail:`Op ${ht(d.operatingCashFlow)} + Inv ${ht(d.investingCashFlow)} + Fin ${ht(d.financingCashFlow)} = ${ht(x)} vs net change ${ht(d.netChange)}`}),a},[e]),n=D.useMemo(()=>$g(),[]),r=D.useMemo(()=>{const a=new Set,o=new Set;return xi.forEach(c=>{a.has(c.id)&&o.add(c.id),a.add(c.id)}),[{id:"simulation-test-ids-unique",group:"Simulation test suite metadata",name:"simulation test ids are unique",passed:o.size===0,detail:o.size===0?"No duplicate ids":`Duplicate ids: ${[...o].join(", ")}`}]},[]),l=D.useMemo(()=>[...r,...n],[r,n]),i=l.filter(a=>a.passed).length,s=D.useMemo(()=>{const a=new Map;return l.forEach(o=>{const c=a.get(o.group);if(c){c.push(o);return}a.set(o.group,[o])}),a},[l]);return u.jsxs("div",{className:"card stack",children:[u.jsx("h3",{children:"Reconciliations"}),u.jsxs("div",{className:"stack",children:[u.jsx(Pu,{title:"Current state checks",rows:t}),u.jsx("div",{style:{fontWeight:700},children:`Simulation tests (${i}/${l.length} passing)`}),[...s.entries()].map(([a,o])=>{const c=o.filter(f=>f.passed).length;return u.jsx(Pu,{title:`${a} (${c}/${o.length} passing)`,rows:o},a)})]})]})},Pu=({title:e,rows:t})=>u.jsxs("div",{className:"stack",children:[u.jsx("div",{style:{fontWeight:700},children:e}),u.jsx("div",{className:"stack",children:t.map(n=>{const r="id"in n?n.id:n.name,l="id"in n?`${n.id}: ${n.name}`:n.name;return u.jsxs("div",{className:"recon-item",children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[u.jsx("div",{style:{fontWeight:600},children:l}),u.jsx("span",{className:`status-badge ${n.passed?"pass":"fail"}`,children:n.passed?"PASS":"FAIL"})]}),u.jsx("div",{className:"muted",style:{marginTop:4},children:n.detail})]},r)})})]});class Ig{constructor(t){this.engine=of(),this.config=t}setConfig(t){this.config=t}step(t,n,r){return this.engine.step({state:t,config:this.config,actions:n,shocks:r})}}const $u=e=>`${(e/1e9).toFixed(2)}bn`,_g=e=>e===void 0?"":`${(e*100).toFixed(2)}%`,Du=e=>{if(e===null||!Number.isFinite(e))return"";const t=Math.abs(e)>=100?e.toFixed(0):e.toFixed(1);return`${e>0?"+":""}${t}%`},Og=(e,t,n=4)=>{let r=e,l=t;if(r===l){const x=Math.max(Math.abs(r)*.25,1);r-=x,l+=x}const s=(l-r)/Math.max(n,1);if(!Number.isFinite(s)||s===0)return[r,l];const a=10**Math.floor(Math.log10(Math.abs(s))),o=s/a;let c=1;o>5?c=10:o>2?c=5:o>1&&(c=2);const f=c*a,p=Math.floor(r/f)*f,d=Math.ceil(l/f)*f,g=[];for(let x=p;x<=d+f/2;x+=f){const y=Number(x.toFixed(10));g.includes(y)||g.push(y)}return g.length<2&&g.push(Number((p+f).toFixed(10))),g},Ag=(e,t)=>{if(((t==null?void 0:t.toLowerCase())??"").includes("%")){const l=e*100;return`${l.toFixed(Math.abs(l)>=10?0:1)}%`}const r=Math.abs(e);return r>=1e9?`${(e/1e9).toFixed(r>=1e10?0:1)}bn`:r>=1e6?`${(e/1e6).toFixed(r>=1e8?0:1)}m`:r>=1e3?`${(e/1e3).toFixed(r>=1e4?0:1)}k`:r>=1?e.toFixed(r>=10?0:1):e.toFixed(2)},Ct=e=>{if(e.length<2)return null;const t=e[e.length-1],n=[...e].reverse().find(r=>r.step<t.step);return!n||!Number.isFinite(n.value)||n.value===0?null:(t.value-n.value)/Math.abs(n.value)*100},zg=(e,t)=>{var n;return((n=e.balanceSheet.items.find(r=>r.productType===t))==null?void 0:n.balance)??0},Nt=(e,t)=>e.map(n=>({step:n.time.step,value:t(n)})),Hn=(e,t)=>e.balanceSheet.items.filter(n=>n.side===t).reduce((n,r)=>n+r.balance,0),cf=(e,t)=>{const n=Nt(t,r=>zg(r,e.productType));return{id:e.productType,label:e.label,value:e.balance,changePct:Ct(n),series:n,rate:e.interestRate}},Bg=(e,t)=>{const r=e.balanceSheet.items.filter(i=>i.side===A.Asset).map(i=>cf(i,t)),l=Nt(t,i=>Hn(i,A.Asset));return r.push({id:"total-assets",label:"Total assets",value:Hn(e,A.Asset),changePct:Ct(l),series:l}),r},Wg=(e,t)=>{const r=e.balanceSheet.items.filter(c=>c.side===A.Liability).map(c=>cf(c,t)),l=Nt(t,c=>c.capital.cet1),i=Nt(t,c=>c.capital.at1),s=Nt(t,c=>c.capital.cet1+c.capital.at1),a=Nt(t,c=>Hn(c,A.Liability)),o=Nt(t,c=>Hn(c,A.Liability)+c.capital.cet1+c.capital.at1);return r.push({id:"capital-cet1",label:"CET1 capital",value:e.capital.cet1,changePct:Ct(l),series:l},{id:"capital-at1",label:"AT1 capital",value:e.capital.at1,changePct:Ct(i),series:i},{id:"capital-total",label:"Total equity",value:e.capital.cet1+e.capital.at1,changePct:Ct(s),series:s},{id:"total-liabilities",label:"Total liabilities",value:Hn(e,A.Liability),changePct:Ct(a),series:a},{id:"liabilities-equity",label:"Liabilities + equity",value:Hn(e,A.Liability)+e.capital.cet1+e.capital.at1,changePct:Ct(o),series:o}),r},Ug=(e,t)=>[{id:"interestIncome",label:"Interest income",selector:r=>r.incomeStatement.interestIncome},{id:"interestExpense",label:"Interest expense",selector:r=>r.incomeStatement.interestExpense},{id:"netInterestIncome",label:"Net interest income",selector:r=>r.incomeStatement.netInterestIncome},{id:"feeIncome",label:"Fee income",selector:r=>r.incomeStatement.feeIncome},{id:"creditLosses",label:"Credit losses",selector:r=>r.incomeStatement.creditLosses},{id:"operatingExpenses",label:"Operating expenses",selector:r=>r.incomeStatement.operatingExpenses},{id:"preTaxProfit",label:"Pre-tax profit",selector:r=>r.incomeStatement.preTaxProfit},{id:"tax",label:"Tax",selector:r=>r.incomeStatement.tax},{id:"netIncome",label:"Net income",selector:r=>r.incomeStatement.netIncome}].map(r=>{const l=Nt(t,r.selector);return{id:r.id,label:r.label,value:r.selector(e),changePct:Ct(l),series:l}}),Hg=(e,t)=>[{id:"cashStart",label:"Cash at start",selector:r=>r.cashFlowStatement.cashStart},{id:"operatingCashFlow",label:"Operating cash flow",selector:r=>r.cashFlowStatement.operatingCashFlow},{id:"investingCashFlow",label:"Investing cash flow",selector:r=>r.cashFlowStatement.investingCashFlow},{id:"financingCashFlow",label:"Financing cash flow",selector:r=>r.cashFlowStatement.financingCashFlow},{id:"netChange",label:"Net change in cash",selector:r=>r.cashFlowStatement.netChange},{id:"cashEnd",label:"Cash at end",selector:r=>r.cashFlowStatement.cashEnd}].map(r=>{const l=Nt(t,r.selector);return{id:r.id,label:r.label,value:r.selector(e),changePct:Ct(l),series:l}}),Gg=({data:e,xLabel:t="Simulation step",yLabel:n="Amount",xTickInterval:r=12})=>{if(!e.length)return u.jsx("div",{className:"series-chart empty",children:u.jsx("div",{className:"muted",children:"No history yet  run the simulation to build a trend."})});const l=e.map(R=>R.value),i=Math.max(...l),s=Math.min(...l),a=Og(s,i,5),o=a.length?Math.min(s,...a):s,c=a.length?Math.max(i,...a):i,f=c-o,p=f===0?Math.max(Math.abs(c),1):f,d=o<0&&c>0,g=100-(0-o)/p*100,x=e.map(R=>R.step),y=Math.min(...x),k=Math.max(...x),h=Math.max(1,k-y),m=e.map(R=>{const C=(R.step-y)/h*100,w=100-(R.value-o)/p*100;return`${C.toFixed(2)},${w.toFixed(2)}`}),v=`${m.join(" ")} 100,100 0,100`,S=[],N=Math.max(1,r);S.push(y);for(let R=Math.ceil(y/N)*N;R<k;R+=N)R>y&&R<k&&S.push(R);return k!==y&&S.push(k),u.jsx("div",{className:"series-chart",children:u.jsxs("div",{className:"series-plot",children:[u.jsx("div",{className:"axis-label y-axis-label",children:n}),u.jsx("div",{className:"axis-ticks y-axis-ticks",children:a.map(R=>{const C=(R-o)/p*100;return u.jsx("span",{style:{bottom:`${C}%`},children:Ag(R,n)},R)})}),u.jsxs("div",{className:"plot-body",children:[u.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",role:"img","aria-label":"Time series",children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"series-fill",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"var(--accent)",stopOpacity:"0.2"}),u.jsx("stop",{offset:"100%",stopColor:"var(--accent)",stopOpacity:"0"})]})}),d&&u.jsx("line",{x1:"0",y1:g,x2:"100",y2:g,className:"series-zero"}),u.jsx("polygon",{className:"series-area",points:v,fill:"url(#series-fill)"}),u.jsx("polyline",{className:"series-line",points:m.join(" "),fill:"none",stroke:"var(--accent)",strokeWidth:"2"})]}),u.jsx("div",{className:"axis-ticks x-axis-ticks",children:S.map(R=>{const C=(R-y)/h*100;return u.jsx("span",{style:{left:`${C}%`},children:R},R)})}),u.jsx("div",{className:"axis-label x-axis-label",children:t})]})]})})},Cl=({title:e,subtitle:t,rows:n,selectedId:r,onSelect:l,isOpen:i,onToggle:s,yLabelForRow:a})=>{const o=n.some(d=>d.rate!==void 0),c=n.find(d=>d.id===r)??n[0],f=d=>d===null?"muted":d>0?"positive":d<0?"negative":"muted",p=a?a(c):"Amount";return u.jsxs("div",{className:"card statement-card",children:[u.jsxs("div",{className:"statement-header",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:t}),u.jsx("h3",{children:e})]}),u.jsx("div",{className:"statement-header-actions",children:u.jsx("button",{className:"button ghost small",type:"button",onClick:s,children:i?"Collapse":"Expand"})})]}),i&&u.jsxs("div",{className:"statement-body",children:[u.jsx("div",{className:"statement-table",children:u.jsxs("table",{className:"data-table clickable",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Line item"}),u.jsx("th",{className:"numeric",children:"Amount"}),u.jsx("th",{className:"numeric",children:"MoM"}),o&&u.jsx("th",{className:"numeric",children:"Rate"})]})}),u.jsx("tbody",{children:n.map(d=>u.jsxs("tr",{className:d.id===(c==null?void 0:c.id)?"active":"",onClick:()=>l(d.id),style:{cursor:"pointer"},children:[u.jsx("td",{children:d.label}),u.jsx("td",{className:"numeric",children:$u(d.value)}),u.jsx("td",{className:`numeric ${f(d.changePct)}`,children:Du(d.changePct)}),o&&u.jsx("td",{className:"numeric muted",children:_g(d.rate)})]},d.id))})]})}),u.jsx("div",{className:"statement-chart",children:c?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"chart-meta",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:"Time series"}),u.jsx("div",{className:"chart-title",children:c.label})]}),u.jsxs("div",{className:"chart-pills",children:[u.jsxs("span",{className:"pill",children:["Now ",$u(c.value)]}),u.jsxs("span",{className:`pill ${f(c.changePct)}`,children:["MoM ",Du(c.changePct)]})]})]}),u.jsx(Gg,{data:c.series,yLabel:p,xTickInterval:12})]}):u.jsx("div",{className:"muted",children:"Select a line item to plot."})})]})]})},Nl=(e,t,n)=>{if(!e.length)return;const r=e.some(l=>l.id===t);(!t||!r)&&n(e[0].id)},Vg=({state:e,history:t})=>{const n=D.useMemo(()=>Bg(e,t),[e,t]),r=D.useMemo(()=>Wg(e,t),[e,t]),l=D.useMemo(()=>Ug(e,t),[e,t]),i=D.useMemo(()=>Hg(e,t),[e,t]),[s,a]=D.useState({}),[o,c]=D.useState({assets:!0,liabilities:!0,income:!0,cashflow:!0});return D.useEffect(()=>{Nl(n,s.assets,f=>a(p=>({...p,assets:f})))},[n,s.assets]),D.useEffect(()=>{Nl(r,s.liabilities,f=>a(p=>({...p,liabilities:f})))},[r,s.liabilities]),D.useEffect(()=>{Nl(l,s.income,f=>a(p=>({...p,income:f})))},[l,s.income]),D.useEffect(()=>{Nl(i,s.cashflow,f=>a(p=>({...p,cashflow:f})))},[i,s.cashflow]),u.jsxs("div",{className:"stack",children:[u.jsx(Cl,{title:"Assets",subtitle:"Balance sheet  assets",rows:n,selectedId:s.assets,onSelect:f=>a(p=>({...p,assets:f})),isOpen:o.assets,onToggle:()=>c(f=>({...f,assets:!f.assets})),yLabelForRow:()=>" (bn)"}),u.jsx(Cl,{title:"Liabilities & equity",subtitle:"Balance sheet  funding",rows:r,selectedId:s.liabilities,onSelect:f=>a(p=>({...p,liabilities:f})),isOpen:o.liabilities,onToggle:()=>c(f=>({...f,liabilities:!f.liabilities})),yLabelForRow:()=>" (bn)"}),u.jsx(Cl,{title:"Income statement",subtitle:"P&L (monthly run rate)",rows:l,selectedId:s.income,onSelect:f=>a(p=>({...p,income:f})),isOpen:o.income,onToggle:()=>c(f=>({...f,income:!f.income})),yLabelForRow:()=>" (bn)"}),u.jsx(Cl,{title:"Cash flow statement",subtitle:"Cash movement (monthly)",rows:i,selectedId:s.cashflow,onSelect:f=>a(p=>({...p,cashflow:f})),isOpen:o.cashflow,onToggle:()=>c(f=>({...f,cashflow:!f.cashflow})),yLabelForRow:()=>" (bn)"})]})},J=(e,t=2)=>Number.isFinite(e)?`${(e*100).toFixed(t)}%`:"N/A",qg=(e,t=2)=>{if(!Number.isFinite(e))return"N/A";const n=(e*100).toFixed(t);return`${e>0?"+":""}${n}%`},jl=(e,t=2)=>Number.isFinite(e)?e.toFixed(t):"N/A",Qg=e=>{if(!Number.isFinite(e))return"N/A";const t=Math.abs(e);return t>=1e9?`A${(e/1e9).toFixed(t>=1e10?0:2)}bn`:t>=1e6?`A${(e/1e6).toFixed(t>=1e8?0:1)}m`:`A${e.toFixed(0)}`},Iu=(e,t=2)=>Number.isFinite(e)?`${e.toFixed(t)}x`:"N/A",lt=({label:e,value:t,helper:n})=>u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-label",children:e}),u.jsx("div",{className:"metric-value",children:t}),n&&u.jsx("div",{className:"metric-helper",children:n})]}),re=({label:e,value:t})=>u.jsxs("tr",{children:[u.jsx("td",{children:e}),u.jsx("td",{className:"align-right",style:{fontWeight:600},children:t})]}),Yg=(e,t=2)=>e===void 0?"N/A":J(e,t),Kg=({market:e,config:t})=>{const n=e.giltCurve.yields;e.giltCurve.nelsonSiegel;const r=e.macroModel.factors;return u.jsxs("div",{className:"grid-two",children:[u.jsxs("div",{className:"card stack",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:"Exogenous variables"}),u.jsx("h3",{children:"UK Macro State"}),u.jsx("p",{className:"muted",style:{marginTop:4},children:"Structural factors (D/S/F/R) drive GDP, inflation, unemployment, policy rate, the curve, and spreads."})]}),u.jsxs("div",{className:"grid-metrics",children:[u.jsx(lt,{label:"Regime",value:e.macroModel.gdpRegime,helper:"Can be either normal or recession."}),u.jsx(lt,{label:"GDP (MoM)",value:qg(e.gdpGrowthMoM),helper:"Monthly GDP growth."}),u.jsx(lt,{label:"Inflation (YoY)",value:J(e.inflationRate),helper:"Sticky CPI-like process."}),u.jsx(lt,{label:"Unemployment",value:J(e.unemploymentRate)}),u.jsx(lt,{label:"Bank Rate",value:J(e.baseRate),helper:"Policy rule with inertia."}),u.jsx(lt,{label:"Macro Credit Spread",value:J(e.creditSpread),helper:"Wider in financial stress / weak labour."}),u.jsx(lt,{label:"Demand",value:jl(r.D),helper:"(+) means positive demand shock"}),u.jsx(lt,{label:"Supply)",value:jl(r.S),helper:"(+) means positive supply shock"}),u.jsx(lt,{label:"Financial Conditions",value:jl(r.F),helper:"(+) means tighter conditions"}),u.jsx(lt,{label:"R* (Neutral real)",value:jl(r.R)}),u.jsx(lt,{label:"RNG Seed",value:`${e.macroModel.rngSeed}`,helper:"Deterministic path for reproducibility."})]})]}),u.jsxs("div",{className:"card stack",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:"Risk-free curve"}),u.jsx("h3",{children:"Gilt Curve"}),u.jsx("p",{className:"muted",style:{marginTop:4},children:"1y/5y/20y anchors are fit each month and other tenors are interpolated"})]}),u.jsxs("table",{className:"data-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Tenor"}),u.jsx("th",{className:"align-right",children:"Yield"})]})}),u.jsxs("tbody",{children:[u.jsx(re,{label:"1Y",value:J(n.y1)}),u.jsx(re,{label:"2Y",value:J(n.y2)}),u.jsx(re,{label:"3Y",value:J(n.y3)}),u.jsx(re,{label:"5Y",value:J(n.y5)}),u.jsx(re,{label:"10Y",value:J(n.y10)}),u.jsx(re,{label:"20Y",value:J(n.y20)}),u.jsx(re,{label:"30Y",value:J(n.y30)})]})]})]}),u.jsxs("div",{className:"card stack",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:"Funding environment"}),u.jsx("h3",{children:"Spreads, Haircuts, Competition"})]}),u.jsx("table",{className:"data-table",children:u.jsxs("tbody",{children:[u.jsx(re,{label:"Competitor Mortgage Rate",value:J(e.competitorMortgageRate)}),u.jsx(re,{label:"Competitor Corporate Loan Rate",value:J(e.riskFreeLong+e.corporateLoanSpread)}),u.jsx(re,{label:"Competitor retail deposit rate",value:J(e.competitorRetailDepositRate)}),u.jsx(re,{label:"Competitor corporate deposit rate",value:Yg(e.competitorCorporateDepositRate)}),u.jsx(re,{label:"ST Wholesale funding spread (over 1y gilt)",value:J(e.wholesaleFundingSpread)}),u.jsx(re,{label:"LT wholesale funding spread (over 30y gilt)",value:J(e.seniorDebtSpread)}),u.jsx(re,{label:"Gilt repo haircut",value:J(e.giltRepoHaircut)}),u.jsx(re,{label:"Corp bond repo haircut",value:J(e.corpBondRepoHaircut)})]})})]}),u.jsxs("div",{className:"card stack",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:"Model inputs"}),u.jsx("h3",{children:"Simulation Parameters"})]}),u.jsx("table",{className:"data-table",children:u.jsxs("tbody",{children:[u.jsx(re,{label:"Tax rate",value:J(t.global.taxRate)}),u.jsx(re,{label:"Operating cost ratio (annual)",value:J(t.global.operatingCostRatio)}),u.jsx(re,{label:"Fixed operating cost (monthly)",value:Qg(t.global.fixedOperatingCostPerMonth??0)}),u.jsx(re,{label:"Max deposit growth (per step)",value:J(t.global.maxDepositGrowthPerStep)}),u.jsx(re,{label:"Max loan growth (per step)",value:J(t.global.maxLoanGrowthPerStep)}),u.jsx(re,{label:"Min CET1 ratio",value:J(t.riskLimits.minCet1Ratio)}),u.jsx(re,{label:"Min leverage ratio",value:J(t.riskLimits.minLeverageRatio)}),u.jsx(re,{label:"Min LCR",value:Iu(t.riskLimits.minLcr)}),u.jsx(re,{label:"Min NSFR",value:Iu(t.riskLimits.minNsfr)})]})})]})]})},vs=new Ig(dt),Xg=["Overview","Scenarios","Accounts","Regulatory","Loans","Costs","Events","Reconciliations"],Zg=()=>{var V,H,ce,je,ft;const[e,t]=D.useState("light"),[n,r]=D.useState(dt),[l,i]=D.useState(gi),[s,a]=D.useState([gi]),[o,c]=D.useState([]),[f,p]=D.useState({retailDepositRate:((V=l.balanceSheet.items.find(M=>M.productType===b.RetailDeposits))==null?void 0:V.interestRate.toString())??"",corporateDepositRate:((H=l.balanceSheet.items.find(M=>M.productType===b.CorporateDeposits))==null?void 0:H.interestRate.toString())??"",mortgageRate:((ce=l.balanceSheet.items.find(M=>M.productType===j.Mortgages))==null?void 0:ce.interestRate.toString())??"",corporateLoanRate:((je=l.balanceSheet.items.find(M=>M.productType===j.CorporateLoans))==null?void 0:je.interestRate.toString())??"",issueLTDebtAmount:"",issueEquityAmount:""}),[d,g]=D.useState(null),[x,y]=D.useState(null),[k,h]=D.useState("Overview"),[m,v]=D.useState(!1),S=D.useRef(null),N=D.useRef(null),R=D.useMemo(()=>l.capital.cet1+l.capital.at1,[l.capital]),C=D.useMemo(()=>l.balanceSheet.items.filter(M=>M.side===A.Asset).reduce((M,P)=>M+P.balance,0),[l.balanceSheet]),w=R>0?l.incomeStatement.netIncome*12/R:0,F=C>0?l.incomeStatement.netInterestIncome*12/C:0,T=Jg(l.compliance,l.riskMetrics);D.useEffect(()=>{document.documentElement.setAttribute("data-theme",e)},[e]),D.useEffect(()=>{var P;if(!m)return;const M=_=>{if(_.key==="Escape"){v(!1);return}if(_.key!=="Tab")return;const z=N.current;if(!z)return;const he=Array.from(z.querySelectorAll('a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])'));if(he.length===0)return;const K=he[0],te=he[he.length-1],ne=document.activeElement;if(_.shiftKey){(!ne||ne===K||!z.contains(ne))&&(_.preventDefault(),te.focus());return}(!ne||ne===te||!z.contains(ne))&&(_.preventDefault(),K.focus())};return window.addEventListener("keydown",M),(P=S.current)==null||P.focus(),()=>{window.removeEventListener("keydown",M)}},[m]);const I=()=>{const M=[],P=Dt=>Dt===""?void 0:Number(Dt),_=P(f.retailDepositRate);_!==void 0&&!Number.isNaN(_)&&M.push({type:"adjustRate",productType:b.RetailDeposits,newRate:_});const z=P(f.corporateDepositRate);z!==void 0&&!Number.isNaN(z)&&M.push({type:"adjustRate",productType:b.CorporateDeposits,newRate:z});const G=P(f.mortgageRate);G!==void 0&&!Number.isNaN(G)&&M.push({type:"adjustRate",productType:j.Mortgages,newRate:G});const he=P(f.corporateLoanRate);he!==void 0&&!Number.isNaN(he)&&M.push({type:"adjustRate",productType:j.CorporateLoans,newRate:he});const K=P(f.issueLTDebtAmount);K&&!Number.isNaN(K)&&K>0&&M.push({type:"issueDebt",productType:b.WholesaleFundingLT,amount:K,rate:0});const te=P(f.issueEquityAmount);te&&!Number.isNaN(te)&&te>0&&M.push({type:"issueEquity",amount:te});const ne=Hh(x,l.time.step);vs.setConfig(n);const{nextState:St,events:Ai}=vs.step(l,M,ne);i(St),a(Dt=>[...Dt,St]),c(Dt=>[...Dt,...Ai])},Y=()=>{var z,G,he,K;if(!d)return;const M=Wh(dt,d),P=Uh(d,M),_=Ii({state:P,config:M});P.riskMetrics=_,P.compliance=_i(_,M.riskLimits),vs.setConfig(M),r(M),i(P),a([P]),c([]),y(d),p({retailDepositRate:((z=P.balanceSheet.items.find(te=>te.productType===b.RetailDeposits))==null?void 0:z.interestRate.toString())??"",corporateDepositRate:((G=P.balanceSheet.items.find(te=>te.productType===b.CorporateDeposits))==null?void 0:G.interestRate.toString())??"",mortgageRate:((he=P.balanceSheet.items.find(te=>te.productType===j.Mortgages))==null?void 0:he.interestRate.toString())??"",corporateLoanRate:((K=P.balanceSheet.items.find(te=>te.productType===j.CorporateLoans))==null?void 0:K.interestRate.toString())??"",issueLTDebtAmount:"",issueEquityAmount:""})};return u.jsxs("div",{className:"app-shell",children:[u.jsxs("header",{className:"hero",children:[u.jsxs("div",{className:"hero-content",children:[u.jsx("div",{className:"eyebrow",children:"Bank strategy lab"}),u.jsx("h1",{children:"UK Bank Simulator"}),u.jsx("p",{className:"muted",children:"Tune pricing, issue capital, and run scenarios to watch the balance sheet respond in real time."}),u.jsxs("div",{className:"hero-pills",children:[u.jsxs("span",{className:"pill",children:["Month ",l.time.step]}),u.jsx("button",{className:"button small",type:"button",onClick:()=>v(!0),children:"Actions"}),u.jsx("button",{className:"button primary small",type:"button",onClick:I,disabled:l.hasFailed,children:"Run next month"}),u.jsx("span",{className:`pill ${l.hasFailed?"danger":"success"}`,children:l.hasFailed?"Resolution mode":"Going concern"}),u.jsx("span",{className:"pill warning",children:x?`Scenario: ${x}`:"Sandbox mode"})]})]}),u.jsxs("div",{className:"hero-side",children:[u.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[u.jsx("span",{className:"muted",style:{fontSize:12},children:"Theme"}),u.jsx("button",{className:"button ghost",onClick:()=>t(M=>M==="light"?"dark":"light"),children:e==="light"?"Switch to dark":"Switch to light"})]}),u.jsxs("div",{className:"muted align-right",children:["ROE ",vt(w),"  NIM ",vt(F)]}),u.jsxs("div",{className:"hero-pills",style:{justifyContent:"flex-end"},children:[u.jsxs("span",{className:"pill",children:["Assets ",_u(C)]}),u.jsxs("span",{className:"pill",children:["Equity ",_u(R)]})]}),u.jsx("div",{className:"muted",style:{textAlign:"right",fontSize:13},children:"Use the Actions panel to adjust pricing, raise capital, and run the next month."})]})]}),l.hasFailed&&u.jsxs("div",{className:"alert danger",children:[u.jsx("div",{style:{fontWeight:700},children:"Bank failed or regulatory breach occurred."}),u.jsx("div",{className:"muted",style:{marginTop:6},children:T}),u.jsxs("div",{className:"muted",style:{marginTop:8},children:[u.jsx("strong",{children:"Final metrics:"})," CET1 ",vt(l.riskMetrics.cet1Ratio),", Leverage ",vt(l.riskMetrics.leverageRatio),", LCR ",vt(l.riskMetrics.lcr),", NSFR ",vt(l.riskMetrics.nsfr),"."]}),u.jsxs("div",{className:"muted",style:{marginTop:8},children:[u.jsx("strong",{children:"Recent events:"}),u.jsx("ul",{style:{margin:"6px 0 0 16px",padding:0},children:o.slice(-5).map((M,P)=>u.jsxs("li",{children:["[",M.severity.toUpperCase(),"] ",M.message]},P))})]})]}),u.jsx("div",{className:"tabs",children:Xg.map(M=>u.jsx("button",{onClick:()=>h(M),className:`tab-button ${k===M?"active":""}`,children:M},M))}),k==="Overview"&&u.jsxs("div",{className:"section-grid",children:[u.jsx("div",{className:"card",children:u.jsx(Ih,{riskMetrics:l.riskMetrics,equity:R,assets:C,roe:w,nim:F})}),u.jsx(Kg,{market:l.market,config:n})]}),k==="Scenarios"&&u.jsxs("section",{className:"stack",children:[u.jsx("h2",{children:"Scenarios"}),u.jsxs("div",{className:"grid-two",children:[u.jsx(Ah,{scenarios:Jr,selectedId:d,onSelect:M=>g(M),onStart:Y,description:(ft=Jr.find(M=>M.id===d))==null?void 0:ft.description}),u.jsxs("div",{className:"card stack",children:[u.jsx("div",{className:"eyebrow",children:"What to expect"}),u.jsx("p",{className:"muted",children:"Starting a scenario reloads the bank with tailored settings and scheduled shocks. You can still tweak pricing and funding in the Actions panel once the scenario is active."}),u.jsx("div",{className:"muted",style:{marginTop:8},children:x?`Currently running: ${x}`:"No scenario running; sandbox mode active."})]})]})]}),k==="Accounts"&&u.jsxs("section",{className:"stack",children:[u.jsx("h2",{children:"Accounts"}),u.jsx(Vg,{state:l,history:s})]}),k==="Regulatory"&&u.jsxs("section",{className:"stack",children:[u.jsx("h2",{children:"Regulatory Metrics"}),u.jsx(Jh,{state:l,history:s,config:n})]}),k==="Loans"&&u.jsxs("section",{className:"stack",children:[u.jsx("h2",{children:"Loans"}),u.jsx(ig,{items:l.balanceSheet.items,loanCohorts:l.loanCohorts})]}),k==="Costs"&&u.jsxs("section",{className:"stack",children:[u.jsx("h2",{children:"Costs"}),u.jsx(sg,{income:l.incomeStatement})]}),k==="Events"&&u.jsxs("section",{className:"stack",children:[u.jsx("h2",{children:"Event Log"}),u.jsx(Oh,{events:o})]}),k==="Reconciliations"&&u.jsxs("section",{className:"stack",children:[u.jsx("h2",{children:"Reconciliations"}),u.jsx(Dg,{state:l})]}),u.jsx("button",{type:"button",className:`actions-handle ${m?"open":""}`,onClick:()=>v(!0),"aria-haspopup":"dialog","aria-controls":"actions-panel","aria-expanded":m,"aria-hidden":m,tabIndex:m?-1:0,children:u.jsx("span",{children:"Actions"})}),u.jsx("div",{className:`actions-drawer-overlay ${m?"open":""}`,onClick:()=>v(!1),"aria-hidden":!m}),u.jsx("aside",{id:"actions-panel",className:`actions-drawer ${m?"open":""}`,role:"dialog","aria-modal":m?!0:void 0,"aria-label":"Actions panel","aria-hidden":!m,children:u.jsxs("div",{ref:N,className:"actions-drawer-content",children:[u.jsxs("div",{className:"actions-drawer-header",children:[u.jsxs("div",{children:[u.jsx("div",{className:"eyebrow",children:"Actions"}),u.jsx("h2",{style:{marginTop:6},children:"Next month levers"}),u.jsx("p",{className:"muted",style:{marginTop:4},children:"Adjust pricing, raise funding, and run the simulation from one place."})]}),u.jsx("button",{ref:S,className:"button icon",type:"button",onClick:()=>v(!1),"aria-label":"Close actions panel",children:""})]}),u.jsx("div",{className:"card stack",children:u.jsx(_h,{state:f,onChange:p,onSubmit:I,disabled:l.hasFailed})})]})})]})},Jg=(e,t)=>e?e.lcrBreached?`Liquidity Coverage Ratio dropped below requirement; HQLA was insufficient versus net outflows (LCR=${vt(t.lcr)}).`:e.nsfrBreached?`Stable funding shortfall; NSFR dipped below 1.0 (NSFR=${vt(t.nsfr)}).`:e.cet1Breached?`CET1 ratio fell under the minimum buffer (CET1 ratio=${vt(t.cet1Ratio)}).`:e.leverageBreached?`Leverage backstop breached (Leverage ratio=${vt(t.leverageRatio)}).`:"The bank failed due to unspecified breach.":"",vt=e=>Number.isFinite(e)?`${(e*100).toFixed(2)}%`:"N/A",_u=e=>Number.isFinite(e)?`${(e/1e9).toFixed(1)}bn`:"N/A",df=document.getElementById("root");if(!df)throw new Error("Root element not found");ys.createRoot(df).render(u.jsx(Lf.StrictMode,{children:u.jsx(Zg,{})}));
